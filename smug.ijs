NB. JOD dictionary dump: 15 Nov 2012 15:08:12
NB. Generated with JOD version; 0.9.85; 16; 13 Oct 2012 14:40:36
NB.
NB. Names & DidNums on current path
NB. +----+---------------------------------------+
NB. |smug|193133147067769202418230860959983462978|
NB. +----+---------------------------------------+

9!:41 [ 1 NB.{*JOD*}
cocurrent 'base' NB.{*JOD*}
sonl_z_=: 'sonl__MK__JODobj i.4' NB.{*JOD*}
showpass_z_=:] [ 1!:2&2 NB.{*JOD*}
SOLOCALE_z_=:":>SO__JODobj NB.{*JOD*}
soput_z_=:SOLOCALE&put NB.{*JOD*}
soclear_z_=: '0 0 $ clearso__MK__JODobj 0' NB.{*JOD*}

cocurrent SO__JODobj NB.{*JOD*}


CREATESETSIG=:'method=flickr.photosets.create&api_key=33167a2f73f92b7837fc9fc8c4c56572&title=test+0&description=api+test&primary_photo_id=48824187&auth_token=122155-43d7e5c2a8865c74&api_sig=8b4479824d3272927468c333f85783f0'

DOCOMMANDS=:1

FLICKRAUTHURL=:'http://www.flickr.com/services/auth/'

FLICKRCOMMENTS=:'flickrcomments.xml'

FLICKRDRV=:'c:'

FLICKRDSN=:'working2007'

FLICKRHTML=:60 104 116 109 108 62 10 60 47 116 97 98 108 101 62 10 60 104 52 62 115 101 116 94 94 116 105 116 108 101 60 47 104 52 62 10 60 104 52 62 105 109 97 103 101 94 94 99 111 117 110 116 60 47 104 52 62 10 60 116 97 98 108 101 32 98 111 114 100 101 114 61 34 49 34 62 10 60 116 114 62 10 9 60 116 100 62 60 73 77 71 32 83 82 67 61 34 105 109 97 103 101 94 94 102 105 108 101 34 32 72 69 73 71 72 84 61 105 109 97 103 101 94 94 104 101 105 103 104 116 32 87 73 68 84 72 61 105 109 97 103 101 94 94 119 105 100 116 104 62 60 47 116 100 62 10 9 60 116 100 62 10 9 9 60 116 97 98 108 101 62 10 9 9 60 116 114 62 60 116 100 62 105 109 97 103 101 94 94 116 105 116 108 101 60 47 116 100 62 60 47 116 114 62 10 9 9 60 116 114 62 60 116 100 62 70 108 105 99 107 114 32 80 105 100 58 32 102 108 105 99 107 114 94 94 112 105 100 60 47 116 100 62 60 47 116 114 62 10 9 9 60 116 114 62 60 116 100 62 83 101 116 32 79 114 100 101 114 58 32 115 101 116 94 94 111 114 100 101 114 60 47 116 100 62 60 47 116 114 62 10 9 9 60 116 114 62 60 116 100 62 84 97 107 101 110 32 68 97 116 101 58 32 116 97 107 101 110 94 94 100 97 116 101 60 47 116 100 62 60 47 116 114 62 10 9 9 60 116 114 62 60 116 100 62 76 97 116 105 116 117 100 101 58 32 103 101 111 94 94 108 97 116 105 116 117 100 101 60 47 116 100 62 60 47 116 114 62 10 9 9 60 116 114 62 60 116 100 62 76 111 110 103 105 116 117 100 101 58 32 103 101 111 94 94 108 111 110 103 105 116 117 100 101 60 47 116 100 62 60 47 116 114 62 10 9 9 60 47 116 97 98 108 101 62 10 9 60 47 116 100 62 10 60 47 116 114 62 10 60 47 116 97 98 108 101 62 10 60 47 98 111 100 121 62 10 60 47 104 116 109 108 62 10{a.

FLICKRHTMLHEAD=:60 104 116 109 108 62 10 60 104 49 62 123 123 115 101 116 116 105 116 108 101 125 125 60 47 104 49 62 10 60 104 52 62 83 101 116 32 73 109 97 103 101 32 67 111 117 110 116 58 32 123 123 105 109 97 103 101 99 111 117 110 116 125 125 60 47 104 52 62 10 60 104 52 62 70 108 105 99 107 114 32 83 101 116 32 73 100 58 32 123 123 102 108 105 99 107 114 115 105 100 125 125 60 47 104 52 62 10 60 104 52 62 70 108 105 99 107 114 32 83 101 116 32 68 101 115 99 114 105 112 116 105 111 110 58 32 123 123 115 101 116 100 101 115 99 114 105 112 116 105 111 110 125 125 60 47 104 52 62 10 60 104 53 62 84 104 105 115 32 114 101 112 111 114 116 101 100 32 103 101 110 101 114 97 116 101 100 32 111 110 58 32 123 123 104 116 109 108 116 105 109 101 115 116 97 109 112 125 125 60 47 104 53 62 10 60 116 97 98 108 101 32 98 111 114 100 101 114 61 34 49 34 62 10{a.

FLICKRHTMLROW=:60 116 114 62 10 9 60 116 100 62 60 73 77 71 32 83 82 67 61 34 123 123 105 109 97 103 101 102 105 108 101 125 125 34 32 72 69 73 71 72 84 61 123 123 105 109 97 103 101 104 101 105 103 104 116 125 125 32 87 73 68 84 72 61 123 123 105 109 97 103 101 119 105 100 116 104 125 125 62 60 47 116 100 62 10 9 60 116 100 62 10 9 9 60 116 97 98 108 101 62 10 9 9 60 116 114 62 60 116 100 62 123 123 105 109 97 103 101 116 105 116 108 101 125 125 60 47 116 100 62 60 47 116 114 62 10 9 9 60 116 114 62 60 116 100 62 70 108 105 99 107 114 32 80 105 100 58 32 123 123 102 108 105 99 107 114 112 105 100 125 125 60 47 116 100 62 60 47 116 114 62 10 9 9 60 116 114 62 60 116 100 62 83 101 116 32 79 114 100 101 114 58 32 123 123 115 101 116 111 114 100 101 114 125 125 60 47 116 100 62 60 47 116 114 62 10 9 9 60 116 114 62 60 116 100 62 84 97 107 101 110 32 68 97 116 101 58 32 123 123 116 97 107 101 110 100 97 116 101 125 125 60 47 116 100 62 60 47 116 114 62 10 9 9 60 116 114 62 60 116 100 62 123 123 103 101 111 108 97 116 105 116 117 100 101 125 125 60 47 116 100 62 60 47 116 114 62 10 9 9 60 116 114 62 60 116 100 62 123 123 103 101 111 108 111 110 103 105 116 117 100 101 125 125 60 47 116 100 62 60 47 116 114 62 10 9 9 60 47 116 97 98 108 101 62 10 9 60 47 116 100 62 10 60 47 116 114 62 10{a.

FLICKRHTMLTAIL=:60 47 116 97 98 108 101 62 10 60 47 98 111 100 121 62 10 60 47 104 116 109 108 62{a.

FLICKRIMAGEDIR=:'\temp\flickr\'

FLICKRIMAGESQL=:'select name from thumbnail where idthumb in (select idthumb from thumbnailkeyword where idkeyword in (select idkeyword from keyword where (keyword = ''flickrsets'') or (keyword = ''.jpg'')))'

FLICKROFFLINEDSN=:'offline2007'

FLICKRPATH=:'\pictures\online\flickr\xml\'

FLICKRPHOTOS=:'flickrphotos.xml'

FLICKRPHOTOSINFO=:'flickrphotosinfo.xml'

FLICKRPRIMARYDSN=:'primary2007'

FLICKRRESTURL=:'http://www.flickr.com/services/rest/'

FLICKRSETS=:'d:\pd\flickr\flickrsets.xml'

FLICKRSIZES=:<;._1 ' Square Thumbnail Small Medium Large Original'

FLICKRTHUMBS=:'flickrthumbsxref.xml'

GALLERYCHARS=:' \0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'

GEOKMLFILE=:'geotagged flickr images.kml'

GEOKMLPATH=:'\pd\coords\'

GETJPGTEST=:71 69 84 32 47 54 54 55 49 56 52 54 95 97 51 54 54 49 56 48 56 50 57 95 115 46 106 112 103 32 72 84 84 80 47 49 46 49 13 10 72 111 115 116 58 32 112 104 111 116 111 115 52 46 102 108 105 99 107 114 46 99 111 109 13 10 67 111 110 110 101 99 116 105 111 110 58 32 99 108 111 115 101 13 10 65 99 99 101 112 116 58 32 42 47 42 13 10{a.

HEADINGDEFAULT=:0

HTMLROWMARKS=:<;._1 ' image^^file image^^height image^^width image^^title flickr^^pid set^^order taken^^date geo^^latitude geo^^longitude'

HTMLVARBPATTERN=:'{{[a-z]*}}'

IEXPLORECMD=:'c:\Program Files\Internet Explorer\iexplore.exe'

IMGEXTENSIONS=:s: <;._1 '      '

IMPORTFLICKRPHOTOS=:'importflickrphotos.txt'

IMPORTFLICKRSETPHOTOXREF=:'importflickrsetphotoxref.txt'

IMPORTFLICKRSETS=:'importflickrsets.txt'

INTERVALTIME=:_180

JODBAKSCRIPTS=:'\joddictionaries\602\bakscripts'

KMLHEADER=:60 63 120 109 108 32 118 101 114 115 105 111 110 61 34 49 46 48 34 32 101 110 99 111 100 105 110 103 61 34 85 84 70 45 56 34 63 62 10 60 107 109 108 32 120 109 108 110 115 61 34 104 116 116 112 58 47 47 101 97 114 116 104 46 103 111 111 103 108 101 46 99 111 109 47 107 109 108 47 50 46 48 34 62 10 60 70 111 108 100 101 114 62 10 32 32 60 110 97 109 101 62 71 101 111 116 97 103 103 101 100 32 70 108 105 99 107 114 32 73 109 97 103 101 115 60 47 110 97 109 101 62 10 32 32 60 111 112 101 110 62 49 60 47 111 112 101 110 62 10{a.

KMLPLACEMARK=:60 80 108 97 99 101 109 97 114 107 62 10 32 32 32 32 60 110 97 109 101 62 123 123 112 104 111 116 111 116 105 116 108 101 125 125 60 47 110 97 109 101 62 10 32 32 32 32 60 83 110 105 112 112 101 116 32 109 97 120 76 105 110 101 115 61 34 49 34 62 60 47 83 110 105 112 112 101 116 62 10 32 32 32 32 60 100 101 115 99 114 105 112 116 105 111 110 62 60 33 91 67 68 65 84 65 91 60 112 62 10 9 9 9 10 9 9 60 97 32 104 114 101 102 61 39 104 116 116 112 58 47 47 119 119 119 46 102 108 105 99 107 114 46 99 111 109 47 112 104 111 116 111 115 47 123 123 109 121 102 108 105 99 107 114 110 97 109 101 97 125 125 47 123 123 112 105 100 97 125 125 47 39 62 10 9 9 9 60 105 109 103 32 115 114 99 61 32 39 123 123 109 101 100 105 117 109 112 104 111 116 111 117 114 108 125 125 39 47 62 10 9 9 60 47 97 62 10 9 9 60 98 114 32 47 62 10 9 9 10 9 9 60 97 32 104 114 101 102 61 39 104 116 116 112 58 47 47 119 119 119 46 102 108 105 99 107 114 46 99 111 109 47 112 104 111 116 111 115 47 123 123 109 121 102 108 105 99 107 114 110 97 109 101 98 125 125 47 123 123 112 105 100 98 125 125 47 39 62 86 105 101 119 32 97 116 32 60 115 112 97 110 32 115 116 121 108 101 61 34 99 111 108 111 114 58 32 98 108 117 101 59 34 62 70 108 105 99 107 60 47 115 112 97 110 62 10 9 9 9 9 60 115 112 97 110 32 115 116 121 108 101 61 34 99 111 108 111 114 58 32 114 101 100 59 34 62 114 60 47 115 112 97 110 62 60 47 97 62 10 9 9 60 98 114 32 47 62 10 9 9 10 9 9 60 47 112 62 93 93 62 10 32 32 32 32 60 47 100 101 115 99 114 105 112 116 105 111 110 62 10 32 32 32 32 60 76 111 111 107 65 116 62 10 32 32 32 32 32 32 60 108 111 110 103 105 116 117 100 101 62 123 123 108 111 110 103 105 116 117 100 101 125 125 60 47 108 111 110 103 105 116 117 100 101 62 10 32 32 32 32 32 32 60 108 97 116 105 116 117 100 101 62 123 123 108 97 116 105 116 117 100 101 125 125 60 47 108 97 116 105 116 117 100 101 62 10 32 32 32 32 32 32 60 114 97 110 103 101 62 123 123 114 97 110 103 101 125 125 60 47 114 97 110 103 101 62 10 32 32 32 32 32 32 60 116 105 108 116 62 123 123 116 105 108 116 125 125 60 47 116 105 108 116 62 10 32 32 32 32 32 32 60 104 101 97 100 105 110 103 62 123 123 104 101 97 100 105 110 103 125 125 60 47 104 101 97 100 105 110 103 62 10 32 32 32 32 60 47 76 111 111 107 65 116 62 10 32 32 32 32 60 83 116 121 108 101 62 10 32 32 32 32 32 32 60 73 99 111 110 83 116 121 108 101 62 10 32 32 32 32 32 32 32 32 60 73 99 111 110 62 10 32 32 32 32 32 32 32 32 32 32 60 104 114 101 102 62 123 123 115 113 117 97 114 101 112 104 111 116 111 117 114 108 125 125 60 47 104 114 101 102 62 10 32 32 32 32 32 32 32 32 60 47 73 99 111 110 62 10 32 32 32 32 32 32 60 47 73 99 111 110 83 116 121 108 101 62 10 32 32 32 32 60 47 83 116 121 108 101 62 10 32 32 32 32 60 80 111 105 110 116 62 10 32 32 32 32 32 32 60 101 120 116 114 117 100 101 62 49 60 47 101 120 116 114 117 100 101 62 10 32 32 32 32 32 32 60 97 108 116 105 116 117 100 101 77 111 100 101 62 114 101 108 97 116 105 118 101 84 111 71 114 111 117 110 100 60 47 97 108 116 105 116 117 100 101 77 111 100 101 62 10 32 32 32 32 32 32 60 99 111 111 114 100 105 110 97 116 101 115 62 123 123 118 105 101 119 112 111 105 110 116 125 125 60 47 99 111 111 114 100 105 110 97 116 101 115 62 10 32 32 32 32 60 47 80 111 105 110 116 62 10 60 47 80 108 97 99 101 109 97 114 107 62 10{a.

KMLPLACEMARKVARBS=:<;._1 ' phototitle myflickrnamea mediumphotourl myflickrnameb pida pidb longitude latitude range tilt heading squarephotourl viewpoint'

KMLTRAILER=:60 47 70 111 108 100 101 114 62 10 60 47 107 109 108 62 10{a.

MANUALORDER=:786444

MISSINGLIMIT=:3

MYFLICKRAPIKEY=:'ee553e7ce4e82fb9cf8f21e78f2912e9'

MYFLICKRNAME=:'jdb99'

MYFLICKRSHAREDSECRET=:'067d251969e55a38'

MYFLICKRTOKEN=:'122081-921d0707a564a30e'

NONDISPLAYDIRECTORIES=:'.\flickrsets.\flickr.\scans.\CD .\email.\calcs.\16bit.\fbs.\film.\psm.\documents.\wip.\proofs.\profiles.\low quality.\raw.\HP RAWS.\mltraw.\video.\hpraw.\01.\02.\03.\04.\05.\06.\07.\08.\09.\10.\11.\12.\digital raw.\mlt raws.\fragments'

NONDISPLAYDIRECTORIES2=:'.4x6.5x7.8x10.\prints.low quality.\January.\February.\March.\April.\May.\June.\July.\August\.Septempber.\October.\November.\December'

PIDEMBEDPAIRS=:(<'(';').'),(<'[';'].'),<'{';'}.'

POSTSETCREATE=:80 79 83 84 32 47 115 101 114 118 105 99 101 115 47 114 101 115 116 47 32 72 84 84 80 47 49 46 49 13 10 67 111 110 116 101 110 116 45 84 121 112 101 58 32 109 117 108 116 105 112 97 114 116 47 102 111 114 109 45 100 97 116 97 59 32 98 111 117 110 100 97 114 121 61 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 55 100 52 52 101 49 55 56 98 48 52 51 52 13 10 72 111 115 116 58 32 119 119 119 46 102 108 105 99 107 114 46 99 111 109 13 10 67 111 110 116 101 110 116 45 76 101 110 103 116 104 58 32 49 48 56 57 13 10 13 10 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 55 100 52 52 101 49 55 56 98 48 52 51 52 13 10 67 111 110 116 101 110 116 45 68 105 115 112 111 115 105 116 105 111 110 58 32 102 111 114 109 45 100 97 116 97 59 32 110 97 109 101 61 34 97 112 105 95 107 101 121 34 13 10 13 10 101 101 53 53 51 101 55 99 101 52 101 56 50 102 98 57 99 102 56 102 50 49 101 55 56 102 50 57 49 50 101 57 13 10 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 55 100 52 52 101 49 55 56 98 48 52 51 52 13 10 67 111 110 116 101 110 116 45 68 105 115 112 111 115 105 116 105 111 110 58 32 102 111 114 109 45 100 97 116 97 59 32 110 97 109 101 61 34 97 117 116 104 95 116 111 107 101 110 34 13 10 13 10 49 50 50 48 56 49 45 57 50 49 100 48 55 48 55 97 53 54 52 97 51 48 101 13 10 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 55 100 52 52 101 49 55 56 98 48 52 51 52 13 10 67 111 110 116 101 110 116 45 68 105 115 112 111 115 105 116 105 111 110 58 32 102 111 114 109 45 100 97 116 97 59 32 110 97 109 101 61 34 97 112 105 95 115 105 103 34 13 10 13 10 54 50 53 51 57 97 49 99 54 51 99 50 49 102 48 48 53 98 53 50 102 53 97 97 51 52 54 48 51 50 102 48 13 10 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 55 100 52 52 101 49 55 56 98 48 52 51 52 13 10 67 111 110 116 101 110 116 45 68 105 115 112 111 115 105 116 105 111 110 58 32 102 111 114 109 45 100 97 116 97 59 32 110 97 109 101 61 34 109 101 116 104 111 100 34 13 10 13 10 102 108 105 99 107 114 46 112 104 111 116 111 115 101 116 115 46 99 114 101 97 116 101 13 10 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 55 100 52 52 101 49 55 56 98 48 52 51 52 13 10 67 111 110 116 101 110 116 45 68 105 115 112 111 115 105 116 105 111 110 58 32 102 111 114 109 45 100 97 116 97 59 32 110 97 109 101 61 34 116 105 116 108 101 34 13 10 13 10 84 101 115 116 32 65 80 73 32 67 114 101 97 116 101 100 32 83 101 116 13 10 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 55 100 52 52 101 49 55 56 98 48 52 51 52 13 10 67 111 110 116 101 110 116 45 68 105 115 112 111 115 105 116 105 111 110 58 32 102 111 114 109 45 100 97 116 97 59 32 110 97 109 101 61 34 112 114 105 109 97 114 121 95 112 104 111 116 111 95 105 100 34 13 10 13 10 51 55 56 48 57 50 51 51 13 10 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 55 100 52 52 101 49 55 56 98 48 52 51 52 13 10 67 111 110 116 101 110 116 45 68 105 115 112 111 115 105 116 105 111 110 58 32 102 111 114 109 45 100 97 116 97 59 32 110 97 109 101 61 34 100 101 115 99 114 105 112 116 105 111 110 34 13 10 13 10 84 104 105 115 32 116 101 115 116 32 115 101 116 32 119 97 115 32 99 114 101 97 116 101 100 32 98 121 32 74 32 65 80 73 32 102 108 105 99 107 114 32 117 116 105 108 105 116 121 32 115 99 114 105 112 116 115 13 10 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 55 100 52 52 101 49 55 56 98 48 52 51 52 45 45 13 10{a.

POSTTEMPLATE=:80 79 83 84 32 47 115 101 114 118 105 99 101 115 47 117 112 108 111 97 100 47 32 72 84 84 80 47 49 46 49 10 67 111 110 116 101 110 116 45 84 121 112 101 58 32 109 117 108 116 105 112 97 114 116 47 102 111 114 109 45 100 97 116 97 59 32 98 111 117 110 100 97 114 121 61 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 55 100 52 52 101 49 55 56 98 48 52 51 52 10 72 111 115 116 58 32 119 119 119 46 102 108 105 99 107 114 46 99 111 109 10 67 111 110 116 101 110 116 45 76 101 110 103 116 104 58 32 51 53 50 54 49 10 10 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 55 100 52 52 101 49 55 56 98 48 52 51 52 10 67 111 110 116 101 110 116 45 68 105 115 112 111 115 105 116 105 111 110 58 32 102 111 114 109 45 100 97 116 97 59 32 110 97 109 101 61 34 97 112 105 95 107 101 121 34 10 10 51 54 51 50 54 50 51 53 51 50 52 53 51 50 52 53 10 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 55 100 52 52 101 49 55 56 98 48 52 51 52 10 67 111 110 116 101 110 116 45 68 105 115 112 111 115 105 116 105 111 110 58 32 102 111 114 109 45 100 97 116 97 59 32 110 97 109 101 61 34 97 117 116 104 95 116 111 107 101 110 34 10 10 52 51 54 52 51 54 53 52 53 10 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 55 100 52 52 101 49 55 56 98 48 52 51 52 10 67 111 110 116 101 110 116 45 68 105 115 112 111 115 105 116 105 111 110 58 32 102 111 114 109 45 100 97 116 97 59 32 110 97 109 101 61 34 97 112 105 95 115 105 103 34 10 10 52 51 55 51 50 56 53 48 57 51 50 55 52 54 53 55 51 50 52 53 10 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 55 100 52 52 101 49 55 56 98 48 52 51 52 10 67 111 110 116 101 110 116 45 68 105 115 112 111 115 105 116 105 111 110 58 32 102 111 114 109 45 100 97 116 97 59 32 110 97 109 101 61 34 112 104 111 116 111 34 59 32 102 105 108 101 110 97 109 101 61 34 67 58 92 116 101 115 116 46 106 112 103 34 10 67 111 110 116 101 110 116 45 84 121 112 101 58 32 105 109 97 103 101 47 106 112 101 103 10 10 123 82 65 87 32 74 70 73 70 32 68 65 84 65 125 10 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 45 55 100 52 52 101 49 55 56 98 48 52 51 52 45 45 10{a.

showpass soput ".'nl_',SOLOCALE,'_ i.4' [ cocurrent 'base' NB.{*JOD*}
".soclear NB.{*JOD*}
cocurrent SO__JODobj NB.{*JOD*}


RANGEDEFAULT=:2000

READTOKEN=:'122081-921d0707a564a30e'

SHOW=:'[';'].'

SHOWCOMMANDS=:1

SHOWSEND=:0

SMALL=:'(';').'

SOURCE=:'{';'}.'

TEMPLOCALE=:'_tmp_'

TESTAPIKEY=:'9a0554259914a86fb9e7eb014e4e5d52'

TESTFROB=:'934-746563215463214621'

TESTLOGINURL=:'http://www.flickr.com/services/auth/?api_key=9a0554259914a86fb9e7eb014e4e5d52&perms=wread&frob=934-746563215463214621&api_sig=06d7a30d8c35769f18f330767e865362'

TESTSECRET=:'000005fab4534d05'

TESTSETDIR=:'d:\pictures\online\flickr\flickrsets\been there done that\'

TESTSETPIDS=:<;._1 ' 2455276 6671846 2641114 2241146 2486948 2645703 4445642 2486870 7352134 7357378 6224952 7363706 5088708 2489749 8482425 15475735 19030578 19553390 19983766 37809233'

TILTDEFAULT=:60

TODAYTOKEN=:'122081-921d0707a564a30e'

VIEWPOINTDEFAULT=:0 0 0

WAITSECONDS=:0.34999999999999998

WGETOUTPUT=:'c:\temp\wgetout.dat'

WGETPATH=:''

WRITETOKEN=:'122081-921d0707a564a30e'

XMLHEADER=:'<?xml version="1.0" encoding="utf-8" ?>'

flickrAPIINTERFACE=:''

flickrAPIVMD=:'0.1.0';16;'18 Nov 2007 11:44:18'

flickrINTERFACE=:<;._1 ' checkflickrthumbsxref checktoken downloadimage downloadsetdiff finduser geotaggedkml getallphotosinfoxml getallphotosxml getfrob getgroups getimagedimensions getimg getnotinset getphotocounts getphotoinfo getphotosinset getphotosizes getrecentphotos getrelatedtags getsetlist gettoken getuntagged geturl getusertags listseturls loadxrefFlickrThumbs loadxrefGeotagged loadxrefIdTimesName loadxrefSidNameDesc loginflickr makephotolinks makesethtml md5fromstring nowunixsecs nullsqimages pairbracdir parselastupdate parseondates parseonimgsrc parseonphoto parseonphotoset parseonsize parseontag parsepids parseposted parsesids parsetaken parsetitles parseviews pidsfrname pidsindb pidsnotindb pidsnotxrefed searchgroups searchme searchphotos setsnotxrefed sidfrname sqbracdir updateflickrxml updateinfofile updatesethtml updatesmallthumbs updatethumbsgalleries'

flickrROOTWORDS=:<;._1 ' FLICKRPRIMARYDSN checktoken dispdirs finduser flickrINTERFACE flickrROOTWORDS flickrSetPhotoXref flickrVMD getgroups getphotocounts getrecentphotos getrelatedtags gettags getuntagged getusertags listseturls loginflickr nowunixsecs nullsqimages pairbracdir pidsfrname pidsnotindb searchgroups searchme searchphotos setflickrdrive setsnotxrefed sidfrname sqbracdir updateflickrxml updatesethtml updatesmallthumbs updatethumbsgalleries'

flickrVMD=:3r4;75;' 5 Jun 2007 21:33:37'

flickrXthumbsVMD=:1r3;19;'19 Nov 2007 16:30:18'

sdARIZONA=:'\pictures\online\flickrsets\arizona toodling\'

sdBEENTHERE=:'\pictures\online\flickrsets\been there done that\'

sdBEIRUT=:'\pictures\20THCENTURY\Beirut\flickrsets\beirut lebanon 1960s\'

sdDIVING=:'\pictures\20THCENTURY\Barbados\flickrsets\diving at bellairs\'

sdENEWETAK=:'\pictures\20THCENTURY\Edmonton\Enewetak Trips\flickrsets\enewetak atoll 1980s\'

sdGHANA=:'\pictures\20THCENTURY\Ghana\flickrsets\ghana 1970s\'

sdGRANDPARENTS=:'\pictures\online\flickrsets\grandparents\'

sdIRAN=:'\pictures\20THCENTURY\Iran\flickrsets\iran 1960s\'

sdKINGSTON=:'\pictures\online\flickrsets\kingston\'

sdMINNESOTA=:'\pictures\online\flickrsets\minnesota\'

sdMYKIDS=:'\pictures\online\flickrsets\my kids\'

sdNEWYORK=:'\pictures\2005\New York Anniversary Trip\flickrsets\new york\'

sdNORTHBYNW=:'\pictures\online\flickrsets\north by northwest\'

sdNOTINSETS=:'\pictures\online\flickrsets\not in sets\'

sdOTTAWA=:'\pictures\online\flickrsets\in and around ottawa\'

sdPANORAMAS=:'\pictures\online\flickrsets\panoramas\'

sdPORTRAITS=:'\pictures\online\flickrsets\family portraits\'

sdRESTORATIONS=:'\pictures\online\flickrsets\restorations\'

sdVEGAS=:'\pictures\2002\Las Vegas\flickrsets\vegas wedding\'

sdWAYWEWERE=:'\pictures\online\flickrsets\the way we were\'

sdYUKON=:'\pictures\2002\Yukon Trip\flickrsets\yukon trip\'

sdZAMBIA=:'\pictures\2001\Zambian Eclipse Trip\flickrsets\zambia eclipse trip\'

showpass soput ".'nl_',SOLOCALE,'_ i.4' [ cocurrent 'base' NB.{*JOD*}
".soclear NB.{*JOD*}
cocurrent SO__JODobj NB.{*JOD*}


addcomment=:4 : 0

NB.*addcomment v789-- add a photo comment - requires write authorization.
NB.
NB. dyad:  clPid addcomment clComment

NB. object nouns !(*)=. FLICKRAPIKEY FLICKRTOKEN
args=. '?method=flickr.photos.comments.addComment&api_key=',FLICKRAPIKEY,'&auth_token=',FLICKRTOKEN

NB. NIMP (y) text will need cleaning to handle chars like ' & " 
args=. args,'&photo_id=',x,'&comment_text=',alltrim y
dosigposturl args
)

allzerotrim=:] #~ [: -. [: (*./\. +. *./\) 0&=

apisignature=:md5fromstring@sigstring

apisignature2=:md5fromstring@sigstring2

apisignature3=:[: md5fromstring sigstring2

betweenrequired=:4 : 0

NB.*betweenrequired v789-- select sublists between nonnested delimiters.
NB.
NB. Like (betweenstrs) with the restriction that delimiter strings must exist.
NB.
NB. dyad:  blcl =. (clStart;clEnd) betweenstrs cl
NB.        blnl =. (nlStart;nlEnd) betweenstrs nl

's e'=. x
assert. 1 e. sb=. s E. y
assert. 1 e. eb=. e E. y
llst=. sb +. eb
mask=. ~:/\ llst
(#s) }.&.> (mask#llst) <;.1 mask#y
)

checkflickrthumbsxref=:3 : 0

NB.*checkflickrthumbsxref v789-- check flickr thumbs xref.
NB.
NB. monad:  checkflickrthumbsxref clDsn
NB.
NB.   checkflickrthumbsxref 'working2005work'


ftx=. loadxrefFlickrThumbs 0
assert. ({:$ ftx) = #@:~."1 ftx    NB. all rows must be unique
snd=. loadxrefSidNameDesc 0

assert. (0 { ftx) e. '';0 {"1 snd  NB. set ids must exist
assert. (1 { ftx) e. '';1 {"1 snd  NB. names must exist

if. #missing=. ('';1 {"1 snd) -. 1 { ftx do.
  showpass '(',(":#missing),') following flickr sets missing thumbs galleries/directories ...'
  showpass list missing NB. J system util !(*)=. list
end.

gals=. listgalleries y  NB. !(*)=. listgalleries
assert. (2 { ftx) e. 0 {"1 gals  NB. thumbs galleries must exist
assert. direxist&> (<FLICKRDRV,'\') ,&.> 3 { ftx  NB. directories must exist

1 NB. okey dookey
)

checktoken=:3 : 0

NB.*checktoken v789-- check flickr token.
NB.
NB. monad:  checktoken clToken
NB.
NB.   checktoken__fo FLICKRTOKEN__fo  NB. check me

NB. object nouns !(*)=. FLICKRAPIKEY
args=. '?method=flickr.auth.checkToken&api_key=',FLICKRAPIKEY,'&auth_token=', alltrim y
try. dosigresturl args catchd. 'token is not valid or access problem - xml follows:',CRLF,xml__FO return.end.
'token is valid'
)

clearxrefcache=:3 : 0

NB.*clearxrefcache v789-- erase xref cache.
NB.
NB. monad:  clearxrefcache uuIgnore

erase 'xrefFlickrThumbs_tmp_ xrefSidNameDesc_tmp_ xrefTidPid_tmp_ xrefPidTimesName_tmp_'
)

commongroups=:3 : 0

NB.*commongroups v789-- returns bt of groups user has in common with
NB. contacts.
NB.
NB. This  verb extracts a lot of information  from flickr in ways
NB. that the  API  is  not designed  to handle.  It can take many
NB. minutes  to  run  depending  on  how  many  contacts must  be
NB. searched.
NB.
NB. monad:  commongroups uuIgnore
NB.
NB.   commongroups__fo ''

ug=. groupnames getgroups ''
uc=. getcontacts ''
ucnsids=. contactnsids uc

NB. most time consuming step
cgroups=. getuserpublicgroups&.> ucnsids

cgrpnames=. groupnames&.> cgroups
cnames=. contactnames uc
cnames ,. cgrpnames intersect&.> <ug
)

contactnames=:[: 'name'&attrvalue&.> parseoncontact

contactnsids=:[: 'nsid'&attrvalue&.> parseoncontact

contactrelations=:3 : 0

NB.*contactrelations v-- returns a table summarizing relationship to all current contacts.
NB.
NB. monad:  bt =. contactrelations uuIgnore

contxml=. getcontacts ''
nsids=.   contactnsids contxml
relations=. RELATIONS
NB. relations=. getuser&.> nsids
people=.  parseonperson ; relations
rtable=.  ('friend'&attrvalue , 'revcontact'&attrvalue , 'revfriend'&attrvalue)&> people
rtable=.  ". 1 0 1 0 1 (#^:_1)"1 rtable
realname=. >,('realname'&geteletext)&> people
username=. >,('username'&geteletext)&> people
('f C F'; 'User Name';'Real Name') ,: rtable;realname;username
)

createflickrAPI=:3 : 0

NB.*createflickrAPI v789-- initialize flickrAPI objects.
NB.
NB. monad:  createflickrAPI baclFlickrAPIObject
NB.
NB.   NB. sets all object parameters to personal defaults
NB.   load 'flickrAPI'
NB.   fo=. conew 'flickrAPI'
NB.   createflickrAPI__fo fo
NB.
NB. dyad:  uuIgnore createflickrAPI baclFlickrAPIObject

NB. NOTE: to enable the monad for personel use edit
NB. the noun settings listed here to match
NB. your own id, key, secret and token - they are
NB. all character strings.

NB. flickr user identifier
myflickrnsid=.''

NB. flickr API key
myflickrapikey=.''

NB. flickr shared secret key - tied to flickr API key
myflickrsharedsecret=.''

NB. flickr permission token
mytoken=.''

(myflickrnsid;myflickrapikey;myflickrsharedsecret;<mytoken) createflickrAPI y
:
assert. 1 < #&> x NB. keys not set 
 
NB. object nouns !(*)=. FLICKRNSID FLICKRAPIKEY FLICKRSHAREDSECRET FLICKRTOKEN 
'FLICKRNSID FLICKRAPIKEY FLICKRSHAREDSECRET FLICKRTOKEN'=: x

NB. object nouns !(*)=. YAMMER YAMMERCNT
YAMMER=: 1      NB. chatter is on
YAMMERCNT=: 10  NB. user update factor 
FO=: y         NB. set flickr object !(*)=. FO
)

creategallery=:4 : 0

NB.*creategallery v789-- create Thumbsplus gallery with name.
NB.
NB. dyad:  iaGid =. clDsn creategallery clName

NB. require 'dd' !(*)=. ddcon ddsql dddis dderr ddfet ddsel
try.

NB. gallery name must be <: 255 and composed of permitted chars
assert. 256>:#name=. alltrim y
assert. *./ name e. GALLERYCHARS

NB. insert gallery record
sql=. 'insert into gallery (name, sortorder, descend) values '
assert. 0<ch=. ddcon 'dsn=',alltrim x
sql=. sql ,'(''',name,''',',(":MANUALORDER),',0)'
assert. 0=sql ddsql ch

NB. return gallery id of created gallery
sql=. 'select idgallery from gallery where name=''',name,''''
assert. 0<sh=. sql ddsel ch
assert. -. _1 -: gid=. ddfet sh,_1
dddis ch

(>gid);name

catchd.
  'creategallery' saveerror 'unable to create gallery';dderr''
  dddis ch
  throw.
end.
)

createsetsig=:4 : 0

NB.*createsetsig v789-- create set signature string.
NB.
NB. dyad:  clSig =. blcl createsetsig clWriteToken
NB.
NB.   snpiddesc=. 'Test API Created Set';'37809233'
NB.   snpiddesc=. snpiddesc ,<'This test set was created by J API flickr utility scripts'
NB.   writetok=. '122081-921d0707a564a30e'
NB.   snpiddesc createsetsig writetok


writetoken=. alltrim y
'title primaryphoto description'=. alltrim&.> 3 {. x
title=. '+' (I. ' '=title)} title
description=. '+' (I. ' '=description)} description

NB. object nouns !(*)=. FLICKRAPIKEY
args=.      '?method=flickr.photosets.create&api_key=',FLICKRAPIKEY
args=. args,'&title=',title,'&description=',description
args=. args,'&primary_photo_id=',primaryphoto,'&auth_token=',writetoken
signarguments args
)

deletegallery=:4 : 0

NB.*deletegallery v789-- deletes a Thumbsplus gallery.
NB.
NB. dyad:  clDsn deletegallery clName

NB. require 'dd' !(*)=. ddcon ddsql dddis dderr
try. 

NB. gallery name must be <: 255 and composed of permitted chars
assert. 256>:#name=. alltrim y
assert. *./ name e. GALLERYCHARS

NB. delete gallery record 
NB. database is set to delete related records
sql=. 'delete from gallery where name=''',name,''''
assert. 0<ch=. ddcon 'dsn=',alltrim x
assert. 0=sql ddsql ch
dddis ch

name;'gallery deleted'

catchd.
  'deletegallery' saveerror 'unable to delete gallery';dderr''
  dddis ch
  throw.
end.
)

direxist=:3 : 0

NB.*direxist v789-- 1 if directory exists 0 otherwise.
NB.
NB. monad:  pa =. direxist clDrivepath

tf=. (tslash y) ,'0.0' 
wok=. 'junkdata' (write :: _9:) tf
(ferase :: _9:) tf
-. wok-:_9
)

dispdirs=:3 : 0

NB.*dispdirs v789-- returns a ct of display directories from  digest
NB. files.
NB.
NB. This  verb  attempts to compensate  for my mostly  incoherent
NB. display directories. I use the Sherlock Holmes method. Remove
NB. everything  that  isn't a display  directory and what's  left
NB. behind is a good list.
NB.
NB. WARNING: the list returned by this verb is a "hackzimation."
NB.
NB. monad:  ctDirs =. dispdirs {uuIgnore | cl}
NB. dyad:  ctDirs =. uuIgnore dispdirs {uuIgnore | cl}

'primary' dispdirs y
:
file=. ;('offline'-: y){'primary';'offline'
dirs=. ];._2 LF ,~ (read FLICKRDRV,'\pictures\psm\digests\paths_',file,'.txt')-.CR
pats=. <@,:;._1 NONDISPLAYDIRECTORIES
dirs=. dirs #~ -. +./ > pats +./"1@E.&.> <dirs

NB. anything left with _ is not display
dirs=. dirs #~ -. '_' e."1 dirs

NB. clean up more confusion
pats=. <@,:;._1 NONDISPLAYDIRECTORIES2
dirs=. dirs #~ -. +./ > pats +./"1@E.&.> <dirs
)

displaypids=:3 : 0

NB.*displaypids v789-- extract photo ids for display images.
NB.
NB. monad:  blclPids =. displaypids clDirectory

NB. display images are OFTEN in the parent directory of flickrsets.
NB. NOTE: this is not even wrong - display image can be scattered
NB. all over - we can find them by starting with (smallpids) and
NB. then pulling all file names with the characters [] in their
NB. file names.
ddir=. 'flickrsets\' beforestr alltrim y

NB. extract pids from file names in display images directory
NB. Note: display images have pids embedded with [] while
NB. small xref images have pids embedded with ()
'[]' betweenstrs ; 0 {"1 (1!:0) <ddir,'*.jpg'
)

docmds=:3 : 0

NB.*docmds v789-- execute shell commands in char table.
NB.
NB. monad:  docmds ctCommands
NB. dyad:  clDirectory docmds ctCommands

'' docmds y
:
if. #x do. 
  curdir=. (1!:43) ''        NB. current directory
  (1!:44) tslash alltrim x  NB. new current directory
else.
  curdir=.''
end.

NB. execute & show - or not - require 'task' !(*)=. shell
dc=. ]`shell @. DOCOMMANDS
sp=. ]`showpass @. SHOWCOMMANDS 
  
if. -.DOCOMMANDS do. showpass 'command execution is off' end.
if. -.SHOWCOMMANDS do. showpass 'show command is off' end.

for_cmd. y do.
  sp cmd 
  dc cmd
end.

NB. restore current directory
if. #curdir do. (1!:44) curdir end. 

0 0$''
)

doresturl=:3 : 0

NB.*doresturl v789-- do REST argument url.
NB.
NB. monad:  doresturl clUrl

xml__FO=: wgeturl FLICKRRESTURL,y
assert. okxml xml__FO
xml__FO
:
NB. dyad pages 
xml=.'' [ cnt=. 0
whilst. -. lastpage xmlpage__FO do.
  xmlpage__FO=: wgeturl FLICKRRESTURL,y,'&page=',":cnt=.>:cnt 
  assert. okxml xmlpage__FO
  xml=.xml,<xmlpage__FO
end.
xml
)

dosigposturl=:3 : 0

NB.*dosigposturl v789-- sign and POST argument to url.
NB.
NB. monad:  dosigposturl clPostdata

sigargs__FO=: signarguments y

NB. split signed arguments from method
method=. '&' beforestr sigargs
sigargs=. '&' afterstr sigargs 

xml__FO=: sigargs wgetposturl FLICKRRESTURL,method
assert. okxml xml__FO
xml__FO
)

dosigresturl=:3 : 0

NB.*dosigresturl v789-- sign and do REST argument url.
NB.
NB. monad:  clXML   =. dosigresturl clUrl
NB. dyad:   blclXML =. uuIgnore dosigresturl clUrl 

sigargs__FO=: signarguments y
xml__FO=: wgeturl FLICKRRESTURL,sigargs__FO
assert. okxml xml__FO
xml__FO
:
NB. dyad pages 
xml=.'' [ cnt=. 0
whilst. -. lastpage xmlpage__FO do.
  sigargs__FO=: signarguments y,'&page=',":cnt=.>:cnt 
  xmlpage__FO=: wgeturl FLICKRRESTURL,sigargs__FO
  assert. okxml xmlpage__FO
  xml=.xml,<xmlpage__FO
end.
xml
)

downloadimage=:3 : 0

NB.*downloadimage v789-- downloads a flickr image.
NB.
NB. Downloads a flickr image and gives the image a file name that
NB. matches the flickr title (sans  illegal characters). The file
NB. is written to a directory specified by (x789).
NB.
NB. monad:  clFile =. downloadimage (clName ; clPid ; clLink)
NB.
NB.   NB. download flickr set
NB.   pids=. parsepids__fo parseonphoto__fo getphotosinset__fo '61880'
NB.   nlnk=. 'Small' makephotolinks__fo pids
NB.   downloadimage__fo"1 nlnk
NB.
NB. dyad:  clFile =. (clDirectory ; clSize) downloadimage (clName ; clPid ; clLink)

((FLICKRDRV,FLICKRIMAGEDIR);'') downloadimage y
:
'file pid link'=. alltrim&.> y
'imdir size'=. x

NB. set image file extension from flickr link
ext=. '.'&afterlaststr link

NB. any setting other than 'Small' gets square brackets
if. size-:'Small' do.
  assert. -. +./'()' e. file
  NB. embed flickr photo id number in file name
  file=. file,' (',pid,').',ext
else.
  assert. -. +./'[]' e. file
  NB. embed flickr photo id number in file name
  file=. file,' [',pid,'].',ext
end.

assert. 256 >:#resfile=. (tslash imdir),file
ferase resfile
(resfile;0) wgeturl link
resfile
)

downloadset=:3 : 0

NB.*downloadset v789-- download small flickr set images to an extant
NB. directory.
NB.
NB. monad:  blclFiles =. downloadset (clSid ; clTok)
NB.
NB.   downloadset (sidfrname 'Iran');tok
NB.
NB. dyad:  blclFiles =. clDirectory downloadset (clSid ; clTok)
NB.
NB.   'c:\temp\flickr\' downloadset (sidfrname 'Been');tok

(FLICKRDRV,FLICKRIMAGEDIR) downloadset y
:
assert. direxist x
'sid tok'=. y

NB. get current photo ids of set images
showpass 'getting set photos ...'
setpids=. parsepids parseonphoto sid getphotosinset tok

NB. get direct small image urls
showpass 'collecting direct links ...'
links=. 'Small' makephotolinks setpids

NB. download each image in set order
files=.''
for_link. links do.
  showpass 'downloading: ', ; (link) ,&.> ' '
  files=. files,<x downloadimage link
  wait WAITSECONDS
end.

files
)

downloadsetdiff=:3 : 0

NB.*downloadsetdiff v789-- download  set  images  that  are  not  in
NB. directory (x). directory.
NB.
NB. This  verb  downloads set  images that are not in  the target
NB. directory and  resets  file  times  to preserve the  original
NB. flickr set order.
NB.
NB. monad:  blclFiles =. downloadsetdiff (clSid ; clTok ; [clSize)]
NB.
NB.   downloadsetdiff (sidfrname 'Iran');tok
NB.
NB.   NB. download original sizes of set images
NB.   downloadsetdiff (sidfrname 'Beirut');tok;'Original'
NB.
NB. dyad:  blclFiles =. clDirectory downloadsetdiff (clSid ; clTok ; [clSize)]
NB.
NB.   'c:\temp\flickr\' downloadsetdiff (sidfrname 'Been');tok
NB.
NB.   NB. null (sid) means get photos not in any sets
NB.   'c:\temp\not in sets\' downloadsetdiff '';tok

(FLICKRDRV,FLICKRIMAGEDIR) downloadsetdiff y
:

NB. target directory must exist
assert. direxist showpass x
'sid tok size'=. 3 {. y,<'Small'
sid=. alltrim sid

NB. is image size legal
assert. (<size) e. FLICKRSIZES

NB. get current photo ids of set images
if. #sid do.
  showpass 'getting set photos ...'
  setpids=. parsepids parseonphoto getphotosinset sid
else.
  showpass 'getting photos that are not in any sets ...'
  setpids=. parsepids parseonphoto getnotinset ''
end.

NB. get list of images in directory and find online images
NB. that are not present NIMP only jpeg images for now.
NB. Note: uses the pid number embedded in file names by (downloadimage)
if. size-:'Small' do. be=. '(';').' else. be=. '[';'].' end.

NB. get file pids and insure they are time ordered
dirpath=. tslash x
jpgs=. (1!:0) dirpath,'*.jpg'
jpgs=. (/: > 1 {"1 jpgs){jpgs
fpids=. be betweenstrs ; 0 {"1 jpgs

deadpids=. fpids -. setpids 
newpids=.  setpids -. fpids

NB. append difference file only when there are differences
if. 0 < (#newpids) + #deadpids do.
  difffile=. dirpath,'flickrdiffs_',sid,'.txt'
  (toHOST LF,LF,'[[SET DIFFERENCE]] -- ',tstamp '') append difffile
end.

if. #deadpids do.
  diffmsg=. LF,(":#deadpids),' image(s) REMOVED from set [',sid,']'
  (toHOST diffmsg , ; LF ,&.> 0 {"1 (fpids i. deadpids){jpgs) append difffile
end.

if. #newpids do.

  NB. pids must be numeric
  assert. -. _1 e. _1 ".&> newpids

  NB. get direct image urls
  showpass 'collecting direct links ...'
  links=. size makephotolinks newpids

  NB. append original image difference to file
  diffmsg=. 'ADDED to set [',sid,']'
  bigdiff=. toHOST diffmsg originalimagelinks newpids
  bigdiff append difffile

  NB. download each image in set order
  ord=. /: setpids i. 1 {"1 links
  links=. ord{links
  newpids=. ord{newpids
  files=.''
  for_link. links do.
    showpass 'downloading: ', ; (link) ,&.> ' '
    files=. files,<(x;size) downloadimage link
    wait WAITSECONDS
  end.

  NB. set file timestamps to encode flickr set order
  (x;<be) orderbytouching setpids;<newpids
else.
  showpass 'no new photos'
  
  NB. check file/set order - it may have changed
  if.  setpids -: fpids=. fpids -. fpids -. setpids do. ''
  else.
    showpass 'set order has changed - reordering'
    (x;<be) orderbytouching setpids;<setpids #~ setpids~:fpids
  end.
  
end.
)

evfrstopsec=:3 : 0

NB.*evfrstopsec v789-- EV number from aperature (f-stop) and seconds
NB. at 100 asa.
NB.
NB. Based on: EV = (log2(A^2)%T) = log2((L*S)%C) where:
NB.
NB. verbatim:
NB.
NB.   EV  = exposure value
NB.   A   = aperature (f stop)
NB.   T   = seconds
NB.
NB.   L   = luminance
NB.   S   = film speed
NB.   C   = unit constant (1.3 for candelas/ft^2)
NB.                       (12.5 for candelas/m789^2 also lux or lumens/m789^2)
NB.
NB.
NB. monad:  evfrstopsec fl | ft
NB.
NB.   evfrstopsec 1.8 120    NB. f1.8, 120 seconds at 100asa
NB.   evfrstopsec 8.0,%250   NB. f8.0, 1/250 seconds at 100asa
NB.
NB.   evfrstopsec 1.8 8.0 ,: 120,%250  NB. table argument
NB.
NB. dyad:  iaASA evfrstopsec fl | ft
NB.
NB.   3200 evfrstopsec 1.4 120  NB. f1.4, 12 seconds at 3200asa

100 evfrstopsec y
:
'fstop secs'=. y
log2=. 2&^.
ev=. log2 (fstop^2) % secs  NB. base ev
ev - log2 x % 100          NB. adjust for asa
)

fdayfrts=:([: 0 100 100&#. 3: {."1 ]) + ([: 24 60 60&#. 3: }."1 ]) % 100000"_

filelist=:0"_ ({"1) 1!:0

fill=:3 : 0^:(*@#)

NB.*fill v789-- fill 0 gaps in list with linear segments.
NB.
NB. This verb (due to Roger Hui) solves the following puzzle. See
NB. the J Wiki for details.
NB.
NB. verbatim:  http://202.67.223.49/jwiki/Puzzles/Fill_Zero_Gaps
NB.
NB. monad:  nl =. fill nl
NB.
NB.   fill 1 4 0 0 9 10
NB.   fill 0 0 5 0 0 2 0 0 17
NB.   fill 0 0 0 7 11 0 0

b=. 1 (0 _1)} 0~:y
x789=. b#y
n789=. 2 -~/\ I. b
({:x789) ,~ (n789#}:x789) + ; (i.&.>n789) *&.> n789 %~ 2 -~/\ x789
)

finduser=:3 : 0

NB.*finduser v789-- find flickr user by their flickr screen name.
NB.
NB. monad:  finduser clName
NB.
NB.   finduser 'JDB99'  NB. find me

NB. object nouns !(*)=. FLICKRAPIKEY
args=. '?method=flickr.people.findByUsername&api_key=',FLICKRAPIKEY,'&username=', alltrim y
doresturl args
)

firstele=:0"_ pick betweenstrs

firsteletext=:4 : 0

NB.*firsteletext v789-- text of first xml element with tag (x)
NB.
NB. dyad:  clText =. clTag firsteletext clXml

tags=. alltrim x
tags=. ('<',tags,'>');'</',tags,'>'

NB. insist on at least one nonempty element with (x) tag
assert. *./ tags +./@E.&> <y

0 pick tags betweenstrs y
)

flickrGeotagged=:3 : 0

NB.*flickrGeotagged v789-- table of  photos with geoblogger latitude
NB. and longitude.
NB.
NB. monad:  btcl =.  flickrGeotagged clXml
NB.
NB.   tbl=. flickrGeotagged read FLICKRDRV,FLICKRPATH,FLICKRPHOTOSINFO

cxml=. parseonphoto y
ctags=.  , 'tags'&geteletext&> cxml
pids=. parsepids cxml

NB. mask geotagged photos
if. +./ mask=. +./@:( '"geotagged"'&E.) &> ctags do.
  pids=. mask#pids
  ctags=. mask#ctags

  NB. get all raw attribute values
  raws=. 'raw'&attrvalue&> L: 1 parseontag&.> ctags

  NB. retain sorted values beginning with geo:l
  mask=. +./"1 &.> (,:'geo:l')&E. &.> raws
  raws=. /:~&.>  mask #&.> raws

  NB. should be only two rows per raw
  assert. */ 2 = #&> raws

  NB. latitude and longitude
  lb=. <"1&> ('='&afterstr"1) &.> raws
  lb=. pids,.lb

  NB. remove duplicates - info file constructed
  NB. so that first pid is the newest
  lb=. (~: pids) # lb

  NB. all the values in this table should be valid numbers
  NB. with standard middle minus signs for negative numbers
  NB. the following is a simple sanity test that will catch
  NB. nonnumerics sneaking into that latitude and longitude tags
  assert. -. _999 e. , _999 ".&> lb

  NB. result table (pid , latitude , longitude)
  lb

else.
  ''
end.
)

flickrIdTimeName=:3 : 0

NB.*flickrIdTimeName v789-- delimited text for photo ids, times and names. 
NB.
NB. monad:  cl =. flickrIdTimeName clXmlinfo
NB.
NB.   txt=. flickrIdTimeName read FLICKRPHOTOSINFO

NB. parse info xml - depends on one-to-one correspondence
NB. of a mixture of attributes and elements - I don't check
cxml=. parseonphoto y
tbl=. (parsepids ,. parsetaken  ,. 'title'&geteletext) cxml

NB. remove any duplicate photo ids
tbl=. (~: 0 {"1 tbl) # tbl

NB. format delimited text
; (0 {"1 tbl) ,. (TAB ,&.> (<a:;1 2){tbl) ,. <CRLF
)

flickrIdTimesName=:3 : 0

NB.*flickrIdTimesName v789-- table of photo ids, times and names.
NB.
NB. monad:  btcl =. flickrIdTimesName clXmlinfo
NB.
NB.   tbl=. flickrIdTimesName read FLICKRDRV,FLICKRPATH,FLICKRPHOTOSINFO

NB. parse info xml - depends on one-to-one correspondence
NB. of a mixture of attributes and elements
if. 0=#cxml=. parseonphoto y do. '' return.end.

NB. extact times
times=. (parsetaken,.parseposted,.parselastupdate,.parsetakengranularity) parseondates ;cxml
tbl=. (parsepids ,.'title'&geteletext&>) cxml

NB.  photo counts and times must match - true in current xml
assert. (#tbl) = #times
tbl=. (0 {"1 tbl) ,. times ,. 1 {"1 tbl

NB. sort on post date, remove any older duplicates, restore time order
tbl=. (\: ,".&> 2 {"1 tbl){tbl
tbl=. (~: 0 {"1 tbl) # tbl
tbl=. (/: 2 {"1 tbl) {tbl

NB. result table (pid, taken, posted, lastupdate, takengranularity, title)
tbl
)

flickrSetPhotoXref=:3 : 0

NB.*flickrSetPhotoXref v789-- xref table of set and photo ids.
NB.
NB. monad:  btcl =. flickrSetPhotoXref clXml
NB.
NB.   tbl=. flickrSetPhotoXref read FLICKRDRV,FLICKRPATH,FLICKRPHOTOS

xml=. ; 'allflickrsets' geteletext y
xml=. parseonphotoset xml
pids=. parsepids@:parseonphoto&.> xml
sids=. <"0 parsesids&> xml

NB. result table (sid , pid)
tbl=. ; sids ,.&.> pids
)

flickrsetIdNameDesc=:3 : 0

NB.*flickrsetIdNameDesc   v789--  table   of  set  ids,  names   and
NB. descriptions.
NB.
NB. monad:  btcl =. flickrsetIdNameDesc clXmlinfo
NB.
NB.   tbl=. flickrsetIdNameDesc read FLICKRDRV,FLICKRPATH,FLICKRPHOTOS

NB. parse xml - depends on one-to-one correspondence
NB. of a mixture of attributes and elements - I don't check
xml=. ;'flickrsetindex' geteletext y
tbl=. (parsesids ,. 'title'&geteletext ,. 'description'&geteletext) xml

NB. remove any duplicate set ids - result (sid, title, description)
(~: 0 {"1 tbl) # tbl
)

flickrthumbsxref=:3 : 0

NB.*flickrthumbsxref v789-- parse flickrthumbsxref.xml
NB.
NB. monad:  btcl =. flickrthumbsxref clXml

NB. parse elements for each set directory - will assert if any missing
eles=. 'flickrsetid';'flickrset';'thumbsgallery';'thumbsdirectory';'nounname'
alltrim&.> (<('<![CDATA[';']]>')) ;@betweenrequired&.> > eles getrequiredeletext&.> <y
)

fmtdownname=:(0"_ pick ]) , ' '"_ , ([: {. [) , (1"_ pick ]) , ([: {: [) , '.'"_ , [: '.'&afterlaststr 2: pick ]

fmtwgetcmd=:'wget --no-verbose --output-document="'"_ , [ , ('[]'"_ fmtdownname ]) , '" "'"_ , ([: ; [: {: ]) , '"'"_

fullpeers=:(0 { ]) ,: ([: < [: *./"1 [: > 0 { 1 { ]) #&.> 1 { ]

gapulb=:[: (>:@(I.@lastone) ,: <:@(I.@firstone)) 0"_ = ]

geotaggedkml=:3 : 0

NB.*geotaggedkml v789-- generates  a kml  document pointing to  your
NB. current "geotagged" flickr images.
NB.
NB. monad:  clKml =. geotaggedkml uuIgnore

pids=. parsepids parseonphoto searchme 'geotagged'
KMLHEADER,(makeplacemarkkml pids),KMLTRAILER
)

getactivity=:3 : 0

NB.*getactivity v789-- get activity on logged in user for last two days.
NB.
NB. monad:  getactivity uuIgnore
NB.
NB.   getactivity__fo 0

NB. object nouns !(*)=. FLICKRAPIKEY FLICKRTOKEN
args=. '?method=flickr.activity.userPhotos&api_key=',FLICKRAPIKEY,'&timeframe=2d&per_page=500&auth_token=',FLICKRTOKEN
dosigresturl args
)

getallphotosinfoxml=:3 : 0

NB.*getallphotosinfoxml v789-- gets information for (y789) photo ids.
NB.
NB. monad:  clXml =. getallphotosinfoxml blclPids
NB.
NB.   pall=. getallphotosxml__fo ''
NB.   pids=. ~. parsepids__fo parseonphoto__fo pall
NB.   pinfoall=. getallphotosinfoxml__fo pids

xml=.''
yammer 'getting info for ',(":#y),' photos ...'
msgh=. 'photo info downloaded for ' 
msgt=. ' of ',":#y
for_pid. y do.
  NB. save the pid in the flickr object locale - photos can go
  NB. missing on flickr for reasons I do not understand.
  NB. if the pid sticks around you can investigate
  pid__FO=: ;pid
  xml=. xml , <XMLHEADER afterstr getphotoinfo pid__FO
  NB. every YAMMERCNT photos show message !(*)=. YAMMER YAMMERCNT
  if. YAMMER *. 0=YAMMERCNT|pid_index do. showpass msgh,(":pid_index),msgt end.
end.
showpass 'photo info download is complete.'
xml=. ;xml
xml=. ('<flickrinfodownload timestamp="',(tstamp ''),'" >'),xml
xml=. xml,'</flickrinfodownload>'
XMLHEADER,'allflickrphotoinfo' eletags ;xml
)

getallphotosxml=:3 : 0

NB.*getallphotosxml v789--  returns  all flickr  photo  xml  as  one
NB. document.
NB.
NB. monad:  clXml =. getallphotosxml uuIgnore
NB.
NB.   getallphotosxml__fo ''

yammer 'get all photos that are not in any sets ...'
xmlns=. getnotinset ''

yammer 'get all sets ...'
xmlsets=. getsetlist ''

NB. extract set ids
sids=. parsesids xmlsets

yammer 'get photos for each set ...'
msgh=. 'set info downloaded for ' 
msgt=. ' of ',":#sids
xmlphsets=.''
for_sid. sids do.
  xmlphsets=. xmlphsets,<getphotosinset ;sid
  NB. object nouns !(*)=. YAMMER YAMMERCNT
  if. YAMMER *. 0=YAMMERCNT|sid_index do. smoutput msgh,(":sid_index),msgt end.
end.
yammer 'set info download complete.'

NB. remove xml headers and glue these documents together
xmlns=.   'notinflickrsets' eletags XMLHEADER afterstr xmlns
xmlsets=. 'flickrsetindex' eletags XMLHEADER afterstr xmlsets
xmlall=.  'allflickrsets' eletags ;XMLHEADER&afterstr&.> xmlphsets
xmlall=.  '<allflickrpictures timestamp="',(tstamp ''),'" >',xmlns,xmlsets,xmlall
xmlall=. XMLHEADER,xmlall,'</allflickrpictures>'
)

getcontacts=:3 : 0

NB.*getcontacts v789-- get current users contacts.
NB.
NB. monad:  getcontacts uuIgnore
NB.
NB.   getcontacts__fo ''

NB. object nouns !(*)=. FLICKRAPIKEY FLICKRTOKEN
args=. '?method=flickr.contacts.getList&api_key=',FLICKRAPIKEY,'&per_page=1000&auth_token=',FLICKRTOKEN
dosigresturl args
)

getcounts=:3 : 0

NB.*getcounts v789-- list of pictures that do not have any tags.
NB.
NB. monad:  getcounts uuIgnore

NB. object nouns !(*)=. FLICKRAPIKEY FLICKRTOKEN
args=. '?method=flickr.photos.getCounts&api_key=',FLICKRAPIKEY,'&auth_token=',FLICKRTOKEN
dosigresturl args
)

showpass soput ".'nl_',SOLOCALE,'_ i.4' [ cocurrent 'base' NB.{*JOD*}
".soclear NB.{*JOD*}
cocurrent SO__JODobj NB.{*JOD*}


getelewatext=:4 : 0

NB.*getelewatext v789-- get element with attributes text
NB.
NB. dyad:  clTag getelewatext clXml

tags=. alltrim x
tags=. ('<',tags,' ');'</',tags,'>'

NB. will fail if '>' occurs in attribute text -
NB. shouldn't happen for properly utf-8 encoded xml
'>'&afterstr&.> tags betweenstrs y
)

getfrob=:3 : 0

NB.*getfrob v789-- get the flickr frob token.
NB.
NB. monad:  clFrob =. getfrob uuIgnore
NB. 
NB.   getfrob ''

NB. object nouns !(*)=. FLICKRAPIKEY
args=. '?method=flickr.auth.getFrob&api_key=',FLICKRAPIKEY
xml=. dosigresturl args
'frob' firsteletext xml
)

getgeolocation=:3 : 0

NB.*getgeolocation v789-- get geographic location for one photo.
NB.
NB. monad:  getgeolocation clPid 
NB.
NB.   NB. location information for my photos tagged with 'geotagged' and 'yukon'
NB.   fo=: conew 'flickrAPI'
NB.   createflickrAPI__fo fo
NB.   
NB.   ; getgeolocation__fo&.> photopids__fo searchme__fo 'geotagged,yukon'

NB. object nouns !(*)=. FLICKRAPIKEY FLICKRTOKEN
args=. '?method=flickr.photos.geo.getLocation&api_key=',FLICKRAPIKEY,'&auth_token=',FLICKRTOKEN,'&photo_id=',alltrim y
dosigresturl args
)

getgeotaggedkmldata=:3 : 0

NB.*getgeotaggedkmldata v789-- get current geotagged flickr image information.
NB. 
NB. monad:  btclData =. getgeotaggedkmldata clPids
NB. 
NB.   pids=. parsepids parseonphoto searchme 'geotagged'
NB.   getgeotaggedkmldata pids

pids=. y
dat=. ((#pids),#KMLPLACEMARKVARBS)$a:

NB. get current photo information 
smoutput 'getting current photo information for ',(pcnt=.":#pids),' images ...'
msgh=. 'photo info downloaded for ' 
msgt=. ' of ',pcnt
pinfo=. '' [ psizes=. ''
for_pid. pids do.
  pid=. ,>pid
  pinfo=. pinfo,<getphotoinfo pid
  NB. object nouns !(*)=. YAMMER YAMMERCNT FLICKRTOKEN
  psizes=. psizes,<getphotosizes pid,'&auth_token=',FLICKRTOKEN
  if. YAMMER *. 0=YAMMERCNT|pid_index do. smoutput msgh,(":pid_index),msgt end.
end.
smoutput 'photo info download is complete.'

psizes=. parseonsize&> psizes
assert. 1 e. sqmask=. *./ (+./@:('Square'&E.)) &> psizes
assert. 1 e. mdmask=. *./ (+./@:('Small'&E.)) &> psizes

urls=. 'source'&attrvalue&.> ,mdmask #"1 psizes
dat=. urls (<a:;KMLPLACEMARKVARBS i. <'mediumphotourl')} dat
urls=. 'source'&attrvalue&.> ,sqmask #"1 psizes
dat=. urls (<a:;KMLPLACEMARKVARBS i. <'squarephotourl')} dat
dat=. (,'title'& geteletext&> pinfo) (<a:;KMLPLACEMARKVARBS i. <'phototitle')} dat
dat=. pids (<a:;KMLPLACEMARKVARBS i. <'pida')} dat
dat=. pids (<a:;KMLPLACEMARKVARBS i. <'pidb')} dat
dat=. (<MYFLICKRNAME) (<a:;KMLPLACEMARKVARBS i. <'myflickrnamea')} dat
dat=. (<MYFLICKRNAME) (<a:;KMLPLACEMARKVARBS i. <'myflickrnameb')} dat
dat=. (<":RANGEDEFAULT) (<a:;KMLPLACEMARKVARBS i. <'range')} dat
dat=. (<":TILTDEFAULT) (<a:;KMLPLACEMARKVARBS i. <'tilt')} dat
dat=. (<":HEADINGDEFAULT) (<a:;KMLPLACEMARKVARBS i. <'heading')} dat

lb=. flickrGeotagged ;pinfo
dat=. (1 {"1 lb) (<a:;KMLPLACEMARKVARBS i. <'latitude')} dat
dat=. (2 {"1 lb) (<a:;KMLPLACEMARKVARBS i. <'longitude')} dat

NB. default viewpoint longitude, latitude, 0
viewpoint=. (2 {"1 lb) ,. (<',') ,. (1 {"1 lb) ,. <',0'
viewpoint=. <"1 ;"1 alltrim&.> viewpoint
dat=. viewpoint (<a:;KMLPLACEMARKVARBS i. <'viewpoint')} dat

NB. sort by longitude - makes for smoother Google Earth sailing
ord=. /: ".&> 2 {"1 lb
dat=. ord{dat
lb=. ord{lb

NB. now sort by nearest unseen neighbor
dat=. (nearestnew lb){dat

KMLPLACEMARKVARBS,dat
)

getgroups=:3 : 0

NB.*getgroups v789-- returns a list of groups to  which  you can add
NB. photos.
NB.
NB. monad:  clXml =. getgroups uuIgnore
NB.
NB.   getgroups__fo ''  

NB. object nouns !(*)=. FLICKRAPIKEY  FLICKRTOKEN
args=. '?method=flickr.groups.pools.getGroups&api_key=',FLICKRAPIKEY,'&auth_token=',FLICKRTOKEN
dosigresturl args
)

getimagedimensions=:4 : 0

NB.*getimagedimensions  v789-- lookup image dimensions in thumbsplus
NB. database.
NB.
NB. This verb looks  up image widths and heights of (downloadset)
NB. images in  a  Thumbplus  database.  It assumes any downloaded
NB. images have been loaded  into  a  Thumbplus  database and the
NB. database has been setup as an ODBC datasource.
NB.
NB. dyad:  iaChandle getimagedimensions clPath
NB.
NB.   ch=. ddcon 'dsn=t7workingtest'  NB. connect database
NB.   imdir=. 'd:\working\pictures\2001\Zambia Eclipse Trip\flickrset\online\*.jpg'
NB.   ch getimagedimensions imdir

NB. get image file names in indicated directory.
if. #files=. (1!:0) <y do.

  NB. get thumbsplus paths  !(*)=. ddsel ddfch
  assert. 0<s=. 'select idpath, name from path' ddsel x
  assert. -. _1 -: path=. ddfch s,_1

  NB. paths should match ignoring case and volume
  filepath=. s: <tolower '\' lctrim justpath y
  dbpaths=. s: tolower 1 pick path
  assert. filepath e. dbpaths

  NB. get all thumbsplus files with a path id matching (filepath)
  sql=. 'select a.name, a.width, a.height from thumbnail a, path b where '
  idpath=. (dbpaths i. filepath) { 0 pick path
  sql=. sql,'a.idPath=',":idpath
  assert. 0<s=. sql ddsel x
  assert. -. _1 -: dbfiles=. ddfch s,_1

  NB. match directory files to db files - all files must be in database
  fnames=.  s: 0 {"1 files
  dbnames=. s: 0 pick dbfiles
  assert. *./fnames e. dbnames
  dbfiles=. (<dbnames i. fnames) {&.> dbfiles

  NB. sort files by file time - corresponds to flickr
  NB. set order in normal use
  dbfiles=. <"1&> (</: >1 {"1 files) {&.> dbfiles

  NB. result bt fname, width, height
  dbfiles=. (alltrim&.>  0 { dbfiles) 0} dbfiles
  dbfiles=. |: (":&.> 1 2 { dbfiles) (1 2)} dbfiles
else.
  0 3$''
end.
)

getimg=:3 : 0

NB.*getimg v789-- get flickr image data.
NB.
NB. monad:  getimg clUrl
NB.
NB.   NB. gets binary image data as a stream of bytes
NB.   getimg 'http://photos4.flickr.com/6671846_a366180829_s.jpg'

NB. a close clone of (geturl) with some changes
NB. sdcheck sdclose sdconnect sdgethostbyname sdsend sdsocket split

url=. y
url=. 'http://' rmprefix url
NB. Split URL into hostname, file
'hostname file'=.(url i. '/') split url
assert. -. file-:''

NB. format http request
dbCRLF=. CRLF,CRLF
httprq=.         'GET ',file,' HTTP/1.1',CRLF
httprq=. httprq ,'Host: ',hostname,CRLF
httprq=. httprq ,'Connection: close',CRLF,'Accept: */*',dbCRLF

NB. get numeric host
host=. sdcheck sdgethostbyname hostname
('sk',TEMPLOCALE)=:sk=. 0 pick sdcheck sdsocket ''
sdcheck sdconnect sk;host,<80
if. SHOWSEND do. showpass httprq end.
sdcheck httprq sdsend sk,0

NB. read socket fully
dat_tmp_=: sk read1^:_ ''
sdclose sk

NB. check and drop http header
assert. 1 e. tmp=. dbCRLF E. dat_tmp_
tmp=. tmp i. 1
assert.  1 e.  'Content-Type: image/' E. tmp {. dat_tmp_
(tmp + #dbCRLF) }. dat_tmp_
)

getnotinset=:3 : 0

NB.*getnotinset v789-- list of pictures not in current user's sets.
NB.
NB. monad:  getnotinset uuIgnore
NB.
NB.   getnotinset__fo 0

NB. object nouns !(*)=. FLICKRAPIKEY FLICKRTOKEN 
args=. '?method=flickr.photos.getNotInSet&api_key=',FLICKRAPIKEY,'&per_page=500&auth_token=',FLICKRTOKEN
dosigresturl args
)

getphotocounts=:3 : 0

NB.*getphotocounts  v789--   gets  photo  post  counts  for  defined
NB. intervals.
NB.
NB. The  (y789) argument  is an  integer list of unix time  stamps:
NB. unix timestamps: seconds since Jan 1, 1970 at 00:00 GMT.
NB.
NB. monad: clXml =. getphotocounts ilUnixtimes
NB.
NB.   ts0=. 966622895 1010342461
NB.   getphotocounts__fo ts0
NB.
NB.   NB. approx counts over last 450 days
NB.   now=. nowunixsecs''
NB.   cntxml=. getphotocounts__fo now - 86400 * i. 450
NB.
NB.   NB. my post activity during the last 450 days -
NB.   NB. leading and trailing 0 post days removed
NB.   require 'plot'
NB.
NB.   NB. extract all counts from xml
NB.   cnts=. ; ".@:('count'&attrvalue)&.> ('<photocount ' E. cntxml)<;.1 cntxml
NB.   plot allzerotrim cnts

NB. list is ordered by time
dateranges=. ~. /:~ y
dateranges=. }. ; ','&,@":&.> <"0 dateranges
dateranges=. '&dates=',dateranges

NB. object nouns !(*)=. FLICKRAPIKEY FLICKRTOKEN
args=. '?method=flickr.photos.getCounts&api_key=',FLICKRAPIKEY,dateranges,'&auth_token=',FLICKRTOKEN
dosigresturl args
)

getphotoinfo=:3 : 0

NB.*getphotoinfo v789-- get information about one flickr photo.
NB.
NB. monad:  clXml =. getphotoinfo clPhotoId 

NB. object nouns !(*)=. FLICKRAPIKEY FLICKRTOKEN
id=. alltrim y
args=. '?method=flickr.photos.getInfo&api_key=',FLICKRAPIKEY,'&photo_id=',id,'&auth_token=',FLICKRTOKEN
dosigresturl args
)

getphotosinset=:3 : 0

NB.*getphotosinset v789-- list of flickr photos in one set.
NB.
NB. monad:  clXML =. getphotosinset clSetId
NB.  
NB.   NB. get list of all photo set ids (sids)
NB.   xml=. getsetlist__fo ''
NB.   sids=. ('<photoset id="';'" primary=') betweenstrs__fo xml
NB.
NB.   NB. photos in first set
NB.   getphotosinset__fo 0 pick sids
NB.
NB. dyad: blclXML =. uuIgnore getphotosinset clSetId
NB.
NB.   getphotosinset__fo~ sid  NB. page for large sets 

NB. object nouns !(*)=. FLICKRAPIKEY FLICKRTOKEN
args=. '?method=flickr.photosets.getPhotos&api_key=',FLICKRAPIKEY,'&per_page=500&photoset_id=',y,'&auth_token=',FLICKRTOKEN
dosigresturl args
:
args=. '?method=flickr.photosets.getPhotos&api_key=',FLICKRAPIKEY,'&per_page=500&photoset_id=',y,'&auth_token=',FLICKRTOKEN
dosigresturl~ args
)

getphotosizes=:3 : 0

NB.*getphotosizes v789-- returns available flickr photo sizes.
NB.
NB. monad:  getphotosizes clPid
NB.
NB.   getphotosizes__fo '2427286' NB. one photo only

NB. objects nouns !(*)=. FLICKRAPIKEY
args=. '?method=flickr.photos.getSizes&api_key=',FLICKRAPIKEY,'&photo_id=', alltrim y
dosigresturl args
)

getpopulartags=:3 : 0

NB.*getpopulartags v789-- gets current users popular tags.
NB.
NB. monad:  clXml =. getpopulartags uuIgnore

NB. object nouns !(*)=. FLICKRAPIKEY FLICKRTOKEN
args=. '?method=flickr.tags.getListUserPopular&api_key=',FLICKRAPIKEY,'&count=500&auth_token=',FLICKRTOKEN
dosigresturl args
)

getrecentphotos=:3 : 0

NB.*getrecentphotos v789-- search for recent flickr photos.
NB.
NB. monad:  getrecentphotos uuIgnore

NB. object nouns (*)=. FLICKRAPIKEY
args=. '?method=flickr.photos.getRecent&api_key=',FLICKRAPIKEY
doresturl args
)

getrelatedtags=:3 : 0

NB.*getrelatedtags v789-- gets tags  related  to  (y789) tag based  on
NB. clustering.
NB.
NB. monad:  clXml =. getrelatedtags clTag
NB.
NB.  getrelatedtags__fo 'american'

NB. objects nouns !(*)=. FLICKRAPIKEY
args=. '?method=flickr.tags.getRelated&api_key=',FLICKRAPIKEY,'&tag=',alltrim y
doresturl args
)

getrequiredeletext=:4 : 0

NB.*getrequiredeletext v789-- get pure element text between mandatory delimiters.
NB.
NB. dyad:  clTag getrequiredeletext clXml

tags=. alltrim x
tags=. ('<',tags,'>');'</',tags,'>'
tags betweenrequired y
)

getrowhtmldata=:4 : 0

NB.*getrowhtmldata v789-- generate btcl of row html data.
NB.
NB. dyad:  clHtml =. (clDirectory ; clDsn) getrowhtmldata blclPids
NB.
NB.   NB. assumes set images downloaded to (imdir) and valid login token (tok)
NB.   dsn=. 'working2005work'  NB. thumbsplus database
NB.   setpids=. parsepids parseonphoto (sidfrname 'Been') getphotosinset tok
NB.   imdir=. 'd:\pictures\online\flickr\flickrsets\been there done that\'
NB.   (imdir;dsn) getrowhtmldata setpids


NB. get image dimensions for images in given directory
'idir dsn'=. x

NB. connect thumbsplus database !(*)=. ddcon dddis
assert. 0<ch=. ddcon 'dsn=',dsn

if. #imgdims=. ch getimagedimensions (tslash idir),'*.jpg' do.
  dddis ch

  NB. all pids must exist in (imgdims) table
  NB. extracting img pids from file names
  imgpids=. ,('(';').jpg')&betweenstrs&> 0 {"1 imgdims
  assert. +./imgpids e. y

  pids=. ~. y

  NB. sort (imgdims) to set order defined by (y) 
  sod=. pids i. imgpids
  mask=. sod < #imgpids
  sod=. mask#sod
  imgdims=. sod{imgdims

  NB. load required xref tables from xml data
  xrefPidTimesName=. loadxrefIdTimesName ''
  xrefGeotagged=. loadxrefGeotagged ''

  NB. name, taken date, and set order
  imgdat=. xrefPidTimesName {~ (0 {"1 xrefPidTimesName) i. pids

  NB. adjust takendates by granularity
  gdates=. (". >4 {"1 imgdat) granulardates >1 {"1 imgdat
  imgdat=. (<"1 gdates) (<a:;1)} imgdat

  NB. latitude and longitude for selected images
  geotagged=. 0 {"1 xrefGeotagged
  mask=. pids e. geotagged
  pidlb=. mask #^:_1 xrefGeotagged {~ geotagged i. pids #~ mask
  idx=. I. mask
  pidlb=. ((<'Latitude: ') ,&.> 1 {"1 idx{pidlb) (<idx;1)} pidlb
  pidlb=. ((<'Longitude: ') ,&.> 2 {"1 idx{pidlb) (<idx;2)} pidlb

  NB. table columns - header names must match html row variables - see FLICKRHTMLROW
  hdr=. 'flickrpid takendate posted lastupdate takengranularity imagetitle geolatitude'
  hdr=. ;: hdr,' geolongitude imagefile imagewidth imageheight setorder'
  try. 
    hdr , imgdat ,. (1 2 {"1 pidlb) ,. imgdims ,. setorder #imgdims
  catchd.
    msg=. 'Image dimensions do not match image data.',LF
    msg=. msg,'This is probably due to small thumbnail images in',LF
    msg=. msg,'flickrset directories that should have been deleted.',LF
    msg=. msg,'FIX AND RERUN!'
    showpass msg
    dddis ch
    0 8$''
  end.
else.
  dddis ch
  0 8$''
end.
)

getsetlist=:3 : 0

NB.*getsetlist v789-- list of current user's flickr sets.
NB.
NB. monad:  getsetlist uuIgnore
NB.
NB.   getsetlist__fo ''

NB. object nouns !(*)=. FLICKRAPIKEY FLICKRTOKEN
args=. '?method=flickr.photosets.getList&api_key=',FLICKRAPIKEY,'&auth_token=',FLICKRTOKEN
dosigresturl args
)

getsetphotos=:3 : 0

NB.*getsetphotos v789-- returns set (pids) from xml file.
NB.
NB. monad:  blclPids =. getsetphotos clSid

xml=. read FLICKRDRV,FLICKRPATH,FLICKRPHOTOS
if. #sid=. alltrim y do.
  cxml=. parseonphotoset ; 'allflickrsets' geteletext xml

  NB. only current valid sids
  sids=. 'id'&attrvalue&.> cxml 
  assert. (sid=. boxopen sid) e. sids

  NB. pids within sid
 'id'&attrvalue&.> parseonphoto ; (sids i. sid){cxml
else.
  NB. handle NOT IN SETS
  cxml=. 'notinflickrsets' geteletext xml
  'id'&attrvalue&.> parseonphoto ; cxml
end.
)

gettags=:3 : 0

NB.*gettags v789-- get current user tags.
NB.
NB. monad:  clXml =. gettags uuIgnore

NB. object nouns !(*)=. FLICKRAPIKEY
args=. '?method=flickr.tags.getListUser&api_key=',FLICKRAPIKEY,'&auth_token=',y
doresturl args
)

gettoken=:3 : 0

NB.*gettoken v789-- get flickr API token.
NB.
NB. Get  the token  after  logging  into  to  flickr.  The  login
NB. validates the (frob) token.
NB.
NB. monad:  gettoken clFrob
NB.
NB.   frob=. getfrob ''   NB. get frob - session identifier
NB.   loginreadurl frob   NB. signon to flickr - authenticates frob
NB.
NB.   NB. get api token - do after successful login as this
NB.   NB. requires an authenticated frob token.
NB.   token=. gettoken frob

NB. object nouns !(*)=. FLICKRAPIKEY
args=. '?method=flickr.auth.getToken&api_key=',FLICKRAPIKEY,'&frob=',y
xml=. dosigresturl args
'token' firsteletext xml
)

getuntagged=:3 : 0

NB.*getuntagged v789-- list of pictures that do not have any tags.
NB.
NB. monad:  getuntagged uuIgnore
NB. 
NB.   getuntagged__fo 0

NB. object nouns !(*)=. FLICKRAPIKEY FLICKRTOKEN
args=. '?method=flickr.photos.getUntagged&api_key=',FLICKRAPIKEY,'&auth_token=',FLICKRTOKEN
dosigresturl args
)

geturl=:3 : 0

NB.*geturl v789-- return url value as text.
NB.
NB. monad:  geturl clUrl
NB.
NB.   geturl 'http://pegasus.rutgers.edu/~randall/135/'

NB. coninsert 'jsocket' to make following verbs visible
NB. sdcheck sdclose sdconnect sdgethostbyname sdsend sdsocket split
NB. sd verbs now have direct references in the flickr group

url=. y
url=. 'http://' rmprefix url
NB. Split URL into hostname, file
'hostname file'=.(url i. '/') split url
if. file-:'' do. file=.'/index.html' end.
NB. get numeric host
host=. sdcheck sdgethostbyname hostname
('sk',TEMPLOCALE)=:sk=. 0 pick sdcheck sdsocket ''
sdcheck sdconnect sk;host,<80
file=. 'GET ',file,CR,LF
if. SHOWSEND do. showpass file end.
sdcheck file sdsend sk,0
NB. read socket fully
text=. sk read1^:_ ''
sdclose sk
text
)

getuser=:3 : 0

NB.*getuser v-- get user information.
NB.
NB. Gets  information  about flickr users given an  (nsid). Calls
NB. are authenticated to to collect relationship to authenticated
NB. caller.
NB.
NB. monad:  getuser clNsid

NB. object nouns !(*)=. FLICKRAPIKEY FLICKRTOKEN
args=. '?method=flickr.people.getInfo&api_key=',FLICKRAPIKEY,'&auth_token=',FLICKRTOKEN,'&user_id=',y
dosigresturl args
)

getuserpublicgroups=:3 : 0

NB.*getuserpublicgroups v789-- get a user's public groups.
NB.
NB. monad:  getuserpublicgroups clUserNSID
NB.
NB.   NB. get current user's public groups
NB.   getuserpublicgroups__fo FLICKRNSID__fo

NB. object nouns !(*)=.  FLICKRAPIKEY FLICKRTOKEN 
args=. '?method=flickr.people.getPublicGroups&api_key=',FLICKRAPIKEY,'&auth_token=',FLICKRTOKEN,'&per_page=1000&user_id=',y
dosigresturl args
)

getusertags=:3 : 0

NB.*getusertags v789-- get logged in users tags.
NB.
NB. monad:  getusertags uuIgnore
NB.
NB.   getusertags__fo ''

NB. object nouns !(*)=. FLICKRAPIKEY FLICKRTOKEN
args=.'?method=flickr.tags.getListUser&api_key=',FLICKRAPIKEY,'&auth_token=',FLICKRTOKEN
dosigresturl args
)

granulardates=:4 : 0

NB.*granulardates v789-- cuts yyyy-mm-dd hh:nn:ss dates using granularity code.
NB.
NB. dyad:  ilGranularity granulardates ctDates

NB. current flickr granularity: 0 = Y-m789-d H:i:s; 4 = Y-m789; 6 = Y 
grancodes=. 0 4 6
widths=. 19 7 4
NB. if code is not recogized return full date
((grancodes i. x) { widths,{.widths) {."0 1 y
)

groupnames=:[: 'name'&attrvalue&.> parseongroup

groupnsids=:[: 'nsid'&attrvalue&.> parseongroup

headbodytail=:4 : 0

NB.*headbodytail v789--  splits  a  list  into  head  body and  tail
NB. sublists.
NB.
NB. Partitions a list into head, body and tail sublists where the
NB. head and tail are any outer runs of (x).
NB.
NB. dyad:  blul =. ua headbodytail ul
NB.
NB.   0   headbodytail 0 0 1 6 7 0 0 7 8 9 0 0
NB.   'a' headbodytail 'aaaabigaawesomeaaa'
NB.   99  headbodytail 9 8 6    NB. no outer runs
NB.   '-' headbodytail '-----only one run'
NB.   0   headbodytail i.0      NB. null list

m789=.  x allomask y
ht=. firstone m789
b=.  firstone -. m789

NB. insure result always has three elements
hbt=. I. (+./b) (1)}1 0 1 #^:_1 (0{ht),+./}.ht
((ht +. b) <;.1 y) hbt} 3#a:
)

htmlvarbs=:{ -.&.> (<'{}')"_

htmpids=:3 : 0

NB.*htmpids v789-- extract image id (pids) from html files
NB.
NB. monad:  htmpids clPathfile

s: ('(';').jpg') betweenstrs ; parseonimgsrc read y
)

imagefiles=:] #~ (s: <;._1 ' jpg tif png psd jp2 gif')"_ e.~ [: s: [: tolower [: justext&> ]

importflickrphotos=:3 : 0

NB.*importflickrphotos v789-- writes flickr photos import text file.
NB.
NB. monad:  importflickrphotos uuIgnore

txt=. flickrIdTimesName read FLICKRPHOTOSINFO
txt write FLICKRDRV,FLICKRPATH,IMPORTFLICKRPHOTOS
)

ism=:[: *./ 2: </\ ]

ismordered=:[: *./ 2: </\ ]

isprefixof=:(#@[ {. ]) -: [

lastpage=:[: (page = pages) 250"_ {. ]

lctrim=:] #~ [: -. [: *./\ =

listgalleries=:3 : 0

NB.*listgalleries v789-- list all ThumbsPlus galleries.
NB.
NB. monad:  btNamegid =. listgalleries clDsn
NB.
NB.   listgalleries 'working2005work'

NB. odbc verbs !(*)=. ddcon ddsel ddfet dddis dderr
try.

NB. connect database
assert. 0<ch=. ddcon 'dsn=',y

NB. get gallery names
assert. 0<sh=. 'select name, idgallery from gallery' ddsel ch
assert. -. _1-:data=. ddfet sh,_1

data [ dddis ch

catchd.
  'listgalleries' saveerror 'unable to collect thumbnail gallery list';dderr''
  dddis ch
  throw.
end.
)

listgalleryfiles=:4 : 0

NB.*listgalleryfiles  v789--  list  image  files  in a  ThumbsPlus
NB. gallery.
NB.
NB. This  verb uses ODBC to  extact  the volumes,  paths and file
NB. names  of  pictures  in  a   ThumbsPlus  gallery.  ThumbsPlus
NB. thumbnail data is usually stored in an  ACCESS database  that
NB. has been given a *.td4 file extension.
NB.
NB. dyad: blct =. clDsn listgalleryfiles clGallery
NB.
NB.   dsn listgalleryfiles 'yeah'

NB. ODBC verbs !(*)=. ddcon ddsel ddfet ddfch dddis dderr

try.

NB. connect database
assert. 0<ch=. ddcon 'dsn=',x

NB. get gallery id
assert. 0<sh=. 'select idgallery,name from gallery' ddsel ch
assert. -. _1-:data=. ddfet sh,_1

nogal=. 'no gallery with name ->';y
if. 0 e. $data do.
  nogal [ dddis ch
elseif. (#data) > pos=. (1 {"1 data) i. <y do.

  NB. gallery id
  gid=. ": >(<pos;0){data

  NB. sql that extracts gallery volumes, paths and files
  sql=. 'select d.label, c.name, a.name, a.idthumb from'
  sql=. sql,' thumbnail a, gallerythumb b, path c, volume d where '
  sql=. sql,' (a.idthumb=b.idthumb) and (a.idpath=c.idpath) and'
  sql=. sql,' (d.idvol=c.idvol) and (b.idgallery=',gid,')'

  NB. select and fetch data
  assert. 0<sh=. sql ddsel ch
  assert. -. _1-:data=. ddfch sh,_1
  dddis ch

  NB. volume path file tables with trailing blanks removed
  (rebtbcol&.> 0 1 2 {"1 data) (0 1 2)} data
elseif.do.
  nogal [ dddis ch
end.

catchd.
  'listgalleryfiles' saveerror 'unable to list gallery files';dderr''
  dddis ch
  throw.
end.
)

listlinks=:3 : 0

NB.*listlinks v789-- search my tags and/text and return original link and name.
NB.
NB. monad:  cl =. listlinks clTags
NB.
NB.   listlinks 'helen,yukon'  NB. comma delimited tags
NB. 
NB. dyad:  cl =. clText listlinks clTags
NB.
NB.   'I presume' listlinks '' NB. title and description text

'' listlinks y
:
originalimagelinks parsepids parseonphoto x searchme y
)

listseturls=:3 : 0

NB.*listseturls v789-- returns a cl of original sized image urls.
NB.
NB. Returns a cut-and-paste-able list of set image titles and urls.
NB.
NB. monad:  listseturls clSettext
NB. 
NB.   listseturls 'The way we where' 

if. #sname=. alltrim y do.
  sid=.  sidfrname sname
  pids=. parsepids parseonphoto getphotosinset sid
else.
  pids=. parsepids parseonphoto getnotinset ''
end.

originalimagelinks pids
)

loadxrefFlickrThumbs=:3 : 0

NB.*loadxrefFlickrThumbs  v789--  load flickr set thumbs gallery directory xref.
NB.
NB. monad:  bt =. loadxrefFlickrThumbs uuIgnore

xref=. 'xrefFlickrThumbs',TEMPLOCALE
if. 0 ~: nc <xref do.
  flickrthumbs=. FLICKRDRV,FLICKRPATH,FLICKRTHUMBS
  (xref)=: flickrthumbsxref read flickrthumbs
end.
". xref
)

loadxrefGeotagged=:3 : 0

NB.*loadxrefGeotagged v789-- loads photo id, latitude, longitude.
NB.
NB. monad:  bt =. loadxrefGeotagged uuIgnore

xref=. 'xrefGeotagged',TEMPLOCALE
if. 0 ~: nc <xref do.
  flickrphotosinfo=. FLICKRDRV,FLICKRPATH,FLICKRPHOTOSINFO

  NB. Set Id Name Description
  (xref)=: flickrGeotagged read flickrphotosinfo
end.
". xref
)

loadxrefIdTimesName=:3 : 0

NB.*loadxrefIdTimesName  v789-- load photo  id, times  and name xref
NB. table.
NB.
NB. monad:  bt =. loadxrefIdTimesName uuIgnore

xref=. 'xrefPidTimesName',TEMPLOCALE
if. 0 ~: nc <xref do.
  flickrphotosinfo=. FLICKRDRV,FLICKRPATH,FLICKRPHOTOSINFO

  NB. Set Id Name Description
  (xref)=: flickrIdTimesName read flickrphotosinfo
end.
". xref
)

loadxrefSidNameDesc=:3 : 0

NB.*loadxrefSidNameDesc  v789--  load set id, set name,  description
NB. xref table.
NB.
NB. monad:  bt =. loadxrefSidNameDesc uuIgnore

xref=. 'xrefSidNameDesc',TEMPLOCALE
if. 0 ~: nc <xref do.
  flickrphotos=. FLICKRDRV,FLICKRPATH,FLICKRPHOTOS

  NB. Set Id Name Description
  (xref)=: flickrsetIdNameDesc read flickrphotos
end.
". xref
)

loadxrefTidPid=:3 : 0

NB.*loadxrefTidPid v789-- load Thumbsplus id flickr id cross reference.
NB.
NB. monad:  st =. loadxrefTidPid clDsn
NB.
NB.   'tid pid'=. loadxrefTidPid 'working2005work'  NB. source [] xref
NB.
NB. dyad:  st =. clBrackets loadxrefTidPid clDsn
NB. 
NB.   'tid pid'=. '()' loadxrefTidPid 'offline2005work'  NB. small () xref 

'[]' loadxrefTidPid y
:

NB. pid brackets
's e'=. x

xref=. 'xrefTidPid',TEMPLOCALE
if. 0 ~: nc <xref do.
  
  NB. require 'dd' !(*)=. ddcon ddsel ddfch dddis
  NB. Thumbsplus tid and flickr pid cross reference
  assert. 0<ch=. ddcon 'dsn=',alltrim y
  assert. 0<sh=.'select idthumb, name from thumbnail' ddsel ch
  assert. -. _1 -: dat=. ddfch sh,_1
  dddis ch

  'tid fname'=. dat
  dat=. (fname i."1 s) }."0 1 fname
  dat=. (dat i."1 e) {."0 1 dat
  dat=. }."1 dat
  dat=. s: dat
  (xref)=: (,tid) ; dat
end.
". xref
)

loginflickr=:3 : 0

NB.*loginflickr v789-- login to flickr and return valid API token.
NB.
NB. This verb does not have to be run frequently.  Login with the
NB. the desired permissions and then store the resulting token
NB. in the code of (createflickrAPI): edit (myflickrtoken) assignment.
NB.
NB. monad:  clToken =. loginflickr clPerm
NB.
NB.   NB. example token setting
NB.   fo=: conew 'flickrAPI'
NB.   createflickrAPI__fo fo
NB.
NB.   FLICKRTOKEN__fo=: loginflickr__fo 'read'   NB. read permissions and set token
NB.   FLICKRTOKEN__fo=: loginflickr__fo 'write'  NB. write permissions (includes read)
NB.   FLICKRTOKEN__fo=: loginflickr__fo 'delete' NB. delete permissions (includes read & write)

perm=. alltrim y
assert. (<perm) e. ;:'read write delete'

frob=. getfrob ''
url=. loginpermurl frob;perm

NB. fork an iexplore.exe process and login to flickr
fork IEXPLORECMD,' ',url  NB. require 'task' !(*)=. fork

NB. wait until user logs in -- the frob will
NB. not be valid until the user logs in.
whilst. -. keybresp -: 'flickr' do.
  keybresp=. prompt 'Type "flickr" (without quotes) after logging in to flickr!'
end.

gettoken frob
)

loginpermurl=:3 : 0

NB.*loginpermurl v789-- flickr API login with permissions.
NB.
NB. monad:  loginread clFrob
NB. dyad: (clApikey ; clSecret) loginpermurl (clFrob ; clPerm)
NB.
NB.   NB. permissions: read, write, delete
NB.   turl=. (TESTAPIKEY;TESTSECRET) loginpermurl TESTFROB;'read'
NB.   TESTLOGINURL -: turl

NB. object nouns !(*)=. FLICKRAPIKEY FLICKRSHAREDSECRET 
(FLICKRAPIKEY;FLICKRSHAREDSECRET) loginpermurl y
:
'frob perm'=. y
'apikey secret'=. x
args=. '?api_key=',apikey,'&perms=',perm,'&frob=',frob
('sigargs',TEMPLOCALE)=: sigargs=. secret signarguments args
FLICKRAUTHURL,sigargs
)

showpass soput ".'nl_',SOLOCALE,'_ i.4' [ cocurrent 'base' NB.{*JOD*}
".soclear NB.{*JOD*}
cocurrent SO__JODobj NB.{*JOD*}


loginread=:3 : 0

NB.*loginread v789-- flickr API login with read permissions.
NB.
NB. monad:  loginread clFrob
NB. dyad: (clApikey ; clSecret) loginread clFrob
NB.
NB.   turl=. (TESTAPIKEY;TESTSECRET) loginread TESTFROB
NB.   TESTLOGINURL -: turl

NB. object nouns !(*)=. FLICKRAPIKEY FLICKRSHAREDSECRET
(FLICKRAPIKEY;FLICKRSHAREDSECRET) loginread y
:
'apikey secret'=. x
args=. '?api_key=',apikey,'&perms=read&frob=',y 
sigargs=. secret signarguments2 args
url=. FLICKRAUTHURL,sigargs
)

loginreadurl=:3 : 0

NB.*loginreadurl v789-- flickr API login with read permissions.
NB.
NB. monad:  loginreadurl clFrob
NB.
NB.   url=. loginreadurl frob=. getfrob ''
NB.
NB. dyad: (clApikey ; clSecret) loginreadurl clFrob
NB.
NB.   turl=. (TESTAPIKEY;TESTSECRET) loginreadurl TESTFROB
NB.   TESTLOGINURL -: turl

NB. object nouns !(*)=. FLICKRAPIKEY FLICKRSHAREDSECRET 
(FLICKRAPIKEY;FLICKRSHAREDSECRET) loginreadurl y
:
'apikey secret'=. x
args=. '?api_key=',apikey,'&perms=read&frob=',y
('sigargs',TEMPLOCALE)=: sigargs=. secret signarguments args
FLICKRAUTHURL,sigargs
)

makephotolinks=:3 : 0

NB.*makephotolinks  v789--  generates direct  html  links  to flickr
NB. photos.
NB.
NB. Generates  a table of titles and direct photo urls. This verb
NB. should be run  before fetching binary image data  because the
NB. image urls can change on flickr.
NB.
NB. monad:  btNlnk =. makephotolinks blclPids
NB.
NB.   NB. links for flickr set from live set id and token
NB.   makephotolinks parsepids@:parseonphoto '61870' getphotosinset tok
NB.
NB. dyad:  btNlnk =. clSize makephotolinks blclPids
NB.
NB.   NB. links from matched set name in photo xml files (not live)
NB.   'Large' makephotolinks setpidsfromxml 'Been there done that'

'Medium' makephotolinks y  NB. default size
:

NB. one and only size must match
assert. 1 = +/+./"1 (,:x) E. >FLICKRSIZES

flickrphotos=. FLICKRDRV,FLICKRPATH,FLICKRPHOTOS
photos=. parseonphoto read flickrphotos
pids=. parsepids photos

NB. all requested pids must exist
assert. *./ y e. pids

lids=. ~. y
titles=. (pids i. lids) { parsetitles photos

NB. use any extant authorization token - without it you
NB. cannot fetch sizes and direct urls of private photos !(*)=. FLICKRTOKEN
if. 0 = nc <'FLICKRTOKEN' do. pids=. lids ,&.> <'&auth_token=',FLICKRTOKEN end.
sizes=. getphotosizes&.> pids
urls=. x sourceurlfromsize 'sizes' geteleattrtext ; sizes

NB. result table of titles, pids and urls
titles ,. lids ,.  urls
)

makephotorowhtml=:4 : 0

NB.*makephotorowhtml v789-- generate html for each  row in  document
NB. table.
NB.
NB. dyad:  clHtml =. (clDirectory ; clDsn) makephotorowhtml blclPids

NB. get image dimensions for images in given directory

'imdir dsn'=. x

if. #rdat=. (imdir;dsn) getrowhtmldata y do.

  NB. split row template - extract row variables
  'idx rhtml'=. HTMLVARBPATTERN patpartstr FLICKRHTMLROW
  rvarbs=. idx htmlvarbs rhtml

  NB. all row varibles must exist in data header
  assert. *./ rvarbs e. hdr=. 0{rdat

  rdat=. }. rdat
  rows=. (#rdat) # ,: rhtml

  NB. insert data
  rows=. ((hdr i. <'flickrpid'){"1 rdat) (<a:;(rvarbs i. <'flickrpid'){idx)} rows
  rows=. ((hdr i. <'imagefile'){"1 rdat) (<a:;(rvarbs i. <'imagefile'){idx)} rows
  rows=. ((hdr i. <'imageheight'){"1 rdat) (<a:;(rvarbs i. <'imageheight'){idx)} rows
  rows=. ((hdr i. <'imagewidth'){"1 rdat) (<a:;(rvarbs i. <'imagewidth'){idx)} rows
  rows=. ((hdr i. <'imagetitle'){"1 rdat) (<a:;(rvarbs i. <'imagetitle'){idx)} rows
  rows=. ((hdr i. <'setorder'){"1 rdat) (<a:;(rvarbs i. <'setorder'){idx)} rows
  rows=. ((hdr i. <'takendate'){"1 rdat) (<a:;(rvarbs i. <'takendate'){idx)} rows
  rows=. ((hdr i. <'geolatitude'){"1 rdat) (<a:;(rvarbs i. <'geolatitude'){idx)} rows
  rows=. ((hdr i. <'geolongitude'){"1 rdat) (<a:;(rvarbs i. <'geolongitude'){idx)} rows

  NB. return row html
  ; rows

else.
  NB. no row data
 ''
end.
)

makeplacemarkkml=:3 : 0

NB.*makeplacemarkkml v789-- generate kml for each geotagged placemark.
NB. table.
NB.
NB. monad:  clHtml =. makeplacemarkkml blclPids


if. #rdat=. getgeotaggedkmldata y do.

  NB. split row template - extract row variables
  'idx pkml'=. HTMLVARBPATTERN patpartstr KMLPLACEMARK
  rvarbs=. idx htmlvarbs pkml

  NB. all row varibles must exist in data header
  assert. *./ rvarbs e. hdr=. 0{rdat

  rdat=. }. rdat
  rows=. (#y) # ,: pkml

  NB. insert data
  rows=. ((hdr i. <'phototitle'){"1 rdat) (<a:;(rvarbs i. <'phototitle'){idx)} rows
  rows=. ((hdr i. <'myflickrnamea'){"1 rdat) (<a:;(rvarbs i. <'myflickrnamea'){idx)} rows
  rows=. ((hdr i. <'mediumphotourl'){"1 rdat) (<a:;(rvarbs i. <'mediumphotourl'){idx)} rows
  rows=. ((hdr i. <'myflickrnameb'){"1 rdat) (<a:;(rvarbs i. <'myflickrnameb'){idx)} rows
  rows=. ((hdr i. <'pida'){"1 rdat) (<a:;(rvarbs i. <'pida'){idx)} rows
  rows=. ((hdr i. <'pidb'){"1 rdat) (<a:;(rvarbs i. <'pidb'){idx)} rows
  rows=. ((hdr i. <'longitude'){"1 rdat) (<a:;(rvarbs i. <'longitude'){idx)} rows
  rows=. ((hdr i. <'latitude'){"1 rdat) (<a:;(rvarbs i. <'latitude'){idx)} rows
  rows=. ((hdr i. <'range'){"1 rdat) (<a:;(rvarbs i. <'range'){idx)} rows
  rows=. ((hdr i. <'tilt'){"1 rdat) (<a:;(rvarbs i. <'tilt'){idx)} rows
  rows=. ((hdr i. <'heading'){"1 rdat) (<a:;(rvarbs i. <'heading'){idx)} rows
  rows=. ((hdr i. <'squarephotourl'){"1 rdat) (<a:;(rvarbs i. <'squarephotourl'){idx)} rows
  rows=. ((hdr i. <'viewpoint'){"1 rdat) (<a:;(rvarbs i. <'viewpoint'){idx)} rows

  NB. return row html
  ; rows

else.
  NB. no geotagged placemark data
 ''
end.
)

makesetgallery=:3 : 0

NB.*makesetgallery v789-- creates or resets a flickr set gallery.
NB.
NB. This verb creates or  resets  a Thumbsplus flickr set gallery
NB. using small cross reference image directories.
NB.
NB. monad:  blMsg =. makesetgallery (clGallery ; clSmallimdir)
NB.
NB.   makesetgallery 'Flickr Sets\Zambian Eclipse Trip';sdZAMBIA
NB.
NB. dyad:  blMsg =. clDsn makesetgallery (clGallery ; clSmallimdir)

FLICKRDSN makesetgallery y
:

NB. load 'gallery' !(*)=. listgalleries creategallery resetgallery
gallist=. listgalleries x
'name imdir'=. y

NB. if gallery doesn't exist create
if. -. (<name) e. {."1 gallist do.
  showpass (x creategallery name),<'gallery created'
end.

NB. cross reference of thumbplus and flickr ids
'tid pid'=. loadxrefTidPid x

gpids=. s: smallpids imdir
mask=. gpids e. pid
if. 0 e. mask do. 
  showpass (": +/0=mask);'small images cannot be cross referenced' 
  showpass 'missing pids->'; (-.mask)#gpids
end.

NB. insert images in gallery
if. #gpids=. mask#gpids do.
  x resetgallery name;(pid i. gpids){tid
else.
  x resetgallery name;i.0
end.
)

makesethtml=:4 : 0

NB.*makesethtml v789-- generate a simple html set contents report.
NB.
NB. This verb  depends on  the presence  of a Thumbsplus database
NB. that has been set up as an ODBC datasource.
NB.
NB. dyad:  clFilehtm =. clDirectory makesethtml (clSid ; clToken)
NB.
NB.   imdir=. 'd:\pictures\online\flickr\flickrsets\been there done that\'
NB.   imdir makesethtml (sidfrname 'Been');tok

assert. direxist showpass x
'sid tok'=. y

NB. extract header placeholders
'idx hhtml'=. HTMLVARBPATTERN patpartstr FLICKRHTMLHEAD
hvarbs=. idx htmlvarbs hhtml

if. #sid do.
  NB. load set xref table from xml
  xrefSidNameDesc=. loadxrefSidNameDesc''

  NB. set must exist in table
  assert. (#xrefSidNameDesc)>spos=. (0 {"1 xrefSidNameDesc) i. <sid

  NB. insert data
  hhtml=. ((<spos;1){xrefSidNameDesc) ((hvarbs i. <'settitle'){idx)} hhtml
  hhtml=. (<sid) ((hvarbs i. <'flickrsid'){idx)} hhtml
  hhtml=. ((<spos;2){xrefSidNameDesc) ((hvarbs i. <'setdescription'){idx)} hhtml
 
  NB. get current photo ids of set images
  showpass 'getting set photos ...'
  setpids=. parsepids parseonphoto getphotosinset sid
else.

  NB. insert data for photos that are not in any sets
  hhtml=. (<'NOT IN SETS') ((hvarbs i. <'settitle'){idx)} hhtml
  hhtml=. (<'') ((hvarbs i. <'flickrsid'){idx)} hhtml
  hhtml=. (<'Images that are not in any flickr sets.') ((hvarbs i. <'setdescription'){idx)} hhtml
  showpass 'getting photos that are not in any sets ...'
  setpids=. parsepids parseonphoto getnotinset tok
end. 

hhtml=. (<tstamp '') ((hvarbs i. <'htmltimestamp'){idx)} hhtml
hhtml=. (<":#setpids) ((hvarbs i. <'imagecount'){idx)} hhtml

NB. generate rows
rhtml=. (x;FLICKRDSN) makephotorowhtml setpids

NB. write set html to file - embed sid in file name
hhtml=. (;hhtml),rhtml,FLICKRHTMLTAIL
resfile=. (tslash x),'flickrset_',sid,'.htm'
(toHOST hhtml) write resfile
resfile
)

nearestnew=:3 : 0

NB.*nearestnew v789-- computes nearest unseen neighbor.
NB.
NB. monad:  ilOrder =. nearestnew btclPidLatLong

if. (#y) e. 0 1 do. i.#y return.end.
lb=. |: ".&>   1 2 {"1 y
ci=. /:"1 (|: lb) earthdist"1 2 lb
seen=.current=. 0
all=. i. #ci
whilst. #all-.seen do.
  current=. 0{(current{ci)-.seen
  seen=. seen,current
end.
seen
)

nonrevcontacts=:(0 { ]) ,: ([: < [: -. 1 {"1 [: > 0 { 1 { ]) #&.> 1 { ]

nonuniquenames=:[: ; ' '"_ ,&.> 5: s: ] #~ [: -. ~:

notxrefed=:4 : 0

NB.*notxrefed v789-- bt of (x) pids that are not xrefed in dsn (y).
NB.
NB. dyad:  bt =. blclPids notxrefed clDsn

NB. get currently cross referenced
'tids pids'=. loadxrefTidPid y

NB. not xref'ed
xref=. loadxrefIdTimesName''
missing=. x #~ -. (s: x) e. pids

NB. thumbsplus database must be up to date
assert. *./ missing e. 0 {"1 xref

NB. show missing
xref {~ (0 {"1 xref) i. missing
)

nowunixsecs=:3 : 0

NB.*nowunixsec v789-- estimate of current unix second timestamp.
NB.
NB. monad:  nowunixsecs uuIgnore

unixsecsfrts 6!:0 ''
)

nsidcontactlist=:3 : 0

NB.*nsidcontactlist v-- returns a user's public list of contacts.
NB.
NB. monad:  clXml =. nsidcontactlist clNsid

NB. objects nouns !(*)=. FLICKRAPIKEY
args=. '?method=flickr.contacts.getPublicList&api_key=',FLICKRAPIKEY,'&per_page=1000&user_id=',y
doresturl args
)

nullsqimages=:3 : 0

NB.*nullsqimages  v789--  rename  image  file  names  with  null  []
NB. brackets to unbracketed.
NB.
NB. monad:  blclFiles =. nullsqimages clDirectory
NB.
NB.   nullsqimages 'd:\pictures\20THCENTURY\Edmonton\Enewetak Trips'
NB.
NB. dyad: blclFiles =. clPair nullsqimages clDirectory

'[]' nullsqimages y
:

if. -. direxist y do. 'missing directory: ',y return.end.

dirp=. tslash y
files=. filelist dirp,'*.*'
msg=. 'no file(s) renamed'

if. #files=. imagefiles files do.

  NB. files containing null bracket pattern
  nullpat=. (alltrim x),'.'
  mask=. +./@:(nullpat&E.)&> files
  if. #files=. mask#files do.
    new=. rebc@alltrim&.> (files <./@i.&.> <'[]') {.&.> files
    new=. new ,&.> '.' ,&.> justext&.> files
    rencmds=. ;"1 (dblquote files) ,. ' ' ,&.> dblquote new
    rencmds=. 'rename ' ,"1 rencmds
    dirp docmds rencmds
    msg=. (":#rencmds),' null bracket file(s) unbracketed'
  end.
end.

msg
)

okxml=:1"_ e. '<rsp stat="ok">'"_ E. ]

orderbytouching=:4 : 0

NB.*orderbytouching  v789-- resets file timestamps to encode  flickr
NB. set order in time order.
NB.
NB. The process  of  resetting timestamps  to encode  flickr  set
NB. order has been a source of a lot of errors in this system. At
NB. first I tried  to  minimize the number  of file touches. That
NB. proved  unreliable. This algorithm  takes current  timestamps
NB. and:
NB.
NB. verbatim:
NB.
NB.   attempt to insert new times and if a strictly
NB.       increasing order is achieved change only new times
NB.
NB.   otherwise reset all times to strictly increasing leaving 
NB.       gaps for future insertions
NB.
NB. dyad:  blclTouched =. (clPath;< blclBeginEnd) orderbytouching (blclSetpids;<blclNewpids)

'path be'=. x
'setpids newpids'=. ~.&.> y

NB. read files
'files2 times'=. <"1 |: 0 1 {"1 (1!:0) (tslash path),'*.jpg'

if. #files2 do.
  fpids2=. be betweenstrs ; files2
  assert. 1 <: #fpids2              NB. set cannot be empty
  assert. -. _1 e. _1 ".&> fpids2   NB. ids are numeric
  assert. setpids e. fpids2         NB. entire set must be present
  assert. newpids e. setpids        NB. new must be a subset

  NB. remove any files that are not in current flickr set
  if. 0 e. mask=. fpids2 e. setpids do.
    showpass 'following file(s) are not in current flickr set ...'
    showpass >(-.mask)#files2
  end.

  if. -. +./mask do. '' return. end. NB. nothing left
  files2=. mask#files2
  times=.  mask#times
  fpids2=. mask#fpids2

  setorder=. fpids2 i. setpids
  assert. setpids -: setorder{fpids2
  times=. setorder{times
  files2=. setorder{files2

  NB. This verb is still producing incorrect orders - hence
  NB. if no flickrset_*.htm file is in the target directory 
  NB. reset all the timestamps - Sep 17, 2006
  if. 0=(1!:0) (tslash path),'flickrset_*.htm' do.
    smoutput 'no flickrset_*.htm file - resetting all timestamps'
    touched=.  files2
    maxtime=.  nowunixsecs 0
    sectimes=. (#times)#maxtime
    goto_resetfiletimes.
  end.

  NB. in rare cases the unix time stamps can become negative
  NB. this indicates timestamp order problems - reset all times
  try.
    sectimes=.unixsecsfrts >times
  catchd.
    touched=.  files2
    maxtime=.  nowunixsecs 0
    sectimes=. (#times)#maxtime
    goto_resetfiletimes.
  end.

  if. mask=. 0 (setpids i. newpids)} (#setpids)#1
      newtimes=. mask*sectimes
      lasttime=. (|INTERVALTIME) + >./newtimes
      lasttime=. (_1{mask){(lasttime >. nowunixsecs 0),_1{newtimes
      newtimes=. <. fill lasttime _1} newtimes
      (ismordered mask#sectimes) *. ismordered newtimes do.
    touched=. (-.mask)#files2
    sectimes=. (-.mask)#newtimes
  else.
    touched=. files2
  end.

  maxtime=. <: >./sectimes

label_resetfiletimes.
  NB. run timestamps back from last INTERVALTIME seconds per image
  newtimes=. (maxtime + +/\.(<:#sectimes)#INTERVALTIME),maxtime
  path resetfiletimes touched ,. <"1 tsfrunixsecs newtimes
  touched
else.
  ''
end.
)

originalimagelinks=:3 : 0

NB.*originalimagelinks  v789--  returns  url and  name  of  original
NB. uploaded image.
NB.
NB. monad:  cl =. originalimagelinks clPids

'set' originalimagelinks y
:
if. #y do.
  links=. 'Original' makephotolinks y
  cnt=. LF,(":#links),' image(s) ',x,LF
  cnt,ctl ;"1 (<' ;') ,&.> ~ (<a:;2 0){ links
else.
  ''
end.
)

page=:[: ". [: '"'&beforestr 'page="'&afterstr

pages=:[: ". [: '"'&beforestr 'pages="'&afterstr

pairbracdir=:4 : 0

NB.*pairbracdir v789-- matches flickr file names with  display image
NB. file names.
NB.
NB. This verb attempts to pair thumbsplus display images that are
NB. in the  (y) directory  with flickr set small cross reference
NB. images for the set  with string (x)  in its name. If matches
NB. are found  the display  image is renamed with the flickr  pid
NB. number  embedded  in [] brackets. Nomatching  files  are  not
NB. changed and will have to be manually cross referenced.
NB.
NB. dyad:  clSetpattern pairbracdir clDirectory
NB.
NB.   'Enewetak' pairbracdir 'c:\pictures\20THCENTURY\Edmonton\Enewetak Trips'
NB.
NB.   NB. null (x) denotes not in sets
NB.   '' pairbracdir 'c:\pictures\20THCENTURY\Montana'  

if. -. direxist y do. 'missing directory: ',y return.end.

NB. flickr set id - will assert if non-unique
if. #sid=. alltrim x do. sid=. <sidfrname sid else. sid=. a: end.

NB. get small image directory
ftx=. loadxrefFlickrThumbs 0
assert. sid e. 0{ftx
smalldir=. ; ((0{ftx) i. sid) { 3{ftx
smalldir=. FLICKRDRV,'\',tslash smalldir

NB. standard image names from small directory without () brackets
smfiles=. filelist smalldir,'\*.jpg'
smfiles=. smfiles #~ (<'()') *./@e.&> smfiles
if. 0=#smfiles do. 'no () file(s) - nothing renamed' return.end.
smnames=. s: rebc@alltrim&.> (smfiles <./@i.&.> <'()') {.&.> smfiles
NB. must be unique
if. 0 e. ~: smnames do. 
  showpass 'nonunique small names: ',nonuniquenames smnames
  showpass 'small directory: ',smalldir
  assert. 0 
end.

NB. standard names from display directory
dspfiles=. unsqimages y
if. 0=#dspfiles do. 'no unsquared image file(s) - nothing renamed' return.end.
dspnames=. justfile&.> dspfiles
dspnames=. s: rebc@alltrim&.> dspnames
NB. must be unique
if. 0 e. ~: dspnames do. 
  showpass 'nonunique display file names: ',nonuniquenames dspnames
  showpass 'display directory: ',y
  assert. 0 
end.

NB. matching names
if. +./ mask=. dspnames e. smnames do.
   dspnames=. mask#dspnames
   pids=. ,'()'&betweenstrs&> (smnames i. dspnames){smfiles
   pids=. (<' [') ,&.> pids ,&.> <'].'
   old=. mask#dspfiles
   exts=. justext&.> old
   new=. (5 s: dspnames) ,&.> pids ,&.> exts
   rencmds=. ;"1 (dblquote old) ,. ' ' ,&.> dblquote new
   rencmds=. 'rename ' ,"1 rencmds
   showpass 'renaming in: ',y
   y docmds rencmds
   (":#rencmds),' file(s) [] renamed'
else.
  'no matching names - nothing renamed'
end.
)

parselastupdate=:[: 'lastupdate'&attrvalue&.> ]

parseoncontact=:('<contact '"_ E. ]) <;.1 ]

parseondates=:('<dates '"_ E. ]) <;.1 ]

parseongroup=:('<group '"_ E. ]) <;.1 ]

parseonimgsrc=:('<IMG SRC='"_ E. ]) <;.1 ]

parseonperson=:('<person '"_ E. ]) <;.1 ]

parseonphoto=:('<photo '"_ E. ]) <;.1 ]

parseonphotoset=:('<photoset '"_ E. ]) <;.1 ]

parseonsize=:('<size '"_ E. ]) <;.1 ]

parseontag=:('<tag '"_ E. ]) <;.1 ]

parsephotoset=:([: 'id'&attrvalue&.> ]) ,. ([: 'photos'&attrvalue&.> ]) ,. [: 'title'&firsteletext&.> ]

parsepids=:[: 'id'&attrvalue&.> ]

parseposted=:[: 'posted'&attrvalue&.> ]

parsesids=:[: 'id'&attrvalue&.> ('<photoset '"_ E. ]) <;.1 ]

parsetaken=:[: 'taken'&attrvalue&.> ]

parsetakengranularity=:[: 'takengranularity'&attrvalue&.> ]

parsetitles=:[: 'title'&attrvalue&.> ]

parseviews=:[: 'views'&attrvalue&.> ]

patpartidx=:4 : 0

NB.*patpartidx v789-- index of pattern match sublists.
NB.
NB. dyad:  il =. clPattern patpartidx blcl

NB. require 'regex' !(*)=. rxmatch
mask=. 0 = 0 {"1 ,"2  (<x) rxmatch&> y
mask#i. #y
)

photopids=:[: 'id'&attrvalue&.> parseonphoto

pidsfrname=:3 : 0

NB.*pidsfrname v789-- image id (pids) for images with (y789) in name. 
NB.
NB. monad:  btcl =. pidsfrname clStr
NB.
NB.   pidsfrname 'cyrus'

xref=. loadxrefIdTimesName 0
names=. tolower >5{"1 xref

NB. return pids and matching names
0 5{"1 xref #~ (,:tolower y) +./"1@E. names
)

pidsfromgeokml=:3 : 0

NB.*pidsfromgeokml v789-- extracts flickr pids from geotagged kml.
NB.
NB. monad:  blclPids =. pidsfromgeokml clKml
NB.
NB.   pidsfromgeokml read 'c:\pd\coords\geotagged flickr images.kml'

pids=. 'Placemark' geteletext y
pids=. '<a href=''http'&afterstr&.> pids
pids=. '/jdb99/'&afterstr&.> '''>'&beforestr&.> pids 
pids -.&.> '/'
)

pidsindb=:3 : 0

NB.*pidsindb v789-- list of flickr pids that are in thumbplus database.
NB.
NB. monad:  pidsindb clDsn
NB.
NB.   pidsindb FLICKRDSN
NB. 
NB. dyad:   clBe pidsindb clDsn
NB.
NB.   NB. display images
NB.   SHOW pidsindb 'primary2005'
NB.
NB.   NB. source images (scans or digital)
NB.   SOURCE pidsindb 'offline2005'

NB. small xref images by default
SMALL pidsindb y
:
NB. the small image case is special - images are
NB. contrained to directories with flickrsets in the path
if. x -: SMALL do.
  sql=. FLICKRIMAGESQL
else.
  sql=. 'select name from thumbnail'
end.

NB. connect database and fetch image names
NB. require 'dd' !(*)=. ddcon ddsel ddfch dddis
assert. 0<ch=. ddcon 'dsn=',alltrim y
assert. 0<sh=. sql ddsel ch
assert. -. _1 -: dat=. ddfch sh,_1
dddis ch

NB. extract unique embedded (pid) numbers in file names
~. x betweenstrs ,0 pick dat
)

pidsnotindb=:3 : 0

NB.*pidsnotindb v789-- bt of flickr images that are not in database.
NB.
NB. monad:  bt =. pidsnotindb clDsn
NB.
NB.   pidsnotindb FLICKRDSN
NB.
NB. dyad:  bt =. (clBegin ; clEnd) pidsnotindb clDsn
NB. 
NB.   NB. flickr images that are not xref'ed with original
NB.   NB. unprocessed scan and digital camera files
NB.   SOURCE pidsnotindb 'primary2005'

SMALL pidsnotindb y
:

NB. only valid pid embed patterns
assert. (<x) e. SMALL;SHOW;<SOURCE

dbpids=. x pidsindb y

NB. find any missing (pids)
xref=. loadxrefIdTimesName''
pids=.  0 {"1 xref
if. #missing=. pids -. dbpids do.
  (pids i. missing) { xref 
else.
  (0,{:$xref)$''
end.
)

pidsnotxrefed=:3 : 0

NB.*pidsnotxrefed v789-- bt of images that are not Thumbsplus/flickr
NB. cross referenced.
NB.
NB. I  cross  reference images  between  Thumbsplus and flickr by
NB. embedding the flickr photo id  number (pid) in the image file
NB. names. (downloadsetdiff)  downloads small  flickr images into
NB. target  directories.  These  images  contain the  flickr  pid
NB. embedded  between  ()  parentheses.  I  will  manually  cross
NB. reference these  small images with  Thumbsplus display images
NB. by  locating the  source image  and  embedding  the  same pid
NB. number  in []  brackets.  Source images, (original  scans  or
NB. digitals), will indicated with curly {} brackets.
NB.
NB. verbatim:
NB.
NB.   five hyperbolic palms (53181913).jpg   NB. small flickr image with pid
NB.   palms [53181913].tif                   NB. display image (note different name)
NB.   PICT7723 {53181913}.jpg                NB. original digital camera jpeg/raw
NB.
NB.
NB. monad:  bt =. pidsnotxrefed clDsn
NB.
NB.   pidsnotxrefed FLICKRDSN
NB.
NB. dyad:   bt =. clSettext pidsnotxrefed clDsn
NB.
NB.   NB. the dyad returns a bt of specific set images that are not xref'ed
NB.   'Zambia' pidsnotxrefed 'offline2005work'
NB.   '' pidsnotxrefed 'offline2005work'

NB. get all current pids
curpids=. ~. parsepids parseonphoto read FLICKRDRV,FLICKRPATH,FLICKRPHOTOS
curpids notxrefed y
:
NB. pids in flickr sets - and not in sets
if. #pat=. alltrim x do. sid=.sidfrname pat else. sid=.'' end.
(~.getsetphotos sid) notxrefed y
)

posturl=:3 : 0

NB.*posturl v789-- post to url and return response as text.
NB.
NB. monad:  posturl clPost
NB.
NB.   posturl POSTDATA

NB. coninsert 'jsocket' to make following verbs visible
NB. (*)=. sdcheck sdclose sdconnect sdgethostbyname sdsend sdsocket split

NB. get numeric host NIMP hardwired for now
host=. sdcheck sdgethostbyname 'www.flickr.com'
('sk',TEMPLOCALE)=:sk=. 0 pick sdcheck sdsocket ''
sdcheck sdconnect sk;host,<80
sdcheck (y,CR,LF) sdsend sk,0
NB. read socket fully
text=. sk read1^:_ ''
sdclose sk
text
)

prompt=:[: (1!:1) 1"_ [ ] (1!:2) 2:

read0=:[: ; [: sdcheck [: sdrecv ] , 32000 0"_

read1=:] , [: read0 [

regapfiletimes=:3 : 0

NB.*regapfiletimes  v789-- resets  file times  for matching files in
NB. one directory.
NB.
NB. This  verb resets file modification times by  executing shell
NB. commands. I use  file times to preserve  flickr  set order in
NB. Thumbsplus. The download gets images so quickly that there is
NB. not enough  "time" between images to  insert new images later
NB. on and preserve set order. This verb opens larger time gaps.
NB.
NB. Result is  1 if all  file  times  are  reset properly  and  0
NB. otherwise.
NB.
NB. monad:  pa =. regapfiletimes clDirpattern
NB.
NB.   regapfiletimes 'd:\pictures\2001\test set\*.jpg'
NB.
NB. dyad:  pa =. iaGap regapfiletimes clDirpattern
NB.
NB.   NB. open up approximately 1 day between file times
NB.   86400 regapfiletimes 'd:\pictures\2001\test set\*.jpg'

180 regapfiletimes y  NB. 3 minutes between files
:
if. #files=.  1!:0 <y do.

  files=. (/: 1 {"1 files){files
  secs=.  unixsecsfrts > 1 {"1 files

  NB. open (x) second gaps - going back in time
  secs=. secs - +/\. 0 ,~ (<:#secs)#x
  times=. tsfrunixsecs secs

  (justdrvpath y) resetfiletimes files ,. <"1 times
else.
  1  
end.
)

showpass soput ".'nl_',SOLOCALE,'_ i.4' [ cocurrent 'base' NB.{*JOD*}
".soclear NB.{*JOD*}
cocurrent SO__JODobj NB.{*JOD*}


remonotone=:4 : 0

NB.*remonotone v789-- restore  strictly  increasing  monotone  after
NB. insertions at 0s.
NB.
NB. This ugly verb  provides a solution to a nasty little problem
NB. that came up when coding  (downloadsetdiff). I use file times
NB. to  maintain flickr set order  in Thumbsplus.  When I add new
NB. images to a set  (downloadsetdiff)  must insert  them between
NB. existing  times  and  maintain a strictly increasing list  of
NB. times  to  maintain set order.  You  cannot  always  make  an
NB. insertion  without  changing  old  times but  you can  always
NB. modify  times  to  preserve  order.  This  verb  attempts  to
NB. minimize the number of  old file times that will  have to  be
NB. changed. When the time gap is large relative to the number of
NB. insertions this  verb produces  good  results. When  the  gap
NB. shrinks it can change a lot of existing times.
NB.
NB. dyad:  ilMonotone =. iGap remonotone il
NB.
NB.    ism=: [: *./ 2: </\ ]  NB. is strictly increasing
NB.    ism 3 remonotone i.0
NB.    ism 5 remonotone 8
NB.    ism 5 remonotone 0 7
NB.    ism 3 remonotone 0 0 0 0
NB.    ism 3 remonotone 0 0 0 2 0 0
NB.    ism 2 remonotone 0 0 1 0 2 3 4 5 0 6 7 8 0 9 10
NB.
NB.    NB. worst case - minimum gaps
NB.    x0=. 1 2 0 0 3 4 5 6 0 7 8 9 10 0 0
NB.    ism y0=. 2 remonotone x0
NB.
NB.    NB. best case - wide gaps
NB.    x1=. 8 12 0 55 66 0 87 112 152 166 0 191 0 219 229 266 0 300 0 342 353
NB.    ism y1=. 5 remonotone x1
NB.
NB.    (0~:x1)#x1=y1  NB. 1's are unchanged old times

NB. gap must be at least 2
assert. 2 <: x

NB. sequence must have at least two elements with 0 insertions
if. (1 >: #y) +. -. 0 e. y do. y return.end.

NB. sequence without insertions is strict monotone
assert. *./ 2 </\ y -. 0

NB. split off any leading or trailing 0 runs
NB. this significantly reduces the number of
NB. items that need to be adjusted
'head s tail'=. 0 headbodytail y

if. (1<#s) *. 0 e. s do.
  NB. pad body start and end for shifts
  b=. 0=s
  t=. (2*+/b) >. 2*x
  h=. (<./s) - t
  t=. (>./s) + t
  s=. h,s,t

  NB. upper and lower insert region bounds
  b=. 0=s
  u789=. (I. _1|. lastone b) { s
  l=. (I. 1|. firstone b) { s

  NB. insertion increment
  n789=. onelength b
  g=. n789 ,: (1: >. <.) (u789 - l) % n789 >. 2

  NB. increment within gaps
  t=. <"0 l,g
  n789=. ; (0{t) +&.> +/\&.> (1 { t) #&.> 2 { t
  s=. }: }. n789 (I. b)} s

  while. 0 e. 2 </\ s do.

    NB. last positions where strict monotone breaks
    p=. s i: ~. s #~ 0,2 >:/\ s
    p=. 1 p} (#s)$0

    NB. add in to fix breaks
    s=. s + +/\p
  end.
end.

NB. restore adjusted head and tail - keeping zeroes out
if. #head do. head=. ({.s) - |. +/\(#head)#x + 0=({.s)-x end.
if. #tail do. tail=. ({:s) + +/\(#tail)#x + 0=({:s)-x end.
head,s,tail
)

remonotone2=:4 : 0

NB.*remonotone2 v789-- converts  integer lists  with 0s to  strictly
NB. increasing sequences.
NB.
NB. Recursive version of (remonotone) that changes fewer  nonzero
NB. initial list  elements.  This  verb  works by  expanding gaps
NB. where the monotone sequence breaks and recalling.
NB.
NB. dyad:  ilMonotone =. iGap remonotone2 il
NB.
NB.    ism=: [: *./ 2: </\ ]  NB. is strictly increasing
NB.    ism 3 remonotone2 i.0
NB.    ism 5 remonotone2 8
NB.    ism 5 remonotone2 0 7
NB.    ism 3 remonotone2 0 0 0 0
NB.    ism 3 remonotone2 0 0 0 2 0 0
NB.    ism 2 remonotone2 0 0 1 0 2 3 4 5 0 6 7 8 0 9 10
NB.    ism 180 remonotone2 1 0 3 0 5 0 7 0 9
NB.
NB.    NB. bad initial sequences will be made monotone
NB.    ism 2 remonotone2 5 6 0 0 3 4 0 12
NB.    ism 3 remonotone2 ((?5)#14?14){0 0,i.12
NB.
NB.    NB. worst case - minimum gaps
NB.    x0=. 1 2 0 0 3 4 5 6 0 7 8 9 10 0 0
NB.    ism y0=. 2 remonotone2 x0
NB.
NB.    NB. best case - wide gaps
NB.    x1=. 8 12 0 55 66 0 87 112 152 166 0 191 0 219 229 266 0 300 0 342 353
NB.    ism y1=. 5 remonotone2 x1
NB.
NB.    (0~:x1)#x1=y1  NB. 1's are unchanged old times
NB.
NB.    NB. 0 free not strictly increasing - assertion failure
NB.    5 remonotone2 8 9 2 3

NB. sequence must have at least two elements with 0 insertions
if. 1 >: #y       do. y return.
elseif. -. 0 e. y do.
  NB. insure sequences without 0s are strictly increasing
  assert. *./ 2 </\ y  
  y return.
end.

NB. split off any leading or trailing 0 runs
NB. this significantly reduces the number of
NB. items that need to be adjusted
'head s tail'=. 0 headbodytail y

if. (1<#s) *. 0 e. s do.

  NB. lower and upper gap indexes
  p=.  gapulb s

  NB. find gaps that can be filled without change and fill
  f=.  (-/p{s) % -/p
  m789=.  1 <: f
  fp=. m789 #"1 p
  if. 1 e. m789 do.
    fnc=. <"0 <. m789#f  NB. fill no change
    gw=. <: -/ fp     NB. gap width
    sg=. {:fp         NB. gap starts
    fnc=. ;(sg{s) +&.> gw +/\@#&.> fnc
    inc=. ;sg +&.> >:@i.&.> gw
    s=. fnc inc} s
  end.

  NB. any remaining gaps require changes to bordering elements
  NB. expand gaps at monotone breaks and recurse
  if. 0 e. m789 do. s=. x remonotone2 s * (0~:s) *. 1 ,~ 2 </\ s end.
end.

NB. restore adjusted head and tail - keeping zeroes out
if. #head do. head=. ({.s) - +/\.(#head)#x + 0=({.s)-x end.
if. #tail do. tail=. ({:s) + +/\(#tail)#x + 0=({:s)-x end.
head,s,tail
)

remonotone3=:4 : 0

NB.*remonotone3 v789-- converts  integer lists  with 0s to  strictly
NB. monotone increasing integer sequences.
NB.
NB. Version of remonotone using (fill).
NB.
NB. verbatim:  (see J Wiki at url)
NB.
NB.   http://202.67.223.49/jwiki/Puzzles/Fill_Zero_Gaps
NB.
NB. dyad:  ilMonotone =. iGap remonotone3 il
NB.
NB.    ism=: [: *./ 2: </\ ]  NB. is strictly increasing
NB.    ism 3 remonotone3 i.0
NB.    ism 5 remonotone3 8
NB.    ism 5 remonotone3 0 7
NB.    ism 3 remonotone3 0 0 0 0
NB.    ism 3 remonotone3 0 0 0 2 0 0
NB.    ism 2 remonotone3 0 0 1 0 2 3 4 5 0 6 7 8 0 9 10
NB.    ism 180 remonotone3 1 0 3 0 5 0 7 0 9
NB.
NB.    NB. bad initial sequences will be made monotone
NB.    ism 2 remonotone3 5 6 0 0 3 4 0 12
NB.    ism 3 remonotone3 ((?5)#14?14){0 0,i.12
NB.
NB.    NB. worst case - minimum gaps
NB.    x0=. 1 2 0 0 3 4 5 6 0 7 8 9 10 0 0
NB.    ism y0=. 2 remonotone3 x0
NB.
NB.    NB. best case - wide gaps
NB.    x1=. 8 12 0 55 66 0 87 112 152 166 0 191 0 219 229 266 0 300 0 342 353
NB.    ism y1=. 5 remonotone3 x1
NB.
NB.    (0~:x1)#x1=y1  NB. 1's are unchanged old times
NB.
NB.    NB. 0 free not strictly increasing - assertion failure
NB.    5 remonotone3 8 9 2 3

if.  0 = #y       do. y return.
NB. insure lists without 0s are strictly increasing
elseif. -. 0 e. y do.    assert. *./ 2 </\ y  
  y return.
end.

s=. y
g=. |x 

NB. replace any leading or trailing 0s with gap width
if. 0={. s do. s=. ((<./s) - g) , }. s end.
if. 0={: s do. s=. (}: s) , g + >./s end.

if. *./ 2 </\ s=. <. fill s do. s  NB. 0s can occur in s
else.
  NB. list is not strictly increasing - adjust borders and recurse
  s=. x remonotone3 s * (0~:s) *. 1 ,~ 2 </\ s
end.
)

resetfiletimes=:4 : 0

NB.*resetfiletimes  v789-- resets file times.
NB.
NB. dyad:  pa =. clDirectory resetfiletimes btFilesTimes

files=. 0 {"1 y
times=. > 1 {"1 y

NB. format times for touch.exe
year=. ": 3 {."1 times
year=. '-' (<a:;I. *./' '=year)} year
daytime=.  ": _3 {."1 times
daytime=. ':' (<a:;I. *./' '=daytime)} daytime
fmttimes=. year ,. ' ' ,. daytime -."1 ' '

NB. require 'task' !(*)=. shell
filepath=. tslash x
NB. make sure we can change files
shell 'attrib -r "',filepath,'*.*"'
for_time. fmttimes do.
  date=. '"' ,(alltrim time),'"'
  file=. '"',(filepath,alltrim >0{time_index{files),'"'
  shell 'c:\jdbutil\touch --date=',date,' ',file
end.
showpass (":#fmttimes),' file time(s) reset'

NB. reread files and check for changed times
chgfiles=. 1!:0 <filepath,'*.jpg' NB. NIMP only jpegs for now
chgfiles=. > /:~ ((0 {"1 chgfiles) i. files){ 1 {"1 chgfiles

NB. times should match
times -: > 1 {"1 chgfiles
)

resetgallery=:4 : 0

NB.*resetgallery v789--  resets gallery images.
NB.
NB. dyad:  clDsn resetgallery (clGgallery ; ilTids)

NB. ODBC verbs !(*)=. ddcon ddsql ddfet ddfch ddsel dddis dderr

try.

'gallery tids'=. y

NB. does gallery exist?
gallist=. listgalleries x
if. -. (<gallery) e. {."1 gallist do. 'no gallery with name ->';gallery return.end.

NB. gallery id
gid=. >1{gallist {~ ({."1 gallist) i. <gallery

NB. connect database
assert. 0<ch=. ddcon 'dsn=',alltrim x

NB. all tids must exist in database 
if. #tids do.
  assert. 0<sh=. 'select idthumb from thumbnail' ddsel ch
  assert. -. _1-:dbtids=. ddfch sh,_1
  assert. *./tids e. ,>dbtids
end.

NB. empty gallery
sql=. 'select count(*) from gallerythumb where idgallery = ',":gid
assert. 0<sh=. sql ddsel ch
assert. -. _1-:rcnt=. ddfet sh,_1
if. 0<,>rcnt do.
  sql=. 'delete from gallerythumb where idgallery = ',":gid
  assert. 0=rc=. sql ddsql ch
end.

NB. load gallery with images
if. #tids do.

  NB. build insert sql inserts
  sql=. 'insert into gallerythumb (idGallery,idThumb,seq) values (',":gid
  vals=. ',' ,. (": ,.tids) ,. ',' ,. ": ,. i. #tids
  sql=. sql ,"1 vals ,. ')'

  NB. execute sql - success is list of 0's
  rc=. sql ddsql"1 0 ch
  dddis ch
  if. *./mask=. 0=rc do.
    (+/mask);'images put in gallery ->';gallery
  else.
    msg=. 'ODBC errors occurred while inserting image ids'
    (+/0=mask); msg,' target gallery is probably incomplete ->';gallery
  end.

else.
  dddis ch
  0;'images put in gallery - gallery empty ->';gallery
end.

catchd.
  'resetgallery' saveerror 'unable to reset gallery';dderr ''
  dddis ch
  throw.
end.
)

revcontacts=:(0 { ]) ,: ([: < 1 {"1 [: > 0 { 1 { ]) #&.> 1 { ]

revfriends=:(0 { ]) ,: ([: < 2 {"1 [: > 0 { 1 { ]) #&.> 1 { ]

rmprefix=:]`(#@[ }. ])@.isprefixof

saveerror=:4 : 0

NB.*saveerror v789-- format last J error message and save in error locale.
NB.
NB. dyad:  clName saveerror clMessage

errornoun=. 'ERR',(alltrim x),'_runerrors_'
(errornoun)=:showpass (13!:12'');y
)

searchcontacts=:3 : 0

NB.*searchcontacts v-- searches flickr contacts tags and text.
NB.
NB. monad:  searchcontacts clTags
NB. dyad:  uu  searchcontacts clYext

1 searchcontacts y
:
NB. search tags or text
searchv=. searchnsidtext`searchnsidtags@.(1-:x)

NB. get current contacts
contxml=. getcontacts ''
contxml=. parseoncontact contxml
nsids=. 'nsid'&attrvalue&.> contxml
rsxml=.''
for_nsid. nsids do.
  rsxml=. rsxml,<(;nsid) searchv y
end.
usernames=. 'username'&attrvalue&.> contxml
usernames ,. rsxml
)

searchgroups=:3 : 0

NB.*searchgroups  v789-- search  public  flickr  group  titles  that
NB. contain (y789) text.
NB.
NB. monad:  clXML =. searchgroups clText
NB.
NB.   searchgroups__fo 'alaska'
NB. 
NB. dyad:  blclXML =. uuIgnore searchgroups clText

NB. object nouns !(*)=. FLICKRAPIKEY
args=. '?method=flickr.groups.search&api_key=',FLICKRAPIKEY,'&per_page=500&text=', alltrim y
doresturl args
:
args=. '?method=flickr.groups.search&api_key=',FLICKRAPIKEY,'&per_page=500&text=', alltrim y
doresturl~ args
)

searchme=:3 : 0

NB.*searchme v789-- search for my flickr photos.
NB.
NB. monad:  searchme clTags
NB.
NB.   NB. tag list is comma delimited
NB.   searchme__fo 'ottawa,church'
NB.
NB. dyad:  clText searchme clTags
NB.
NB.   NB. do a free form text search if (x) is not null

'' searchme y
:
NB. object nouns !(*)=. FLICKRAPIKEY FLICKRTOKEN FLICKRNSID
args=. '?method=flickr.photos.search&api_key=',FLICKRAPIKEY,'&auth_token=',FLICKRTOKEN,'&tag_mode=all&per_page=500&user_id=',FLICKRNSID,'&tags=',y
if. #x do. args=. args,'&text=',alltrim x end.
dosigresturl args
)

searchnsidtags=:4 : 0

NB.*searchnsidtags v-- search a user's (nsid) tags.
NB.
NB. dyad: clNsid searchnsidtags clTags
NB.
NB.   NB. tag list is comma delimited
NB.   '60546721@N00' searchnsidtags__fo 'ottawa,church'

NB. object nouns !(*)=. FLICKRAPIKEY FLICKRTOKEN FLICKRNSID
args=. '?method=flickr.photos.search&api_key=',FLICKRAPIKEY,'&tag_mode=all&per_page=500&user_id=',x,'&tags=',y
dosigresturl args
)

searchnsidtext=:4 : 0

NB.*searchnsidtext v-- search a user's text.
NB.
NB. dyad: clNsid searchnsidtext clTags
NB.
NB.   NB. tag list is comma delimited
NB.   '60546721@N00' searchnsidtext__fo 'ottawa,church'

NB. object nouns !(*)=. FLICKRAPIKEY FLICKRTOKEN FLICKRNSID
args=. '?method=flickr.photos.search&api_key=',FLICKRAPIKEY,'&tag_mode=all&per_page=500&user_id=',x,'&text=',y
dosigresturl args
)

searchphotos=:3 : 0

NB.*searchphotos v789-- search for flickr photos.
NB.
NB. monad:  clXML =. searchphotos clTags
NB.
NB.   NB. tag list is comma delimited
NB.   searchphotos__fo 'ottawa,church'
NB. 
NB. dyad:   blclXML =. uuIgnore searchphotos clTags
NB.
NB.   searchphotos__fo~ 'bean,millenium'

NB. objects nouns !(*)=. FLICKRAPIKEY
args=. '?method=flickr.photos.search&api_key=',FLICKRAPIKEY,'&per_page=500&tag_mode=all&tags=',y
doresturl args
:
args=. '?method=flickr.photos.search&api_key=',FLICKRAPIKEY,'&per_page=500&tag_mode=all&tags=',y
doresturl~ args
)

setflickrdrive=:3 : 0

NB.*setflickrdrive  v789-- loads flickr x789 thumbs xref and  sets path
NB. nouns.
NB.
NB. monad:  setflickrdrive clPfx


ftx=. loadxrefFlickrThumbs 0
paths=. (<alltrim y) ,&.> 4{ftx
smoutput '(',(":#paths),') flickr/thumbs small image directories'
(paths)=: (<FLICKRDRV,'\') ,&.> 3{ftx
smoutput list /:~ paths  NB. !(*)=. list
)

setorder=:3 : 0

NB.*setorder v789-- set order annotations.
NB.
NB. monad:  blcl =. setorder iaCardinality

<"1 ljust (": ,. >: i. y) ,"1 ' of ' ,"1 ": ,. y#y
)

setpathdrive=:3 : 0

NB.*setpathdrive v789-- wordtext
NB.
NB. monad:  setpathdrive ??
NB. dyad:  ?? setpathdrive ??

'NIMP setpathdrive'
)

setsnotxrefed=:3 : 0

NB.*setsnotxrefed v789-- lists missing [] images from flickr/thumbs xref.
NB.
NB. monad:  bt =. setsnotxrefed clDsn
NB.
NB.   setsnotxrefed FLICKRDSN
NB. 
NB. dyad:  bt =. clSetpattern setsnotxrefed clDsn
NB.
NB.   'Iran' setsnotxrefed FLICKROFFLINEDSN

'' setsnotxrefed y
:
dsn=. alltrim y
clearxrefcache 0
ftx=. loadxrefSidNameDesc 0
allsets=. 1 {"1 ftx
NB. include not in sets
allsets=. '';allsets
if. #pat=. alltrim x do.
  sid=. sidfrname pat
  pos=. >: (0 {"1 ftx) i. <sid
  allsets=. pos{allsets 
end.
allsets ,. (0 5&{"1)&.> allsets pidsnotxrefed&.> <dsn
)

sidfrname=:3 : 0

NB.*sidfrname v789-- set id (sid) from set name.
NB.
NB. monad:  clSid =. sidfrname clName
NB.
NB.   NB. match name string in sets
NB.   sidfrname 'Zam'

xrefSidNameDesc=. loadxrefSidNameDesc ''

NB. exactly one match is allowed
mask=. +./"1 (,:y) E. >1 {"1 xrefSidNameDesc
assert. 1 = +/mask

NB. set id (sid)
; mask # 0 {"1 xrefSidNameDesc
)

signarguments=:3 : 0

NB.*signarguments v789-- signs flickr argument strings.
NB.
NB. monad:  clSigargs =. signarguments clArgs
NB. dyad:  clSigargs =. clSecret signarguments clArgs

NB. object nouns !(*)=. FLICKRSHAREDSECRET
FLICKRSHAREDSECRET signarguments y
:
sig=. md5fromstring x sigstring2 y
y , '&api_sig=' , sig
)

signarguments2=:] , '&api_sig='"_ , apisignature3

sigstring=:3 : 0

NB.*sigstring v789-- flickr signature string from method arguments.
NB.
NB. monad:  sigstring blclArgs
NB. dyad:  (clApikey ; clSecret) sigstring blclArgs

NB. object nouns !(*)=. FLICKRAPIKEY FLICKRSHAREDSECRET
(FLICKRAPIKEY;FLICKRSHAREDSECRET) sigstring y
:
'api secret'=. x
apikey=.'api_key=',api
secret , '= ' -.~ ; /:~ apikey; boxopen y
)

sigstring2=:3 : 0

NB.*sigstring2  v789--  flickr  signature  string from url  argument
NB. string.
NB.
NB. monad:  sigstring2 clArgs
NB.
NB.   targs=. '?method=flickr.auth.getFrob&api_key=9a0554259914a86fb9e7eb014e4e5d52'
NB.   sigstring2 targs
NB.
NB. dyad:  clSecret sigstring2 clArgs
NB.
NB.  tsecret=. '000005fab4534d05'
NB.
NB.  NB. flickr test signature
NB.  tsig=.'000005fab4534d05api_key9a0554259914a86fb9e7eb014e4e5d52methodflickr.auth.getFrob'
NB.
NB.  NB. identities for flickr test case
NB.  tsig -: tsecret sigstring2 targs
NB.  '8ad70cd3888ce493c8dde4931f7d6bd0' -: md5fromstring tsig


NB. object nouns !(*)=. FLICKRSHAREDSECRET
FLICKRSHAREDSECRET sigstring2 y
:
args=. alltrim y
assert. '?' = {. args
args=. x , ; /:~ (args e. '?&') <;._1 args
args -. '='
)

smallpids=:3 : 0

NB.*smallpids v789-- photo ids for small cross reference images.
NB.
NB. Small flickr set cross reference images are always downloaded
NB. to a single directory. The  original Thumbsplus source images
NB. of  the  set   could  be  scattered  throughout  the  primary
NB. database. To  find  the source images  we  match  flickr  pid
NB. numbers that are embedded  in file  names.  Small images have
NB. pids between '()' chars while source display images have pids
NB. between '[]' chars.
NB.
NB. The use of pids embedded in file names allows:
NB.
NB. verbatim:
NB.
NB.   1) different file names for the same image on flickr or Thumbsplus.
NB.   2) cross referencing Thumbsplus and flickr images.
NB.   3) survives total Thumbsplus database rebuilds.
NB.
NB. monad:  smallpids clDirectory
NB.
NB.   smallpids sdZAMBIA

NB. extract pids from file names in small images directory
('(';').') betweenstrs ; 0 {"1 (1!:0) <(alltrim y),'*.jpg'
)

sourceurlfromsize=:4 : 0

NB.*sourceurlfromsize v789-- return source urls from photo size.
NB.
NB. dyad:  clSize sourceurlfromsize blclSizes

allsizes=. >@parseonsize&.> y
sizeidx=.  I.@:(+./"1) &.> (,:alltrim x)&E. &.> allsizes
'source'&attrvalue@:,&.> sizeidx {&.> allsizes
)

split=:{. ,&< }.

sqbracdir=:3 : 0
NB.*sqbracdir v789-- renames files so [] or {} appears before the extension.
NB.
NB. monad:  sqbracdir clDirectory
NB.
NB.   sqbracdir 'c:\pictures\flickr'

'[]' sqbracdir y
:
if. -. direxist y do. 'missing directory: ',y return.end.

if. #files=. unsqimages y do.
  bracs=. alltrim x
  assert. (<bracs) e. '[]';'{}'
  bracs=. ' ',bracs,'.'

  old=. (justfile ; justext)&.> files
  new=. dblquote ;&.> 2&A.&.> (<<bracs) ,&.> old
  rencmds=. 'rename ' ,"1   ;"1 (dblquote files) ,. ' ' ,&.> new
  y docmds rencmds
  (":#rencmds),' file(s) [] renamed'  
else. 
  'no image file(s) satisfy [](){} requirements - nothing renamed'
end.
)

unixpairsfrtimes=:3 : 0

NB.*unixpairsfrtimes v789-- ordered period intervals from integer unix times.
NB.
NB. monad:  unixpairsfrtimes ilUnixtimes

times=. , 2 ]\ ~. /:~ y
)

unsqimages=:3 : 0

NB.*unsqimages v789-- image file names without [](){}.
NB.
NB. monad:  blclFiles =. unsqimages clDirectory

files=. filelist (tslash y),'*.*'
NB. remove file names that already contain [](){}
mask=.  -. (<'[](){}') +./@e.&> files
imagefiles mask#files
)

updatecommentxml=:3 : 0

NB.*updatecommentxml v789-- refresh all current user photo comments xml.
NB.
NB. monad:  clMsg =. updatecommentxml uuIgnore
NB.
NB.   updatecommentxml  ''   NB. update XML documents

NB. always update the photos files
flickrcomments=. FLICKRDRV,FLICKRPATH,FLICKRCOMMENTS
yammer 'refreshing current user comment xml ...'
xml=. usercomments~ ''
xml=. 'pages' eletags ; '?>'&afterstr&.> xml
xml=. XMLHEADER,xml
xml write flickrcomments
'main photo comment(s) file refreshed -> ',flickrcomments
)

updatefiles=:3 : 0

NB.*updatefiles v789-- update photo and photo info files.
NB.
NB. monad:  updatefiles tok

NB. always update the photos files 
flickrphotos=. FLICKRDRV,FLICKRPATH,FLICKRPHOTOS
photoxml=. getallphotosxml y
photoxml write flickrphotos
msg=. 'main photos file refreshed -> ',flickrphotos

NB. get only new photos when updating info file
msg,LF,updateinfofile y
)

updateflickrxml=:3 : 0

NB.*updateflickrxml v789-- update photo and photo info xml files.
NB.
NB. monad:  clMsg =. updateflickrxml uuIgnore
NB.
NB.   updateflickrxml  ''   NB. update XML documents

NB. always update the photos files
flickrphotos=. FLICKRDRV,FLICKRPATH,FLICKRPHOTOS
yammer 'refreshing photo xml ...'
photoxml=. getallphotosxml ''
photoxml write flickrphotos
msg=. 'main photos file refreshed -> ',flickrphotos

NB. get only new photos when updating info file
yammer 'updating photo information xml ...'
msg,LF,updateinfofile ''
)

updategeogallery=:3 : 0

NB.*updategeogallery v789-- updates the thumbplus 'Geotagged' gallery.
NB.
NB. monad:  blMsg =. updategeogallery clDsn
NB.
NB.   updategeogallery 'working2005'


NB. load 'gallery' !(*)=. listgalleries creategallery resetgallery
gallist=. listgalleries y

NB. if gallery doesn't exist create
name=. 'Geotagged'
if. -. (<name) e. {."1 gallist do.
  smoutput (y creategallery name),<'gallery created'
end.

NB. cross reference of thumbplus and flickr ids
'tid pid'=. loadxrefTidPid y

NB. flickr pids from geotagged kml !(*)=. FLICKRDRV GEOKMLPATH GEOKMLFILE
gpids=. s: pidsfromgeokml read FLICKRDRV,GEOKMLPATH,GEOKMLFILE
mask=. gpids e. pid
if. 0 e. mask do. 
  smoutput 'missing pids->'; (-.mask)#gpids
end.

NB. insert images in gallery
if. #gpids=. mask#gpids do.
  y resetgallery name;(pid i. gpids){tid
else.
  y resetgallery name;i.0
end.
)

updategeokml=:3 : 0

NB.*updategeokml v789-- update geotagged flickr images.
NB.
NB. monad:  updategeokml uuIgnore

kml=. geotaggedkml ''
kmlfile=. FLICKRDRV,GEOKMLPATH,GEOKMLFILE
kml write kmlfile
'kml file refreshed -> ',kmlfile
)

updateinfofile=:3 : 0

NB.*updatefiles v789-- updates photos information file.
NB.
NB. monad:  clMsg =. updateinfofile uuIgnore

fp=. FLICKRDRV,FLICKRPATH
flickrphotos=. fp,FLICKRPHOTOS
flickrphotosinfo=. fp,FLICKRPHOTOSINFO

if. fexist flickrphotos do.
  pids=. parsepids parseonphoto read flickrphotos
else.
  photosxml=. getallphotosxml ''
  photosxml write flickrphotos
  pids=. parsepids parseonphoto photosxml
end.
pids=. ~. pids

if. fexist flickrphotosinfo do.
  infoxml=. read flickrphotosinfo
else.
  infoxml=. getallphotosinfoxml pids
  infoxml write flickrphotosinfo
  (": #pids),' photo(s) added to refreshed/new -> ',flickrphotosinfo
  return.
end.

NB. find any new photos
if. #newpids=. ~. pids -. parsepids parseonphoto infoxml do.
  newinfo=. getallphotosinfoxml newpids
  NB. prefix new information - this allows a simple
  NB. nub to select the most recent data
  root=. 'allflickrphotoinfo'
  infoxml=. (root geteletext newinfo),root geteletext infoxml
  infoxml=. XMLHEADER , root eletags ;infoxml
  infoxml write flickrphotosinfo
  (": #newpids),' new photo(s) added to -> ',flickrphotosinfo
else.
  'no new photos - nothing added to -> ',flickrphotosinfo
end.
)

updatesethtml=:3 : 0

NB.*updatesethtml v789-- regenerates html set content files in small
NB. image directories.
NB.
NB. Note: run  this verb  after running  (updatesmallthumbs)  and
NB. updating the working thumbs database.  The database holds the
NB. image dimensions used to set images in html.
NB.
NB. monad:  updatesethtml uuIgnore
NB.
NB.   updatesethtml ''
NB.
NB. dyad:  btFlickThumbsXref updatesethtml uuIgnore
NB.
NB.   NB. update set html for subset of xref
NB.   new=. updatesmallthumbs ''
NB.   new updatesethtml ''

(loadxrefFlickrThumbs 0) updatesethtml y
:
if. 0 e. $x do. 'no set html files updated' 
else.
  if. checkflickrthumbsxref FLICKRDSN do.
    NB. !(*)=. FLICKRTOKEN
    ((<FLICKRDRV,'\') ,&.> 3{x) makesethtml&.> <"1 (0{x) ,. <FLICKRTOKEN
  end.
end.
)

updatesmallthumbs=:3 : 0

NB.*updatesmallthumbs v789-- downloads small flickr set images to thumbs directories.
NB.
NB. monad:  updatesmallthumbs uuIgnore
NB.
NB.   updatesmallthumbs ''

if. checkflickrthumbsxref FLICKRDSN do.
  ftx=. loadxrefFlickrThumbs 0
  NB. !(*)=. FLICKRTOKEN
  chg=. ((<FLICKRDRV,'\') ,&.> 3{ftx) downloadsetdiff&.> <"1 (0{ftx) ,. <FLICKRTOKEN

  NB. return sid, directories of sets with new images
  if. 1 e. mask=.0 < #&> chg do. 
    showpass 'scan thumbsplus directory tree to update image dimensions' 
  end.
  mask #"1 ftx
end.
)

updatethumbsgalleries=:3 : 0

NB.*updatethumbsgalleries   v789--  updates  thumbsplus  flickr  set
NB. galleries.
NB.
NB. This verb creates or updates thumbsplus galleries that mirror
NB. online flickr  sets. The  galleries are generated from flickr
NB. id numbers (pids)  that  are embedded  in  the file  names of
NB. small  flickr  images  downloaded by  (updatesmallthumbs) and
NB. corresponding display images stored in thumbsplus directories.
NB.
NB. NOTE  WARNING:  thumbsplus  gallery  order should  be set  to
NB. manual for this verb to properly order thumbsplus galleries.
NB.
NB. This verb should  be run after a series of other update verbs
NB. that collect and cache required data. See examples.
NB.
NB. monad:  updatethumbsgalleries clDsn
NB.
NB.   updateflickrxml ''                 NB. update flickr xml
NB.   new=. updatesmallthumbs ''         NB. update small flickr (pid) images
NB.
NB.   NB. MANUAL STEP - scan thumbsplus online directory to update thumbsplus database
NB.
NB.   new updatesethtml ''               NB. update flickr set .htm files
NB.   updatethumbsgalleries 'working2005work'  NB. update all thumbsplus flickr galleries
NB.
NB. dyad:  clSetpattern updatethumbsgalleries clDsn
NB.
NB.   NB. follow monad sequence to this point! 
NB.   NB. update the single gallery with (x) string in its name
NB.   'Iran' updatethumbsgalleries 'working2005work' 

'' updatethumbsgalleries y
:
clearxrefcache 0
dsn=. alltrim y

if. checkflickrthumbsxref dsn do.
  ftx=.   loadxrefFlickrThumbs 0
  paths=. (<FLICKRDRV,'\') ,&.> 3 { ftx
  htms=.  paths ,&.> (<'flickrset_') ,&.> (0{ftx) ,&.> <'.htm'
  gals=.  2{ftx

  if. #setstr=. alltrim x do.
    onesid=. sidfrname setstr
    setpos=. (0{ftx) i. <onesid
    htms=. setpos{htms
    gals=. setpos{gals
  end.

  NB. all expected .htm files must exist
  assert. fexist htms

  NB. all known online pids from .xml
  pnx=. loadxrefIdTimesName 0

  NB. get thumbs tid flickr pid source image xref and check
  'tid pid'=. loadxrefTidPid dsn

  NB. display image references are unique - scrub some
  NB. non pids that arise from file names with '[]' chars
  srcpids=. pid -. s:<''
  allpids=. s: 0 {"1 pnx
  notpids=. srcpids -. allpids
  if. 0=#srcpids=. srcpids -. notpids do.
    showpass 'no display [] images in thumbs database with dsn=',dsn
    '' return.
  end.

  if. (0 e. mask=. ~: srcpids) *. -.(FLICKROFFLINEDSN -: dsn) do.
    showpass (":+/0=mask),' nonunique working/primary display image [] pids'
    showpass  (allpids i. srcpids #~ -. mask) { pnx
    assert. 0 NB. cannot proceed until working/primary source image duplicates removed
  end.
  srcpids=. ~. srcpids

  NB. update thumbs galleries using .htm files for content and order
  NB. galleries exist at this point (checkflickrthumbsxref)

  showpass 'updating galleries in database with dsn=',dsn
  chgs=. ''
  for_htm. htms do.
    showpass LF,'updating: ', gallery=. ;htm_index{gals
    setpids=. htmpids ;htm

    NB. use extant set pids and report missing
    if. 0 e. mask=. setpids e. srcpids do.
      showpass (": cnt=. +/0=mask),' missing [] display image(s)'
      mcnt=. MISSINGLIMIT<.cnt
      header=. 'first ',(":mcnt),' missing image(s):'
      firstmissing=. mcnt {. (0 5 {"1 (allpids i. setpids){pnx) ,&.> ' '
      showpass header,LF,ctl ;"1 firstmissing
    end.

    if. 1 e. mask do.
      showpass (":+/mask),' display image(s) found for: ',gallery

      NB. insert extant images in gallery
      gpids=. mask#setpids
      NB. load 'gallery' !(*)=. resetgallery
      showpass upd=. dsn resetgallery gallery;(pid i. gpids){tid
      chgs=.chgs,<upd
    else.
      showpass 'no available display [] image(s) - nothing put in: ',gallery
    end.

  end.

  >chgs NB. updated galleries
end.
)

usercomments=:3 : 0

NB.*usercomments v789-- recent activity on photos commented on by the calling user.
NB.
NB. monad: clXML  =. usercomments uuIgnore
NB.   
NB.   usercomments ''    NB. first page as cl
NB.
NB. dyad:  blclXML =. uuIgnore usercomments uuIgnore
NB.
NB.   usercomments~ ''   NB. all pages as blcl

NB. object nouns !(*)=. FLICKRAPIKEY FLICKRTOKEN FLICKRNSID
args=. '?method=flickr.activity.userComments&api_key=',FLICKRAPIKEY,'&auth_token=',FLICKRTOKEN,'&per_page=50&user_id=',FLICKRNSID
dosigresturl args
:
args=. '?method=flickr.activity.userComments&api_key=',FLICKRAPIKEY,'&auth_token=',FLICKRTOKEN,'&per_page=50&user_id=',FLICKRNSID
dosigresturl~ args
)

wait=:6!:3

wgetposturl=:4 : 0

NB.*wgetposturl v789-- post data to url.
NB.
NB. dyad:  clData wgetposturl clUrl

cmd=. 'wget --no-verbose --output-document="',WGETOUTPUT,'"'
cmd=. cmd,' --post-data="',x,'" ',y
cmd=. WGETPATH,cmd,' "',y,'"'
NB. require 'task' !(*)=. shell
res=. shell cmd

NB. Note: flickr output on some posts my be repeated
NB. I don't understand why this is happening - it seems
NB. harmless so far - June 6, 2007
read WGETOUTPUT
)

wgeturl=:3 : 0

NB.*wgeturl v789-- like (geturl) but uses wget.
NB.
NB. monad:  wgeturl clUrl
NB. dyad:  clOutput wgeturl clUrl

(WGETOUTPUT;1) wgeturl y
:
'file outon'=. x
assert. -. '"' e. file,y  NB. no quotes in paths or files
path=.    WGETPATH
options=. ' --no-verbose --output-document="',file,'"'
cmd=. WGETPATH,'wget ',options,' "',y,'"'
NB. require 'task' !(*)=. shell
res=. shell cmd
((0 0$'')"_)`read@.(outon) file
)

yammer=:3 : 0

NB.*yammer v789-- conditional write message to session manager.
NB.
NB. monad:  yammer clMessage

NB. object noun !(*)=. YAMMER
if. YAMMER do. smoutput y end.
)

showpass soput ".'nl_',SOLOCALE,'_ i.4' [ cocurrent 'base' NB.{*JOD*}
".soclear NB.{*JOD*}
cocurrent SO__JODobj NB.{*JOD*}
zz=:dec85__MK__JODobj 0 : 0
0f(^G+>P`3+>P&o0H`83+>GYp1-$I31a"P4+?:Q"2]t+'2)l^50H`)0+>G\q1G^..1E\J0+>G\q
1GL",1a"S0+>G\q1cZ[52BXe6+>GPm2_lL11*AG7+>Gbs1b^%,2BXe6+>GYp1,U1/0d&52+>GVo
2DH=/1*AD.+>GPm1GU(-0H`/++>G\q1,U1/2'=e5+>GSn1GBq+1E\G-+>Ghu2)HF21a"\2+>Gbs
2)6:/1*AG2+?:Q#1a"M.+>kqt0fL421a"M,+>Ybq0eje.2]sh1+>beq0f1"-2]sh1+>Pht1,'h-
3$9q3+>bhr0esk+3$:4(1,pC5+>Pr"0esk00H`=t1cQU8+>Pku2BXb7+>GPm1,C%-0H`24+?1K#
2BX_0+>kkr0ea_-2'=V.+>Get0eje-3?U%1+>Pbr3$:(;+?:Q!2]sh/+>khq0eje,1a"M1+>bnt
1,0n,1a"M,+>Ghu0f1"-2BX_0+>kqt0esk-0H`)*+>Y\o0f:(/3$9q3+>Ykt0f'q-3$:1'1G^.5
+>kqt2BXe6+?:Q"0H`)*+>Pr"0esk,3?U%4+>Pbr0eje.2'=V2+>khq0eje.2BXt%2DZI8+>bu!
3$:%7+?1K#0H`)*+>Z##0fU:22'=V/+>Ynu0f:(21a"M1+>P\p0fC.22'=V4+>Ykt0f:(/2BX_6
+>Y_p3?U.4+>Gbs1b^%,3?U.4+>Gbs1,9t,0d&50+>GPm2)-46+>Ykt2BXb5+>GVo2`2^40d&;4
+>Gl!1Gp:02'=_4+>GSn1,^78+>bhr2]sk5+>G\q1H-F23?U.:+?:Q%1*A;2+>bu!2BXb0+>GSn
1GU(-1a"V3+>GVo1H6L31a"S0+>GYp1H$@11a"S/+>G_r1GL",1a"V7+>Ghu2)$.-1a"S.+>GPm
1Gg4/1*AA.+?(Du0d&Fu1,'h*0d&;.+>t>t1a"_"1,'h*3?U(8+>GSn1,L+.1E\P2+>GPm1,pC2
1*AD3+?:Q#3?U7'1H?R40H`5,+>Ghu1H-F4+>l)#0ea_,1a"M,+>G_r3$:(:+>t>u2'=V0+>Pr"
0fC.20H`@u2)cX40d&;-+>PVn1c6C12]sn6+>Gl!1b^%,3?U.9+>G\q1c-=00d&;.+>GVo1G^.6
+>Yu"0esk-3$9q4+>bnt0fC.21a"M2+>beq0f1"/3$9q1+>bhr0ea_+1*A;.+>ktu0f1".1E\\#
1cHO31*AJ/+>k8u3?U%6+>u"u0fU:42]sq"1c?I6+>bks0eje.2'=V2+>Ykt0f1".2]sh1+>Pes
0esk,2'=V0+>Gl!0esk,2'=V2+>Po!0eje+1a"M,+>P_q3?U.:+>GSn1GL"4+>Yer0ea_-3?U(3
+>beq0eje,0H`)(+>bks0ea_+0d&J!1,U1/0H`2.+?1K$0H`))+>bnt0f'q10H`:s1H?R9+>bnt
2'=h:+>k8t1E\D/+>kqt0ea_-3?U%2+>u"u0eje10H`),+>Get0esk,0d&2*+>Ybq0ea_+3$:1'
0f'q4+>kns0esk/2'=k$1,g=11*A>/+>G\q1c?I9+>PYo0f'q/2]t+'1,^701E\G5+?:Q$2'=V-
+>c&#3?U.6+>Get1Gg43+>bhr3?U19+>Gbs1cQU40H`/++>GSn1G^..2'=\6+>Gbs1bg+-1*AA,
+>G\q1GL",1E\S1+>Get2)QL30d&84+>GVo2)l^8+>Yu"0eje*2BXq$1,g=6+>boC:I@oP9gMNB
;e:2b@s)m)+EM4-Cht5(Df'?"DIdf2Bl5%AA8bspA901BGA(Q*+>G!WFD,6+GA2,0+CoC5DJsV>
AU%crF`_1a9M%TE;F+;^86&P]F`M:@AoD]4Ao)0kCN:P+F`_;.DKKT&@<?4%DFR;k6VC<E:JFPP
:/k/#Cht5:F(KA7@rH4$ASuU2+D,>(AKYl!D.Q118OH-K6rI&rEbT].+DbV2FCfJ8AoD]4AU%X#
E,9).A3*1R8OH-K6rQiV6pa6`A92W2De:,6BQ\0$F)Yr<F!,"%FCAWeF(HIG+E_aJ@;Kb*+EqaE
CM@[!+Cno&@:EYdAO]?b6VC<J<)$%W<)$%/FCf<.CghEs+EV1>F@Jqq6VC<J<)$%W76s=4<)$%/
Eb03.Ec`FG@:F%a+D>=pA7]d(FCf<.CghEs7SHB@92\;[9h\G\=%H:b9H\@eE,Tc=+EV%$Ch4`0
Dg*UN.3N_DD/a<"FCdp88OH-K85r;W<'a)L85r;W+ED%4DfTqBFCAWpAKZ)'Bl"o6ASlC&@<?'M
9M%TE;FsSK7n#g;;Ij?N@<HC.+DG\$B4W2rDg-)8Ddd0!A8-'q@ruX0Gt(J!6VC<K9gM9<;c-5.
F_,T=+EV:*F<G1,FCT!*+CT)&+D,G(@r$*-Bl.9kATJu+Ec5e;CLqd8DfTB07SHB@92\PT7SHBK
77:'LDe<TtBl7K)FD,f6@WQL)F`S[9@<>pe@<6!&:IIN:+CoP27SHB@92\SP<(LP6Eb/a&DfU+G
GA(Q.AKYT$Bk(q!+BV?3+Cno&@3B9*+DYP-F<E.XEb065Bl[d++DbUtA8,po/0K%T@;0OlDJ((s
-Z_aN8OH-K:e4A]:K)LTC`m>(Ch4`!Df0Z*Bl7X&B-;#)F*&OCAftMuC`m>+Bk(q!+E2"4FDl4C
@;]TuE+j03Df]K3F%/hp6VC<R85E2\;b9_R:O$_m+D,>(AKYK$DKK<$DJ=!$+Co&*@;0P!+CS_t
F`\aFBQ&!2F%/hp6VC<R;FsSK;HZCd:2k5fD..I1+EV:>D.7R*CiseAA79Rg@UX=h+AYBl6Qfo\
DFR;k6VC<T78m/c;G;4RC`m>.EZet1Bk(q!+AtX,<$5[ZCi"/^9M%TE;H$.j78mW<@;0Od@VfTu
Ao)0kCN:P3D..'g+EM7CATL=78OH-K<(L"`6;r,GC`m>(Ch4`"AS,XoBl7Q+Ao)0kCN:P=ATTSI
BQ\0$F!,"-Eb/a&DfU+G@rcL/F!,L7An?!oDI[6J5tjs@;HZ@X5uLWkBOPpi@ru:&F!+$s@;R,q
Ci"$6Bl7Q+Bl5&+@;KakEd8dF@;TRs7n$3H9h\#J9LVH_DffE#B4YTr7VldKCN:OhD..'gF!,(/
Ch7KmD.Q4+:J4DU:dJ&OE+*j%+EVNEB4YslEaa'$A0>MrDffE#B4YTrCMdlY76s=5:.I]@7R:$J
<+KQP@<HC.+EhI1GAqJ7DKI"7ART+`DJ)L>9h\SR;F42G<)c:a:3'oYF_kK,+D#e:Eb0<5Bl@l3
D..NrBPD?s+E2.*@qB=lCh.*t+Eh16BjkIeATJu.DBNV7D/:>2BleB;8OZ`X9M\PT6VTs\F_kk:
E+*j%+Dbt+@<?4%DBNk0+DGD3E,9H5AP#Td79EMX:/a_[:/bkD@:s-oAnc'm+D#e>ASuR'Df0Vf
9i+V`<(9PQ6VC<R85E2\;cI=FE,Tc*Ed8d>Ch[BpEZf=7Dffo=+B1Wn+Co&"Bl.R+ARlotD/aE6
F<G[:G]Y'?Bl%?P9i+V`<(9PQ6VC<U79!)S:K1+l;FO&SASlC)Eaa!6+D,G(@r$*-E+j03D]j9I
F(KG9@rcL/F!,L7An?!oDI[6#Bl.g-Ec`FGAU&;>Anc'm8PN#W;H-+Z8OH-K;ajYa<+TocDfT9,
Gp$^8Bk(q!+EM+9F!+FJ66KfMCh[a#FCeu*Bl.g-Ec`FGAU&;>Anc'm8PW5R;H?(W<(TeQF(Jj"
DIdf2@V'Y*AS#a%@:X+qF*(u(+EV=7ATMs%D/aP=/KenQF*&O6AKYl%B45mrG%F<@9LqT<6q(!u
D/:>,Ea`TtASuT4F*(i2FD5W*+DYh1+CoD#F_t]-FA#>%:eX/B786'G96b;i+EV13E,8s)AKYT'
EZet1Bk(q!+DG\$B4W2UDf99)AKXEMEcbt;E,8rmASkjrCNE-C9MeDK6Ua^8;G1%V;F4;tD/:>:
ASlC&@<?''E,8rmAS?!uA7]d(G%#E*@:F%aF%]5$<)Q"R9LVj(D/:>,Ea`TtASuT4ASu$mDJ()-
D/:>*De!p,ASuTa5u(EG9M\PS78di;FCf)rEZek1A7ZltDIdHk@<?4$B-;&"DKTB(+B3#sD.7R*
CiseAB45UmATE&=F)Q)@Bl7QX8Q/PZ:.IuL9hA<$@<cL'F_r7=F_tT!EZf:4+ED%4DfTr2A0>`'
F)u&5B-:o*@:s.m9j'qZ8OH-K5u:-G79OJQ+D,G(@r$*-5u:,qCLqcc=[l(V6VC<P5tsdbGp$^8
Bk(q!+Co2-E,8s.+DtV)AKZ)'B2)Mu9M%TE;H$+P;FNuP770sA<,Hn'F(f!&ARlp)ARfalF<G@1
Gp"[]FD5;s+EVNED0[79Ch[BpEZdYE8K_e[Gu.(#786*;6r60@;H%aICh[E&Ao)0kCN:P:Bk/>u
Bl%?'DIIBn+D#D!ARo=cDJ()2@;0b';F+&J779R65ugTXA7]@]F_l.BG%kN3+ECn.B4Xt05t"[J
91;TfCh[BpEZfC6@:UL"ATDX%F)u&6DBO%>CLqB^85E;tBle60@<iu-Ch[BpEZf=8A0>H#@V''m
E+*I$;b0\c6VgEN5u'gHA8-+(CghT3F(f-$C`m5+D/E^!A9/l-DBL?<De!WpF"&5UBOu'(0d(O[
E,]i/F)rIBFD,6+GA2,0;b0\c;ajGLA8-+(CghT3@X3',F!,O8DKI"CD]j+>@r#Xt+>"^HAS,@n
CigdR+Du*?F(fK9;b]PO9QP&ZCht5+Ch[BpEZf=8A0>H#@V''mE+*I$;bpCk6Uc'7F`Lu'+D,G(
@r$*-E+ri*ASkmfA0>i"Bl[0A9i+MZ6U=C7FCf<.DfT9,Gp$pA@ps1b+EM[;AncKh78m/O:e=;K
=[>kU+DYP6+E_a:A0>T(+D,G(@r$*-5u:,qA8bt#D.RU,@<?4%DBNM8@;Tt"ATLg>;cH4a:I8Z6
Ddji3F(Jl)Bl5&*Ch[BpEZdYE8K_P^@s)X"DKK</Bl@l3AU%X#E,9*,<(0_b9M\/M:/t1cCi<s#
DBO(BC`mkAARlotDBNP-Bk(q!+@/gq+CoD#F_t]-FCB9*Df-\/G[YH.Ch7Ze78m/a770sA<-)_]
Eb/c(F(Jj%ATT&;F(Jl)Bl5&*Ch[BpEZdYE8K_P^@s)X"DKK</Bl@l3AU%X#E,9*,<(Tb_6q'R2
<D6A&AS,@nCigeCBk;K2FD5Q5=$]DW;aj&L:./#kASbe#+DG^9F(Jj"DIdf2/Kf1WARlp*D]j(3
A9DBn+EMI2CLqT1FD5T'Dfp/C=%>\Y:K:@j<E*L?AmoguF<Gd?ATT&5F`_SFF<G10Ch6[<79!)L
<(Lt:FD)e=D]j7:ATT&+G\(B-FCAWpAKWQIDKTc3+DG\3Ch[I%+EqI0F<GL>+EM4-Cht55@<?0b
9h\)H5t".>F*(i.A79Lh+B;B1/N=k85@J)5@rH4$ASuTuA7Qfk+E2"4FDi:3Df'?&DKI!Q+ED%5
F_Pl-F!,[IBlmo/@<H[*DfTQ<@<?4%DII?tH=_,8FE2)4Eb0*+G%De4ART+`DJ()#DIal3Ea`Zu
Bl7Q+H=_,8ATM<lFE_;-DK9<.F_Pl-A92<uARfg)F*1r.BleB;+C\o(G@b?'+Du+8DImm2ARloo
ASc'tBlmp,F(8lp@r#[mBk(q!FD,f6@WQd7AS,FcARfKuAo)0kCN:P>BQ\0$F!,^JAS,FcARfLt
Deip%@q]F`CER5*Bk(q!+EVO;ASu!oARTV(Eb/im@:Nt^ATD4#AKZ5<AS*&p@:Nt^@rH4$Df03.
Dfp#?Eb0?8Ec,q@@WW`2Aft`,Dfp#?+E_a:EZf%(F!,17+Cf>,D/X;7GA2/4+Cf>-FCA[$F(9-+
FCA[$DIIBnF(KT<Ea`I"+Cf>-FCA[$+DtV)ATJu+Ec5e;G\q8,Df0Z*@ruU0Bk29rG][t7@rri'
Df0Z*@rri2F(o0++D,Y4D'4(?Ch%Ks@<?'mCh[BpE^<MnBl7X,BjkglH=\42Ch[BpE^<Mn+E(_(
ARfh'@rc-hFCf)nCi!['H"1l+@<?''<+pDk@WQL)F`S[<@;KakEd8dOBln#2DIIBnA7]RgFCf)n
Ci!['H":K&ATVL)+CQBlBQ\0$F)Yr<F!,+(Ci!['H":W0AU%p1F>4nPAftVuEb/a&DfU+GAU%p1
FE8QY+E)@8ATE!/F(JlrF)YZ(EcZ84FEMVAF!+m6@rri3AftVuF)Yr(Gp$X3Eb/a&DfTQ'F!,(8
Df$V-BkM!uF<G10Ch7ZuDe!WpF(KT-@s)m)+EM4-Cht5(Df'?"DIdf2Bl5&'BOPp(FCAWpARo_"
ATMs9Ebo9)+AtX,<$5UiB6A'&DKI"DEbo9)F(o9+Df^#CEbof2B5Si#DIakd:K(48@<-"'D.RU,
+EVNEF`M;/Df]W*Eb0<6F`M;>BkM<+@;]TuA8`Sg78m/.@<-"'D.RU,+E_^@A8c[0Ci<`mBl.9k
ARo_'DJX6"A9/l%+D,G(@r$*-Bl.9kARo_'DJX6"A92=(A8c[0Ci<`m+EMC.Cht5+Ch[BpEZfF7
F<G:7@:s.m+EVNE@;[3!G][A3F<G+.Eb/a&DfU,6Dg-)8Ddd0tATVHsAnGRlGA_58@:UL%ATT&/
D..'gF!,R<@<<W#Eb-A2Dfd+9DBNJ(Eb/a&DfU+G.!R?nATh[+F*)>>F(JiM<Zl:&D.7's+D,Y4
D'38+ATD4$F`M%9-tY&PFDl+I+CT.u+EM+(Df0*,+CT@70eb:(@<5jhA79aqEccA7Ci<a(Bl7Q+
A79b$D]iY4Df$V=Bl.F&FCB$*F!*%WAoD^,@<<W+F!,aRH$O7DA7R<'@<lp*@q0G"DKKK)Ch7Es
F*(l-@r*9+Aft]"Ch4`,@;TRs+D,Y4D'3A'Eb/a&DfU+GAnc'm+E1b2FCfK1Anc-nF`V,7Anc-n
+D,G(@r$*-F`V,7+C]U=FD,6"EZet1Bk(q!+EM%5AS#a%DIIBnAnc:,FCf9"FCf]=+E(j7Anc:,
F<F[[9H[n_ASl!rF<GdAFD)dFGV1EfFCAg'Anc:,FCf9"FCf]=FCf]=+E(j7Anc:,F<GgFC`m;*
ASl!rF<GdAFD)e=@:p]2GV1FWCh[BpE^<Mn8PW5R;FWr>7:p@M@r$*N:e;d>CghC++DG_8ATDBk
@qB7gBk(q!5u:-R9giT0Bk(q!5u:,q<b6;mBl@l39jqgK6Z7*bF<F:dCLonBFCf'#Bk(q!7qHU\
@:s4aA9;6hCh4`-Afu&+Dffo=+EqOABHUr!DdmO$B4kdr+DbJ.BlnK.AKYE!A0>],DJ*[*F_#&q
Ch[BpE_0#*78cT@6UbU'Bk(q!+DG_8ATDBk@q?d,DfTB0Ao)0kCN<!W<,$2\:18!NA7]RkD/"*'
A0>u*G]Y'?DfQt>BQ&!2+DGA-/0K%KD.Rc2@;]TuDIIBnF(T6&@r$*VA5m8[ATLUTD.Rft@VfTu
De:,2BQ&!2+DGA-/0K%KD.Rc2@;]TuDIIBnF(T6&@r$*_:JXqk:JsSZEc5l<+EqaEA9/l3Aft]%
Bk(q!+D5_5F`:r/Bk(q!;e:&IBQ&!2=E7tbG]IA-+EV%$Ch4`-Afu/+F<G"0A0>i)Dffn?Bk29s
Ch[BpE`Pn&Ao)0kCN:P@ATDj+Df.*KD..3k+Cf>4DKI"0DIal,@;BEsA79RkAo)0kCN<O!BQ\0$
F&l"'F(96)E-*4GATDj+Df.*KD..3k+Cf>4DKI"0DIal,@;BEsA79RkAo)0kCN=K-F@g"<@;TRD
ATM@'@:F%a+E(j7F(KG9Bk299+DtV)ATJu&DIal#ATM@%BlJ0.Df0W.Ch[BpEcbu;D.7R2Eb/j%
@<-F#+D,G(@r$+,BQ\0$F*M_:AnGn%A8c[0DIIBnAoD^,@<<W+D..'g+CoD7DJX6"A0>buD.R<r
FE_A/FCT/uAoD^,@<<W9B4Z0-@rH4$@;]TuAoD]4Df0,/Ec6.EDe:+?D..3kE+j03Des-*CNCq:
F_kl5AS#n'D0[76Df0Z*@rsA9EbT*&A9/l8BOQ!*Eb/`pE,ol,@<?'n@;p@*@V9+g+E_XBATAo%
DIal+Dg,c5+C]83DIdg$AT)[!B4kddCMdm#ASu("@<?(%+CQC.D/:>*De!p,ASuT4E,TH.FD5W*
+EVNEH#IhG+CfP7Eb0-1+<kH0DffE#B4YTt+D,G(@r$*-Bl.9kATMKqFCA[$Bm+34H"U]1+CSc%
Bm+34Gp%$C+Dbt/B4YTrBl5&9F(KA7AoD]4CghC,+EVgG+Cno+F(]'+@;Kb!BQ&!2F(oN(Dg6,8
B4Z1++DG_*DfT]'FD5Z2+D,P4+=MIe.3NSCDffn?Bk29tATV?sCiF'+FDl5FD/=6(FEMVAF!+n-
C`m>+Bk(q!+E2"4FDi:HD/:>'F!,C=AKYN%@s)X"DKKN&FCT6,FCA[$F(]'++CfP7Eb0-1+E_a:
EcW@5Df0Z*@rud)ATVF#F`);BCh[s4+E(j7E+rg(F`M&7+EV:*F<G+4+Du+>+D>2,AKYE!Gp%3;
B6.]sFCoQ3@V97o+EV:.+D,G(@r$*-Ao_g!+EVO;ASu-lFD#0'Ci<flFD5Z2B4Z0-B4Z!oEa`p#
Bk&9%De!3tBl@l3AoD]4Df0,/E+j03DeEX'B4Z"'@:s4aA8?$uA79RgB4Z0-@s)g4ASuT4B4Z"'
@:s4aA0>K#Bk(q!+DG\$B4W3"DJ!g-D..O#Df03!FD#W4F`;DBATW'8DK?q/+Dbb5F<GL6+D5_5
F`;CEFDi:GBPCsi+F.mJ+Ceht+CSek+E2"4FDl55ATVX'@:s.^Bl.F!F(oQ1F)5c5CNXS=Bl.9k
AKYMtD.RU+Bl@m1+DG^9FD,f6@WQL)F`S[9@<>pe@<6!mATVX'B4kdt+D,G(@r$*-Bl.9kAKYMl
FCAfnFDc#=Bl8!'FDPZ4F<GL6+E2%)FEMV8F!,@=F<G:8+CT/5+EM+9F(]'+E+j03De!^.DKKr4
ATVu9E+j03D]j";F*&O7Dfor>F!,(5EZen(Anc-oA0>T(FCfK9@;L!tATVm)Dffo3DJ!g"ATT&/
DJ!g-D..O#Df-\+@W-C2+E)./+D,G(@r$*-E+j03DeEX'E+j03Df]W1F(KH0BleA=De:,(Ch[Bp
EZf=7Dffo=+DG^9Df0,/F(KH+ATVm)Dffo=BmO?3Eb0?8Ec,q@@<Q'nCggdhAKYT$Bk(q!+E2"4
FDi:CBmO?3B4Z1(DfBi8@<-HuB6.]sFE8R7F`MM6DKI"DF(KB5+E27<F_kK,+EV%)F(]'+Eb/`l
DKKi2Dffo=F(Jd#@qZusDfQt@ARf:hF<G13Bk(q!+E2"4FDl55ATVs(CghEsA9;6mF(]'+F!,R5
B6,29ASbdsARlp*D]gHR.3N_@B-:YlF(Jl)Df-\-Cisf@ATDL&B4kdtEb065Bl[cqASbq"AU&<0
ATT&6F`M%9ASbppASuT4FCf]=+C\o(G@b?'+DkP)A79RuEd8d<ASc'tBlmp,F(]'+Ec6/8FDYi)
@<>pjASu("@<?''@WZ*r+E(j7Ec6.EBQS*-+Cno&@:s.nF(KH0BleB4BleA=De:,%F`MM6DKI"D
F(KA>F!,(2Bk(q!+EM+9F(]'+F(KH4BQ&!2F)ki6F`MA@+EM+9+=M2CA901BAo_g,+F%a>+D,>(
AS5RrFCAg'B4Z0-@s)g4ASuT4F`V,7+EV%)F(]'+FDkr+DJ*O&+D,G(@r$*-5u:,qFDkr+DJ*O&
F`);0B4kddCh[s4+E(j7E+rg(F`M&7+EV:*F<G+4+Du+>+D>2,AKYE!Gp%3;B6.]sFEMV?Eb0?8
Ec*"BEblkA@;L't+CT=6FCf]=B4Z1-F(KB)ATT&;F(KA7Bl7O$Ec#6,Bl@m%ATW'9ATDa4@Vfag
B6%p5E-#Z'F<G!7F`V,7-Z^DLF^f0$@j#E)Dfp#?B4Z1-F(KB6@:sXoATT&2DeE]oA0>T(+E_a:
EcW@F@:sXoEa`j.Cgh?p@<?(%@s)m7+F/6XGqElM/S&B7BP9GEDE;i[+Cno&ATJu:F(oN)+D5_'
DKTc(EbTW@+Cf>#AS6%%F`;5,D.Rd"G][t7@rri+Ec6)>+DtV)ATJu+Ec5e;G\q81ART+YDe+-8
@;0P!E,961F!+m6Ch[s4+DG_8D]i_)@:UKiDe+,9@;]TuFCAm"+EM[7Ch[s4F(fZ4Cj'6-@WQ+*
FE1f"F<G7=D/:>6CgggbBQ%]tATAo:@<-'j@VfTuDIIBnF(fZ4E+rj(AU&<;@:OC%Bl.9kAKY\t
+=M2CA901BAo_g,+D>k6C`m>(Ch7[%D..'gAnc'mF)to/ARfh'+E).6Gp$g<@:s-oAnc'mF!,(8
Df$V*+C].sC`mY.+D,>(AKYl!D.Rd&D/aE6FCo?'@r$+(BQ&!2F*DY=FCfM9Ao)0kCN:P:BQ&!2
F!,16E,Tc=+EV1>F<G10Ch7=%D)!/IAfto(F*&O=F!,OGEbT$*Cj@.?Df0K8Df0,/Bl7F$ARTXo
DJ()#DIakD+E)@8ATE!/F(K',D/XH*ATD?m0d(1B+Dbb5F<G:=+EMXFBk)7$Gp$g=@rc-hF(oN)
+>=pVFD,6+GA2,0Ble66AS,Y$De=*&F*&O:DfQt>Eb/isG\gf0FDtZ$AMG<OBOu'(@s)g4ASuT4
G\q7>Eb0<2Df0W-+DGm>FD,5.CghC,+E1b%AKWZLDffZ(Ed)5=ASbjuEbTB4EbTA5Ch74#+=M&;
@:X(iB.4rOGV1Ef@q]:k@:OCjEcZ&2F*)&'Ci!['Bk;@%BleA=@;Ka&<+pDk@WP@^F`S[<@;Kak
EbT*+Ch[s4B45UmATE'.Bl%@%Ch[s4+DG\$B4W2tBl%@%+DG^9@3AN_F_tT/:i(8q+D5,!Ch7X4
Ch[s4Ch[d&F)to$Earc*D0[7G@:sX(@;]U/FCf]=+CT.u+ED%8F`M@BDfTQ)Bl7?q+Dbb0CER&'
A0>buD.RNtF*)J7FEMV?F)ki6F`MA@+CQC&C`mY.+E):7B5)6lC`me5H=^V0Bl.9kAKZ,9CiaE2
@:XV'AS+DJBk(q!<+pDk@WQ@(@:UKmCh[BpEZfF7F<G[=F_tT/+D5,!Ch7X4+Co2,ARfh#Ed8dP
Eb/j!Ddd1$Eb/iQAT)[!B4kddCi<`mF!,F8Dffn?Bk/b;CghF"FEM,*/0JbIDJ*[*F_#'"Ddd1$
Eb/iSA5m8[ATLUTD.RO%@:UL"BQ&!2+DG@;+EV=7ATJu&DIal-@;TQuG]IA-+EV%$Ch7F$@:XV'
AS+kTA56QMAOL*N@r-'lA0>r)F<G:./0K"FF<GI0D.P7@A7]glEbTK7Bl@l3G]IA-+EV%$Ch7F$
@:XV'AS+nUA5HuNCi<`m+B3#sD.7R*CiseABk/>uCh[BpEZf(,+CfG1F)rIEAS,LoASu!hCi<s#
DJ!^!@r$+$DeEd%+EVNEAo)0kCN:P+DIal1ATW'8DBO+2Ch[E&5u:,qFDkr+DJX6(Bl7m$Ec#r>
Ch@Kt@r$*-5u:,qCi<s#DBO.;FD)e9ATDX%F)u&6DKBW4B5)7(ART+]Ch[BpEZdYE8K_hfB5)6+
GA2/4+ED%%A0>i&Ec#N3F(oQ1F)5c-Bl7s&@:XM$Ch@Kt@r$*-5u:,qCi<s#DBO.;FD)e;ART*l
E+O',Ble?0Df0W5@;BFnBQ&!2Ch[d&F(]'%ATD4$ATJu)Bl[cpF<G7=D/:>2Bl7^-+EVNEAo)0k
CN:P:BQ&!2F)>?$AT2=$FDl2<GA))8ChI<sATD4$AKYZ.D/:>,DfQt3@:NsnEc6.EBl5&(De!p,
ASuT4FCAWpASkjkAT2Ho@qBLcEbfH-ChI<sATD4$AKYc*C`m>.EZeq%@qZutAT)[!B4kdd+E2.*
@qBLcEbfN#CLqQuFD##uCh7X4@rc-hFCfM9DfQt@ATMF)F!+m6Ao)0kCN:P=ATT&-@;KakEd;M1
CLqQuFD,c5ChI<sATD4$AKYD(F(oK1Ch4`&FDYh:F(KG9@rH7,ASuU2+ED%4DfTr;ARTUjF*);2
G@PQ.E-686F!,@3@<,q#F<G^DF(Jp#+Dtb)B4tamEc,f5Eb0E(Df0Z*@rud(Ch[BpEZek1DKK;s
FE8RHBOQ!*A8`T.Dfd+BARfFnEc5GrFCcRH+EV:.+C\c#FCB3#F)Go6F`(o5F_,H!D.Rd)BleA=
De:,0Df0]8BlS9,+DtV)ATMa-FEhh;An>L^F<GL6+=MIe.3NSDA9/l8BOQ!*@<,p%DJsV>G]IA-
ARlotDBNJ2DBL?Q/h([\Ci"04Bl.9kATMm'DIIBn+DG\$B4W2tBl%?'DIIBnF!,[@FD)e7F_kk:
>?r@\Ea`HnATVu9FDi:EDIRWp@r#XtARo^pG\q8=ATMs7+D,G(@r$*-;FOM`+ED%7F_l.BG\q7>
/KcbjB5_^!+>=pVFD,6+GA2,0DfTB"Eaj<9DfoQ'Bl7R(ATMF)F!,(/Ch4`2Bl.F&FCB$*F!,RC
+D#G#De*E%Ao)0kCN:P=ATT&5Eb&a%+DG^9FD5T'+E):2ATD^0BkM-t@;KXp@:s.fBl7^-Eb0?8
Ec,q@F`M:@@;]TuDIIBn+E(j7DfTQ)Bl7?q+E_X>Ddd0fA0>T'@:s.j@:s._G][t7@ruc7@s)g4
ASuT4E+*Bj+Du==@V'R&Ao_g,+F%a>+ED%7E,TW8AT2'jATMF-FE1f"FE8RHDffE(+E1b%AKYK$
F`):DAo_g,+F%a>+ED%7E,TW8AT2'lEaj&t@q9:oD..NrBOu6-Ao)0kCN:P0Bl%?'DIIBnF!,[@
FD)e-Ble60@<iu0D..'g+D,>(AKYl!D.Rd-@<-F#CghC,F`:l"FCf$.FE1f"F<GC.F*)PDA79Rk
+CTA6EbT!*FCcS<@;L'tF)YQ.F(K9-@rH7,@:OChF`\aND/:>5DBNG-DKK;sF<G.2ASl!rFE;D0
EcYf1DId0tATM@(F<GgFC`mY6+Cno&ATJu*Ch7HpDKKr=@<-F#Df03.Dfp#/F`\aND/:>5DBNS4
Dfp"AASbppASuU2E+*d.AT)I#D.dp1@q0Y'+D>k6C`mY6+A#9t+B)0*E+*d.AT)I*BQ&!2@s)l9
G\q7>Df-\:BQ&!2+D#A#D.RU,F)YQ.F(K9-E+j03Df]K3@s)l9G\q7>Df-\:BQ&!2F(KG9ASbpp
ASuU2E+*d.AT)I-BmO?#F`\aND/:>5DBO"7H=\41Ch7HpDKKr=@<-F#Df0Z*B4H(++F%a>+E)-?
FCAf)ASbppASuU2E+*d.AT2?oF(KT<Ea`I"+CT)&+E2"4FDi:9A0><&FE2))F`_1;G%#30ATJu+
Ec5e;G\q89@<-F#E,Tf>ARo@sFE1f"F<GO@F*(u(+CTA6EbT!*FCcS<@;L'tF)YQ.F(KE,A92=,
FE1f"F<G".C`m\1Dffo=ATT&/A9/l*Ec5e;G\q89@<-F#FCArrDIn'7Ea`I"+CT)&+EV%-ASrW$
@<?''@<?U3Bju4,AKZ/)Cis<1+D,Y4D'3@tFCfM9ASbppASuU2E+*d.ATV?rASu.$@;^4(@<-((
H"D5BEa`I"+EV%-ASu.$@;^4(@<-((Gp$O;FE2))F`_1;G%#30ATMg!EcYf6Bln0&F(KT<Ea`I"
+EV=>Ch4_tFEDP;@Wcd(+Eh10F_,W5@<-F#G%kN3F(KT<Ea`I"+CT)&+EhI1GB4m8FEDP;@Wcd(
+Eh10F_,V:Ao_g,+F%a>E+*j-@<-I(A9_g+A7^!.De:,2@<?U&Ec*":@<?!m+EM[7Ch[s4F)Yf2
FDl,4A92=,FCA[$+E2"4FDi:9A9/l*Ec5e;G\q89Bk29sEc,<&ASH!iB4W3"A0<:>Bk296+D,P4
+DG\$B4Z-,GA2/4+=MLa+DG^9DIIBnE+rj(Bl7HjCh[s4+E(j7Ao)0kCN:P:Bk29-FD,*)+CT;%
+DG^9FD,f6@W6.+F!,"%FCAWeF(K<)A92X,FD5W'@UaF%De:,(Ch[BpEZf(5@:s.m+EV:*F<G"4
AKYl/F<G:8+Cno&@:EYdAT2?oF)Go<G]IA-ARo7l+E(j7Bl.9kATJu9BOQ!*@<,p%DJsV><+pDk
@WQL)F`T3JCh[BpEZek4Df]tBEb/ioEb0,uARoauF*)PFCiF<6F<G[D+E_^@+CT.u+ED%8F`M@B
Eb0<2Df0W-+CT=6FCf]=E,ol6E--;EBlmp-+EVNEF(96%ASrW!DIal1ATW'8DK?qCF(KA>F!,L7
F)Z&8F(KB'@:V'4ART*lF`8IFD]ghkCER50Df$V<De!QoF<G"0A0>AqARfKu/Kf(FEHPu9AKW@A
De!QoF=/1S-n6Z//g,4GEb/a(+EM('BOt[hEb/Zi0k#$?ASu$$-urm-A2#GTEb0<7CigeAD]iJ/
B6A'&DKKo1B45akBl%@&Bl.F&Eb0<'FE8R:Bl%?'FD5T'F!,(5EZf4-FCSuuDJ()(Bl%@%+DG^9
Df0,/A8-'q@ruX0H#dJ5Df0K8Df0-,ATMs3Eb-A7FE2)*FDQ4FBl7F$ARTXoDJ()/Df0K8Df0,/
@:jUmEZf(6F(KB6Bl@m1+CT@70QV8GD/X<1FDl&.11P6?G%G]9F!,17FCf)rEZf14F*)IGGA2/4
+>@jZFDi:CFE2)*FDQ4FBl7F$ARTXoDJ()5AT;j(DI[7!Eb0*+DJsW8DIkV6Df0`0Ecc@FBl8$(
B4Z*+Ch[s4F!,[@FD)dNF!,RC+EMXFBk)7$Gp$sBDJsW8DIjr)DI[]u@<6.#B-:o+FCf)rEZfF7
EHPi1@qB_%ATMF)Anc'mFD5T'F)ki5ATVu9Anc'm+EV=7ATMm'F(KH+@;KakEd;\:F(KH7+D5,!
Ch7X4+DG\$B4Z.)AThR%DKK;sFE;&1Bk(q!+Cf>-FCA[$F!,R<@<<W4ARfFnEc5GrFCfK(G%Pc/
ASu%"Ao)0kCN:P-Df0Z*@ruc7FD,*)+DkP-CERJ*+CT=6Ao_TsDIdd)E,oN%Bm=Z0D/XT/+E2@4
AncL2@<Q3nEcQ)=AoD^,@<<W.@<6N58g%\cEc5t@D.Rd0@:s-o@;]TuF('6'+DG^9ATDg0EZf1:
@ps1bF(Jd#@q]LqDfp#?F(Jd#@q[!(F^f0$@j#B"Bk(q!+D5_5F`8IFBln0&F!,R<@<<W%Df0Z*
Bl5%AGpskXAU&<<ARTUhBPh=%ARTUhBHUo*EZf4E+D,G(@r$*-E+j03Df]u2@<,jkE+j03Df]u2
@<,jk+D,P4+D,G(@r$*-E+j03Df]u2FCo?'@r$*qEbT].Ci<`mF!,(2Bk(q!+F##NBQ\0$F!,^J
AS*&nDIal2ATVu9E+*j%+Du+?DKBl1FDl21ATDj'F<GLBA7]d(@;]t$FCB9*Df0W;ATW!2Dfg5E
AS,LaCh[s4F!,=6F)u&5B-:Da+DG\$B4Z-,Ao_g,+D,G(@r$*<FD,f6@WNZ:Eb/j(Bk1grDIIBn
F(KG9Bk/>7F(o/6+D,Y4D'3n2F<GI0D.Rd&B5V-uB6A'&DKKr@BkM=)+D,G(@r$*-@<-"'D.RU,
+EMXFBl7R)F(o9.FE2)5B4bso@r$*-F(o9)@<?X4AKZ&9EbTE(+D,Y4D'3\,FD,T'+CT;'F_t]-
FE;M;B6/08Bl7Q=Ao)0kCN:P=BkM<lFEMV8+EMXFBl7Q+Ao_g,+E_^@+CT;'F_t]-F<GXHEbTE(
F)>?%CiF*!F)Yf2FDi:9A9/l*DfQtAD..6s+CfG1F)rIEAS,LoASu!h+DG\$B4Z.*Dfp)1AT`$0
Ao_g,F(or3Eb0?8Ec*"@Dfp)1AKZ,9Ci^_2Ec5e;E+j03D]j+8H=_/:Ch\!6Eblk;@<-F'DJ()7
FD5Q*FEnu\+EM+*+=Ll6FEMV?/0JS:FD5T).<BK<Ea`HgBl\6*DIIBnF!,(/Ch7Z1F)N1*>p+'+
+FAMZ@;p0s@<-E3@V'.iEb-A8BOr;tG][M7F(oQ1F`(o<E+*I$F(TH7Bl.F&DfTB"Eb/c(E+O'(
De'u)DKKH1G%#3.+D,Y4D'3P1FCf)rEZfLBBm:bBBl.F&F`)8?Bl.9kATMR&@:s-oAnc'm+DtV)
ATJu<Bln$,F`\a1>pq.KI<BL>@<?'mBl%@%F`:l"FCcS6BQ&!2+CT.u+E2"4FDi:9DJ!f0Anc'm
F*2G4@<?'mCh[BpEd2G;F`:l"FCcS6BQ&!2+CT.u+E2"4FDi:9DJ!f0G\q7>Anc'mF*2G4@<?'n
AT)3iCi!['H$+(:@<?(%+EV:.+EV:>D.7I#F`SZQ7qHU\@:s4aA1&L4@;KakEd;eHA79RkB4Z!s
D/=?6A79Rk+D58(FCAfpARloqCh[BpEZf(5@:s.mF`:l"FCf0(AoD9qCh7a.A79RkF!,F8Dffo=
+DG_*DfT]'FD5Z2+D,>(AT_s&@<?(%ATVU-D/=6(B4YslEaa'$F!,.<D/:>9ATT&)Df0Z.DKI"5
Bl%@%+DG^9F)>?%C`mG/@:s-oA8-'q@ruX0Bk;@.E+EC!ATM]sCi"3,F_tT/A8c[0Ci<`mF!,O@
@;Ka&Ao)0kCN:P=ATT&/D..'gF!,RC+EV:>D.7Q/A8-'q@ruX0Bk;@.E+EC!ATVU.D.7R!@;Kak
EbT*+F`:l"FCfM9FD,f6@WQL)F`S[;Ch[BpEZfF7F<G4)Ci!['Bk;@.F(KB%Df'?&DKKr?ARf:h
F<G"%FD5o4FEo!IDBNn3Dffo=+Cf>,D.RU,ARlp%DBND6+EV:.+CehrCh[d"+E_a:Ed(r+FE_/-
F<DuW/h%oaARfXrA9/kF+D,P4+D#e+D/a<&+Eq7.F<E>_B4Z1(Df^#CEbo]5F*&O8@<>p#FDi:E
Ebor4ATW'8Ci!g$AKWC6ATW'8CagK9F`\aKF(KD8G@tK/H!tQ,ATD:!DIdI'Bl@ltC`mqBBlmo/
D.Rd0@:s-oFDi:CATMp,Df-\7@;]LdAT@                                         ~>
)
showpass 0 8 put ". ".'zz_',SOLOCALE,'_' [ cocurrent 'base' NB.{*JOD*}
".soclear NB.{*JOD*}

cocurrent SO__JODobj NB.{*JOD*}
zz=:dec85__MK__JODobj 0 : 0
1,^72+>P&o0d&2.0esk+1a"e53?U%9+>Gi43,N)>ARB%cBk(q!:-pQ_D..3k?Y4+g@r$*-F=f'e
D..3k+D,G(@r$*-Ci<`m+EM%5BlJ/H%15is/g(T1:-pQU8T&$YASl!rFE8RJATDj+Df-\+DIal&
ASu("@<?(%+D,G(@r$*;Bkh]3Ci<`m+EM%5BlJ/H%15is/e&._67sC(ATD6gFD5SQ+EDUB+CT=6
FCB<6Des?)Gmt*U67r]S:-pQU+<Y]9EHPu9AKW@8De(4)$;No?+<VeFA0<rp-Y@1/@r$*-F`_>6
F!i(Q:-pQUDfB9*+DGF1DIm<hF)tc1Gmt*U67sB'+EDRG+=D#7CLpjbCh[BpE[MtP+<XEG/g,1W
DBO"BDfTE"+EV19F<GX7EbTK7+CT=6FCB<6Des?)Gmt*U67r]S:-pQU@<H[*DfRl]8oJB\+@Ih)
6=FY@EZcJ6$;No?+CfG'@<?'k3Zq4.FDkW"EZd+k0Js:H:-pQU/M/P+/M/P+/M/P+/M/P+/M/P+
/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/I`%^67sBj
BOPdkARmhE=]nm1025.o6pr.L%13OO:-pQUGAhM;+DG^9@3BZ4@<6*)@r,RpF!,C1C1Ums%14[>
+=K?"FE1f2BK8(#.3N1S+Cf>-C`kD@$8EZ-+Cf>"CghC++=D8O@<6*B3@>7C%17,eEHPu9AKW@B
@<633%13OO4tq=2FE1f2BK8(#+D58-+?MV3Eb/Zi+Eqj?FCcS:F*(i-E$048Dg-//F)rI9Ch[Bp
E`Pn&+Eh[>F_t]2+CT)&FE2)4+E_a7A9)C-AKXuO6:=^C<^g%b9N=eU+A,Et6:"7C6W-KP<)Y.R
$4R>;67sBmCh[BpEZfF5EbTK7+Co&&ASu%"+E)-?B45UmATE&*$?BW!>9G;6@j#W0B-:f#Ch5@L
4Y@joCi^^HB45UmATE&D%13OO:-pQUBl7F$ASl!rF<G%8Bl%<2+EMXCEb-A(@<?&i$8EZ-+EM47
GApu3F!,(2Bk(q!<_YtF3ZohX14:ceCh[BpE`Pn&.4cl23ZpU@HY.).@r$*c9ggElFE;P4D/^jM
%159QHREoU@<6*B3@>qgF`\`RAo)0kCN<HM6miEN%15is/g,">CLnW)Ddd0!F(96)E--.1$?BW!
>9G;6@j#W0B-:f#Ch5:J4Y@joCi^^HAo)0kCN:d3$?BW!>9G;6@j#W0B-:f#Ch5=K4Y@joCi^^H
Ao)0kCN=K-FED57B6,F0$4R>;67sBhFED)2E-*4HEbTW,+EVNEF(Jj"DId0rGp$*c66L&TGp"[]
BkM=%Eb-A)EcQ)=Et&J#EbTW,F`V"T3Zp4$3Zp*c$>F*)+<slb6:=^P4Y@k"F(/[#Bm+&1-RU$I
D_;J++<Y`=Dg-//F)rHOF('6'+E)-?F`V"7A9)C-AL@oo+<W%DBl%?7+D,>(AMG<>Bl%?9-Ts()
GqKO5+<YfJ@W5atBK[sj<Du4P;H>>@:IIN892e2U8PiAb%144#-urm-A0>JuCh5:L+=MGSBlmo/
3]\Bj0fga+F(fK9E+*g/+E_a7E+*j%/14\7Ch[BpE\;'@F!hD(+<W(QART*lAnc'm0e"4nGB.D>
AKX#p+C?ia.3N\FDg-//F)rIHF(0)sFD*3Q>\7ed@r$++ATW$.DJ+#CBkh]:%144#-urm-A0>Ju
Ch5@N+=MGSBlmo/3]\Bj0fga+F(fK9E+*g/+E_a7E+*j%/14\8@;KakEd99OC3(a3$>"$pAM+E!
+<Y`=Dg-//F)rHODJpY?F(-8&EbT].-OgDoDIb@/$8Dts.1HUn$?pN)FCfT9@N]8sCh5:^Anc'm
0fqL0Bl%?9%13OO@rGk"EcP`/F<Dr?@<6!-%16T`ATD4#AKX)_FE1f2BK8(#%13OOD..3k?Y4+g
@r$*N:e=DK/h1^HCLpjbCh[BpE^<Mn+ET1e+DkP&AKYT$Bk(q!5u:,qCi<`m+EM%5BlJ/H%15is
/g(T1:-pQU8T&$YASl!rFE8RJATDj+Df-\+DIal&ASu("@<?(%+D,G(@r$*N:e<9RC3(M6Ddd0!
F(96)E-*]A$;No?%15is/g,=KEaiI!Bl,mREcl7B@<3Q5@<H[1Ci<s3%15is/e&._67sB'+ED%5
F_Pl-+=CoBA1%fn:-pQU+<Y]HF<DrJ@;BF]Ao)0kCN;^;8LGW'+AP6U+EDUB+EMXCEb/c(FCfN8
+EM%5BlJ/:@<3Q5@<H[1Ci<s3%15is/e&._67sBhF`_;8E]P<c8oJB\+@Ih)6=FY@EZcJ6$;No?
+CfG'@<?'k3Zq%;DIjqG0JGEp$;No?+>#/s/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+
/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M.D=:-pQU@q]:gB4YU7+>PW)2f<PW
0fU9u/M/)aDfTr2A0>u4+DNee0JX(E%15is/g,@VEbce3DBN@1FE1f2BHUf$@<6K4DdmHm@rr.e
/M8.o4=>5k@<6*B3@?6uAM,*8Df0A60F\A!De!TlF)rHOFE1f2BK8(#%13OO4tq>%Df7ck+Co1s
+>=634tq=>+E(d5-RT?14tq>%A0<rp-Y@1/@r$+-F<G^JBl%i<%13OO4tq=2FE1f2BK8(#+D58-
+?MV3Eb/Zi+Eqj?FCcS:F*(i-E$048Dg-//F)rI9Ch[BpE^<Mn<_Yt0%13OO:-pQUD..3k+Dbt)
A0>r'EbTK7.!$gH$?BW!>9G;6@j#W0B-:f#Ch5:J4Y@joCi^^HAo)0kCN;^;8LFrS%15is/g+kG
@rc-tASuT4@WcC$A1SjEFDl22+Cno&AISu$+Bot0D/XQ=E-67FAo)0kCN;^;8QJPR4ZX]6?S[$^
Ao)0kCN;^;8QJPR.4cl23ZpU@HY.).@r$*N:e=\^6n(3>F*(i-E$m"B$9g.j-ZjB;F(dQo-QmAN
F<DrCCh[BpE^<Mn<_Yt0%13OO4tq>%A0?:QDf9P:>9G^EDe't<-OgCl$=e!aF`MM6DKI!K@UX=h
-OgDmDe3rtF(HIV-ZjB;F(dQo-OgCl$>j3eARB%cBk(q!=EJ5!D.7Q]67sa)@;BF]Ao)0kCN<O!
BQ\0$F!,QV/Ken=CLnW#Ch[BpE`dEsF_tT/+Dbt)A0>r'EbTK7/e&._67sAi$;No?+A$H\Eb0*!
DKKqBG%G]8Bl@l3@;]TuB4YslEaa'$F!,(2Bk(q!=EJ5!D.7Q=Bkh]3Ci<`m+EM%5BlJ/H%15is
/e&._67sC(ATD6gFD5SQ+EDUB+CT=6FCB<6Des?)Gmt*U67r]S:-pQU+<Y]9EHPu9AKW@8De(4)
$;No?+<VeFA0<rp-Y@1/@r$+-F>Ya/+E_d?Ci_Hf1aaCg:-pQUDfB9*+DGF1DIm<hF)tc1Gmt*U
67sB'+EDRG+=D#7CLpjbCh[BpE`dEsF_tT/-QjNS+<XEG/g,1WDBO"BDfTE"+EV19F<GX7EbTK7
+CT=6FCB<6Des?)Gmt*U67r]S:-pQU@<H[*DfRl]+A-QcDBM>"+@9LPATAn9%15is/g+YEART[l
A3(i*F`(b51,(C@%15is/g)_t/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+
/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/O`$;No?+Cf(nDJ*Nk3Zp130K3lfFtkou/KePA
DK]T3FCeu*A8,OqBl@ltEd8d;De*E%FDi::2D-[=%13OO:-pQUGAhM;+DG^9@3BZ4@<6*)@r,Rp
F!,C1C1Ums%14[>+=K?"FE1f2BK8(#.3N1S+Cf>-C`kD@$8EZ-+Cf>"CghC++=D8O@<6*B3@>7C
%17,eEHPu9AKW@B@<633%13OO4tq=2FE1f2BK8(#+D58-+?MV3Eb/Zi+Eqj?FCcS:F*(i-E$048
Dg-//F)rI9Ch[BpE`dEsF_tT/<_Yt)G&M2>D.Rc2@;Kb%EbTA5F`V#&EbT].+B;?,6rHTW7932X
<D>n)8l%iA5tb-D;Fs\a;^W"]%15is/g,">CLnW!AT23uA7]Y#Et&Is@j"tu-ZW]>D0'>4Anc'm
0IK"9+Dkq9+=Cc;Bk(q!5u:-#%17,c+Bos9Eap5/F(ZV-Bl%?8-Ts()D/=89-YHk(Ch7X4-OgE'
@j"tu-ZW]>D0'>4Anc'm1+,4;+Dkq9+=CrACaTZ!%15is/g,">CLnW)Ddd0!F(96)E-*LL.1HW)
@j"tu-ZW]>D0'>4Anc'm1FG=<+Dkq9+=Cc;Bk(q!=EJ5!D.7Q6%17,c+Bos9Eap5/F(ZV-Bl%?;
-Ts()D/=89-Y@1/@r$*eFD,f6@WQU%FED57B6,F0$4R>;67sBpDI[]uD.RU,+C]J-Ch,(>F*)>@
AKYMlFCbmg0d'[CF)>i<FDuAE+D,G(@r$*eFD,f6@WPRE6p3RR-sn`X/nSp6@r$*eFD,f6@WPRE
6n'Z84usfM0mdMKBk(q!=EJ5!D.7Qe9ggElFE;P4D/^jM%159QHREoU@<6*B3@>qgF`\`RAo)0k
CN<O!BQ\0$F&l"'-OgCl$;No?+CTA6ASlC.+Eqj?FCcS:D]j+4@rH6q@<-W9<Du4,CLqc6/Keb?
DJsQ,+D#S6DfTn.$?pN)FCfT9@Qcap1E\_$0F\A'AhG2N<Du4P;H>q5+E_a7A9)C-AKW?J+CoCC
%144#F)>i<FDuAE+=D5=G%De7DBO(C@N]3%Bm+&8%144#-Y@(/AM>6=Bl%?8+D,>(AMPB?Bl%?:
+D,>(AMbbt/g,EK$6UI6F(0)sFD*fi+B;?,6rI&:8l%iA5tb-D;Fs\a;[j'V+=M8A@:UKmBl%?7
.3L$_EbTW,+?DP+?SOSj+EM47GApu3F!,UH@W5atBIkN9Ao)0kCN;^;8M4^lF!hD(+<W(QART*l
Anc'm0e"4nGB.D>AKX#p+C?ia.3N\FDg-//F)rIHF(0)sFD*3Q>\@J]Ch7X4/no'A-OgD*+=M8A
@:UKmBl%?9.3L$_EbTW,+?DP+?SOSj+EM47GApu3F!,UH@W5atBIkN9CMdl?Bkh]:%144#-urm-
A0>JuCh5CO+=MGSBlmo/3]\Bj0fga+F(fK9E+*g/+E_a7E+*j%/14\7Ch[BpE`dEsF_tT//no'A
-OgD*+=M8A@:UKmBl%?;.3L$_EbTW,+?DP+?SOSj+EM47GApu3F!,UH@W5atBIkN9Ao)0kCN<O!
BQ\0$F)to7FD5W*F"V0AF!hD(AScF!/e&.1+EM47GApu3F!)iJD]j1D@N]3%Bm+&8%16ZaA1e;u
0b"I=%13OOGB.D>AT`''+D,>(AM?2XBl%?84(`2CAMQ>ZBl%?:4$7+hCh5F4$4R>PDe!p1Eb0-1
+=CW,F(H^.$=e!cEaa$#+?V#nEaa$&3B8Gr$4R=                                   ~>
)
showpass 1 put ". ".'zz_',SOLOCALE,'_' [ cocurrent 'base' NB.{*JOD*}
".soclear NB.{*JOD*}

cocurrent SO__JODobj NB.{*JOD*}
zz=:dec85__MK__JODobj 0 : 0
3&Da<+>Y,p2]sju1Gh!40eje++>Y].+>P\p1*AA10d&21+>P&r3&;[33?U("1bg[,3?U("3B8c9
0esk,+?;/7+>Gbs1*AP81*A;-+>P&o2).*f:K(4g9LN6"Ch[BpE^<Mn1,2Nj/h0[n;cI+9Ch[Bp
E^<Mn+>#/fE,Tf>@;TIiAKYT'EZet1Bk(q!5u:,qB6%p5E"*-`$;No?+EM+9+CT/5+DkOsBPD?q
+EML5@qfOh@j#i(FED57B6,2-DfQtBBPDN1B6%p5E"*.jDdd0!-Y@1/@r$*N:e>_>FED57B6,F0
$4R>;67sC$ATW'8DBO%>+C\c#AKYhuCLnW#Ch[BpEa_718K`1fEaj)4@<Q'nCggdhAISuVDe!p1
Eb0-1+=CW,F(H^.$=e!gDKBB0F<D\RAo)0kCN;^;8LFrS%17/nDfp/@F`\a<Ch[BpE^<Mn<_Ysk
$?L'&F`_SFF<G(,ARfLtDeip%+EVO;?Z^.(?TgFm;FNl><)6.U:1%ULBk(q!5u:-[%13OO:-pQU
FEMVA+EqL5FCcS9E+*6f+E)-,$7InX3]&Q?+>F<4:et"h?Y4+g@r$*?0ht%f.Sro><*s6RBk(q!
+>#/fE,Tf>@;TIiAKYT'EZet1Bk(q!+D5_5F`7cs%15is/g,4HF<G"0Gp$s4@q]RoAKZ&5ARfFd
Bk&9,ATW$.DJ+#5AoD]4FD,B0+D5_5F`7csCi<`m+=Cc;Bk(q!F(KH8Bl7R)-OgCl$;No?+ED%8
F`M@BFDi:2@<6!&D..3k+D,G(@r$*-G%G]'F!+n7@;0Od@VfTb$=e!aF`MM6DKI!K@UX=h-OgDm
DeX*1ATDl8+=Cc;Bk(q!-OgCl$?Km!GApu3F!,(2Bk(q!<_Ysk$?Km!GApu3F!+t+ARfLtDeip%
+EVO;?Z^.(?O[>O$;No?+EVaHDBO.:Blmo/F)YPtAKYo/%14LD+Z_G7.3L>S$;aMs<*s6RBk(q!
5u:-oATW$.DJ+#G0b"Ib67sa,Df^#/D.7<m+EK+d+D,G(@r$*N:e>_>FED57B6+Lh%15is/g,7L
AKYf-B5)6+FDkq;BlbD:F_Pr/+EMX5@VfTuAo_g,+Cno++EVNEA79`m$;No?+DGF1BlkJ3F!,+6
De'u)F<G.2Bl.R%@<?(%+EV:.+EV1*BlA-8+Dbt/Bl5&7FCfD#$;No?+EM+9+EV:.+EMgLFCf;3
FDi:BART*lDf0B:+EMX5FEMXW%172qCL;1#E*kah;FNl><)6.U:(7O>$;No?+EM+9+@/gq+DYP6
+>"^I@:NsnAo)0kCN:P?F(KA7DImBiF!+m6A8-+,Bl7F&+DYP6%15Qu8OH-K5u:-G79Mc7+<VdL
+<Ve$=[l(V6VC<C:e=;K=Ub^-9M%TE;H$+P;FNuP770sA<'<8b9j'qZ8OH-K;b02P77:'C6W-?P
%13OO:et"h?Y4+g@r$*eFD,f6@WO:Z:-pQ_:et"h?Y4+g@r$*eFD,f6@WNYD/Kf"NF*(i-@VfTu
AoD]4Ao)0kCN<O!BQ\0$Et&Hc$=e!aCghC++=Cc;Bk(q!=EJ5!D.7Q6%13OO:-pQUF(KG9@;^?5
D.-pfBl7K)F)Y]#BkD'h+EM+9FD5W*F!,(5EZfI;BlbD0Ec6)>%16oi@:UK.Ao)0kCN<O!BQ\0$
F)to7FD5W*F!hD(%15is/g+YEART[l+Dtb#ATMp$Ed8dKF^f8uC1UmsEt&IdEb/[$AS,am@r$*N
:e;d>Df0-1+=Cc;Bk(q!5u:-#%13OO:-pQUEb0?8Ec*"AD]iLtF(HJ2@;BEsAo)0kCN<O!BQ\0$
F!,X;Eaj)4@<Q'nCggdhAISuVDe!p1Eb0-1+=CW,F(H^.$=e!gDKBB0F<D\RAo)0kCN<O!BQ\0$
F!hD(%17/nDfp/@F`\`R7VldKCN:P"+B3#sD.7R*CiseA<HMqkBln'#F!hD(F)>i<FDuAE+D,G(
@r$*eFD,f6@WPRE6k'KED/XQ=E-67F@q]F`CNOK1ASrV[9M%TE;H-Fb78=s7$4R>;67sC&F`M@B
GA(]4AKZ&5@:NjkDf-!k-oiG31bgF%0b"Id:K(5"Ao)0kCN=K-FED57B6,g_%15is/h1gYF*(i-
@VfTuF"JsdAo)0kCN=K-FED57B6+Lh%15is/g,7LAKYf-B5)6+FDkq;BlbD:F_Pr/+EMX5@VfTu
Ao_g,+Cno++EVNEA79`m$;No?+DGF1BlkJ3F!,+6De'u)F<G.2Bl.R%@<?(%+EV:.+EV1*BlA-8
+Dbt/Bl5&7FCfD#$;No?+EM+9+EV:.+EMgLFCf;3FDi:BART*lDf0B:+EMX5FEMXW%172qCL;1#
E*kah;FNl><)6.U:(7O>$;No?+EM+9+@/gq+DYP6+>"^I@:NsnAo)0kCN:P?F(KA7DImBiF!+m6
A8-+,Bl7F&+DYP6%15Qu8OH-K5u:-G79Mc7+<VdL+<Ve$=[l(V6VC<C:e=;K=Ub^-9M%TE;H$+P
;FNuP770sA<'<8b9j'qZ8OH-K;b02P77:'C6W-?P%13OO:-pQU6$.3W@qZupF`MM6DKI"3EbT].
+DbV2FCfJ8FDi:@@<?1(/e&//ATVO#Bk(q!A9)C-AKW@AA1)>:C1_9r@r$*?0ht%f.WBECAo)0k
CN:P=/M/)WCh[BpEZf=ADe`inF<GX9FEMOT%15is/e&._67sBhF`_;8E]P=8DeO#26nTTK@;BFp
+<V+#:-pQU@rc-hFCeuD+@1-_F`VXI1,(C>%15is/g)_t/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+
/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/O`$;No?+Cf(nDJ*Nk
3ZqR.=]mCP9eSn&+>"$0%17,eEHPu9AKW@2AR]dp+EMI2CLqT1FCB6++Co"1%13OO:-pQUD..3k
+EMI2CLqT1G%G]'F!,X?F(o*"AKY])+C\c#AKYf-@ps1b%16T`Bl8!'Ec`EOC3+<'CLqT8%13OO
:-pQUCi<flC`me/EbTK7+Du+?DK?p0$;+)^7oE/jH=&fr+<W%DCh[BpE[M;'8l%iF;G],UH=&fr
+=Cc;Bk(q!F(KH8Bl7R)-OgDT:II]N:buI)?TgFm-YHk(Ch7X4-OgCl$;No?+E2@>C1Ums+EM47
Ecbf6FE7lu@:rqn?TgFm+A,Et7oE/1@:Wn]Ec;Hp@:q?&H=&fr+A,Et7oE/=-=LFqB6%r#$=mdV
H=&fr+<X9P6q:-O-=g\(B6%r#$=md)?[?'B3Zq$j6q:-O1+$OCChId-%17,t?[?'B3ZoP#-?=3M
%13OO:-pQUB6%p5E$0@CEb$;6BQ%p5+D#e:Cgh3iFD5Z2Et&IiB4#sl4ZX]i3Zr*PE,KJ7><3mT
/g+eIE"*-`$;No?+ED%*ATD@"@qB0nB6%p5E$0@CEb'56DJsV>Bl5&+Ec6)>%16ut?[?'B3Zp4$
3Zodu@;Kb#AS-!++FPjbB5T.@/M8/YDETTpB6%r68l%iF;G\_M$4R>;67sC)DfTB0+DG^9B6%p5
E$0:EBl7Q+@3Bc4Eb#UdF_>'-?TgFm1E\_$-[@<eF`V,)@X0)E/g+eIE$.bK6q:-O-OgCl$;No?
+D58'ATD4$AKW<BF('6'+Dbt)A0>r'EbTK7%17/h?[?'B3Zp.5+?CVmD/=898l%iF;G\K?+F,Re
%13OO:-pQUE-67UG]IA-+Dtb7+EqaEA9/k&$:IZW<D>nW<'sGU9gMNB?[?'B3ZoekBQ&*6@<6K4
E,m'K-[U;;IXNRk-OgE(BQ&*6@<6KsH=&fr>p*>o0d/S5-8H#;%17/iDg-//F)rHOAo)0kCN:P:
Ec5](@rri7ATW'6-OgCl$4R>]Eb]3&Bk(q!5u:-.0ht%f.WBECAo)0kCN;^;8K`(+/KeYABk(q!
5u:,qE,ol3ARfg)F(KH9E%VS,:-pQB$;No?+CTD7BQ%oP+<X9pBPnq\/g*JhCLqN/+:SZQ67sBj
Eb/[$ARmhE8p,#_+>PW)2[p*h67sB4/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+
/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+%15is/g+Y;@;]^hA3(hg0JGG'Dg!li
+>#/f@rH7.ATDm(A0>u4+DNee0JX(E%17,eEHPu9AKW@2AR]dp+EV%5CF9Pu%15is/g+tK@ps0r
F(96)E-*4?Dfor=+:SZM:II]N:g\NU4ZX].-Y@1/@r$*N:e<#D$4R>;67sC"Ec5](@rri7BQ%p5
@s)m7%16NV?[?'B3ZoP;:II]N:aTU]A7oq%%16WY?[?'B3ZoP;:II]N:aT^aChId-%17,t?[?'B
3ZoP#-?=3M%13OO:-pQUB6%p5E$0@CEb$;6BQ%p5+D#e:Cgh3iFD5Z2Et&IiB4#sl4ZX]i3Zr*P
E,KJ7><3mT/g+eIE"*-`$;No?+ED%*ATD@"@qB0nB6%p5E$0@CEb'56DJsV>Bl5&+Ec6)>%16ut
?[?'B3Zp4$3Zodu@;Kb#AS-!++FPjbB5T.@/M8/YDETTpB6%r68l%iF;G\_M$4R>;67sC)DfTB0
+DG^9B6%p5E$0:EBl7Q+@3Bc4Eb#UdF_>'-?TgFm1E\_$-[?hWF(JlkGp%Mf+D5_6+A,Et7oE/2
%13OO:-pQUB4YslEaa'$+=84P@<Q3)Ci<`m+EM%5BlJ/'$?KieH=&fr+>GYp3ZoeeCi^^k:II]N
:`rsbGpa%.%15is/g,+UF>%lZAS*J9@r,^bEZet7Df$V+@<6!2+Dbt)A0>H.FCB'/+Cf4rF)qct
6r-0M9gqfV6VgEN5u'gTH=%dX3Zp+!3Zp*c$?L'&F`_SFF<GOC+=DMb:4@U=%16Ze@<6!&-[U;;
IXNRQ$?L'&F`_SFF<DrCCh[BpE^<Mn-Qm&5F<DrXISP??-OgE(D/XQ=E-67F-QjOYISP;u?Y44(
%14Nn$4R=O$?L'&F`_SFF<DrCCh[BpE^<Mn+E2@>C1Ums+EM+9F`8];$4R=O$?1$#Ao)0kCN<O!
BQ\0$F##IF67sa,Eb]3&Bk(q!=EJ5!D.7Q/F"JsdAo)0kCN<O!BQ\0$F!,FBDe`inF<GX9FEMOT
%15is/e&._67sBhF`_;8E]P<c8oJB\+@Ih)6=FY@EZcJ6$;No?+CfG'@<?'k3Zq%;DIjqG0JGEp
$;No?+>#/s/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+
/M/P+/M/P+/M/P+/M/P+/M.D=:-pQU@q]:gB4YU7+>PW)2f<PW0fL4,/KePADK]T3FCeu*@rGmh
+EVNEC,R[u1(=R"$?B]tF_Pl-+=C]2@Wc<+FCB6+-OgCl$;No?+Dbt+@;I'-@rc:&F<GI>F`)7C
%15^'6q:-O?[?'B3ZoOmAo)0kCN<O!BQ\0$F!hD(%15is/g,+RDe`inF<GX<DfTr0F`_[6$=RRS
H=&fr+<X9P6q:-O-=LFqB6%r#$=mdVH=&fr+<X9P6q:-O-=g\(B6%r#$?C5qH=&fr+<WEdEccC4
$4R>;67sBnEc6)>+EqaEA0>r,DfTqBAU&01@;]LqBl@m1%16c]?[?'B3ZqWf+D>S1DJUG"3Zri'
+D5_6%13OO:-pQUEb/ioEb0,uARlorEc6)>+EqaEA9/l2Dfd+9DBNS4Dfp".$>t)qH=&fr+>Y-$
+=ARGCi"-'Aof(;I4cXTDCH\[/g+eE4Y@jiEc<-n:II]N:aZ\Z%15is/g,@VEb'56Bl5&+Ec6)>
+E_a>DJ()#+EqaEA.8lgB4#sl4ZX]A+?CVmGp%6NARo7q+FPjbB6%r68l%iF;G\_M$4R>;67sBn
ASu("@<?''-6RA<G%De4Ddd0!F(96)E-)NrF(\j+?TgFm1E\_$-Z*[@+A,Et7oE/+>9J2=%13OO
:-pQUE-67UG]IA-%15L!6WHiL:/jSV9hdoK6sk7I+?_b.0H`D!0F\A1D/XQ=E-67FE,m'KH[\_=
I4#I2ATD4#AKW@IISP??-OgD1Ao)0kCN<O!BQ\0$F!i)CATT%BH[\_=I4#I2.1HUn$4R>`D/XQ=
E-67F-Y@1/@r$*eFD,f6@WNZ2Ec5](@rri7ATW'6-OgCl$4R>`ATVO#Bk(q!CLqd41,2Nj/h1pR
FCo?'@r$+#AU/>>F"JsdA7]@eDIml3@rc-hFCf'#Bk(q!5u:,qGA2/4+DlBHCLqd4/e&._67sAi
$;No?+<V+#:-pQU@<H[*DfRl]+A-QcDBM>"+@9LPATAn9%15is/g+YEART[lA3(i*F`(b51,(C@
%15is/g)_t/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+
/M/P+/M/P+/M/P+/M/P+/M.D=:-pQU@q]:gB4YU7+>PW)2f<PW0fL4,/KePADK]T3FCeu*@rGmh
+EVNEC,R[u1(=R"$;No?+E)F7EcPl)AKZ)5+D>J"AKYi8+EM+(F`M2<Gp$m6H#jE%@rc-hFCf'#
Bk(q!5u:-[Ao)0kCN;^;8RFVA1E\_$0F\?u$;No?.V!L1@<?'mCh[BpE^<Mn+Ef=g+DG_-FD50"
BmO>5Ao)0kCN;^;8K_q\C1UmsF"Rn/:-pQB$;No?+Dl%7@:VDA+CfG'@<?'mCh[BpE^<Mn+C\bh
Cdr5T@r$*N:e=GlC1Ums%15is/e&._67sB'+AP6U+EM+9F!+n-C`mY*C1Ums+E1b0@;TRtATDi7
FDi:@ATDj1DII?(A7]@]F_l/@%15is/g)8ZCi<`m+=Cc;Bk(q!5u:-#%15is/g)8ZAoBgb+Cf>-
ATo7EAo)0kCN;^;8LFrS:-pQU+<Y07ART[lAo)0kCN;^;8RGh:D]iY1%15is/e&._67sBkH!t5E
+<W(BCef%cA34:;5u:-gAU-@ICf=8D@rc.&4(E)+Deip%.3N,@ART[lAo)0kCN;^;8K_JN@r+VN
Bk(q!5u:-K@VTIaF:AQd$;No?+AP^3762Q5D]iV/@:F%a+EV:.+Dl%7@:UKmDfQt>ATDj1DImW,
F`V+:ARoLs%15is/g,7LAKYl/F`&=CATW$.DJ+#5Ch[s4ARlosATD?)FDi:=@<?!m+<YrJF`JUC
GA[is:-pQUBk/b;CLqcB+EM+(Eb0>8@;]Tu@:NeYF)rIGDeip%/e&-s$;No?+D,G(@r$*-F`V,7
+DG@tDKKT)Bk;;o$>k'#Ch[BpEc,r4A3DOm0fLdF3&*BK5Ya!e-OgCl$;No?+D,G(@r$*-5u:,q
CLqc#$>k'#Ch[BpEa`p$CLqcS/gk4A2)R1$2e-DUAN2GW@Q@q13+ap#AN)S\1-%'EAN;+I$4R>;
67sBmCh[BpEZfF:@<,pi+EM+(Eb0>8CLqc6/Kf.LARlp*D]iY.Bk(q!+@/gq+DYP6%16rtAo)0k
CN=K0@<,piF(Jj%ATU'f-SRG;A26"s3Arm/2)Seu3%#.B%15is/g+bBBk(q!+E1n4D/"'4Bl@l3
FDkr+D@HqiH$!t?ASsX`-S[A30K:d=3AN="0K1[E@5Tr"@5BTK-OgCl$7Kb:Ao)0kCN=<6Bk0;B
H"Ll,@r$*nE+s*!GrokgAo)0kCN=K0@<,piF(Jj%ATU!rD0^5ACLqB4+CfG'@<?'mCh[BpE^<Mn
+F+D'3XlEk67sC!@VTIaF<GI>F`)7C+Xefh4Y@jH9M%TE;GL.^6m+rm8OH-K5u:-G79La&9M%TE
;H$+P;FNuP770sA<$4Y(8OH-K<)6.U:*9uQ-Upd$6VC<P;b9A"7SHB@92\&P8P;KT+@]$r6VC<U
83p-B6rQNA;FOP-7SHB@92\_b91;T'4ZX^1%13OO:-pQUDdmHm@rri2Dfor=+<`-_.6T:+=[>bV
78b725tt'B;F=2Y+@]-9$<]Yh9gqrC3Zp."+<VdL+AP6U+Cf(nFED)7+DGm>Df-!k=[>bV78cKJ
<'<8b0ea^m:-pQUF`V,7+E_X6@<?''Amo1kDfQs0$:[fS3Zr\j+<VdL+<VdL+AP6U+EM+9+D,G(
@r$*-DdmHm@rr.e.0                                                         ~>
)
showpass 4 put ". ".'zz_',SOLOCALE,'_' [ cocurrent 'base' NB.{*JOD*}
".soclear NB.{*JOD*}

cocurrent SO__JODobj NB.{*JOD*}
zz=:''
zz=:zz,'(<<;._1 '' flickr CR CRLF DOCOMMANDS FLICKRAUTHURL FLICKRDRV FLICKRD'
zz=:zz,'SN FLICKRHTMLHEAD FLICKRHTMLROW FLICKRHTMLTAIL FLICKRIMAGEDIR FLICK'
zz=:zz,'RIMAGESQL FLICKROFFLINEDSN FLICKRPATH FLICKRPHOTOS FLICKRPHOTOSINFO'
zz=:zz,' FLICKRPRIMARYDSN FLICKRRESTURL FLICKRSIZES FLICKRTHUMBS HEADINGDEF'
zz=:zz,'AULT HTMLVARBPATTERN IEXPLORECMD INTERVALTIME KMLHEADER KMLPLACEMAR'
zz=:zz,'K KMLPLACEMARKVARBS KMLTRAILER LF MISSINGLIMIT MYFLICKRNAME NONDISP'
zz=:zz,'LAYDIRECTORIES NONDISPLAYDIRECTORIES2 RANGEDEFAULT SHOW SHOWCOMMAND'
zz=:zz,'S SHOWSEND SMALL SOURCE TEMPFILE0 TEMPLOCALE TILTDEFAULT WAITSECOND'
zz=:zz,'S WGETOUTPUT WGETPATH XMLHEADER afterlaststr afterstr alltrim appen'
zz=:zz,'d arctan attrvalue beforestr betweenrequired betweenstrs boxopen ch'
zz=:zz,'eckflickrthumbsxref checktoken clearxrefcache cos ctl dblquote dire'
zz=:zz,'xist dispdirs docmds doresturl dosigresturl downloadimage downloads'
zz=:zz,'etdiff earthdist eletags erase ferase fexist filelist fill finduser'
zz=:zz,' firsteletext flickrGeotagged flickrINTERFACE flickrIdTimesName fli'
zz=:zz,'ckrROOTWORDS flickrSetPhotoXref flickrVMD flickrsetIdNameDesc flick'
zz=:zz,'rthumbsxref fmtdownname fmtwgetcmd geotaggedkml getallphotosinfoxml'
zz=:zz,' getallphotosxml geteletext getfrob getgeotaggedkmldata getgroups g'
zz=:zz,'etimagedimensions getimg getnotinset getphotocounts getphotoinfo ge'
zz=:zz,'tphotosinset getphotosizes getrecentphotos getrelatedtags getrequir'
zz=:zz,'edeletext getrowhtmldata getsetlist getsetphotos gettags gettoken g'
zz=:zz,'etuntagged geturl getusertags granulardates htmlvarbs htmpids image'
zz=:zz,'files ismordered isprefixof justext justfile justpath lctrim listli'
zz=:zz,'nks listseturls ljust loadxrefFlickrThumbs loadxrefGeotagged loadxr'
zz=:zz,'efIdTimesName loadxrefSidNameDesc loadxrefTidPid loginflickr loginp'
zz=:zz,'ermurl makephotolinks makephotorowhtml makeplacemarkkml makesethtml'
zz=:zz,' md5fromstring nc nearestnew nonuniquenames notxrefed nowunixsecs n'
zz=:zz,'ullsqimages okxml orderbytouching originalimagelinks pairbracdir pa'
zz=:zz,'rselastupdate parseondates parseonimgsrc parseonphoto parseonphotos'
zz=:zz,'et parseonsize parseontag parsepids parseposted parsesids parsetake'
zz=:zz,'n parsetakengranularity parsetitles parseviews patpartstr pick pids'
zz=:zz,'frname pidsindb pidsnotindb pidsnotxrefed prompt read read0 read1 r'
zz=:zz,'ebc resetfiletimes rfd rmprefix sdcheck sdclose sdconnect sdgethost'
zz=:zz,'byname sdrecv sdsend sdsocket searchgroups searchme searchphotos se'
zz=:zz,'tflickrdrive setorder setsnotxrefed showpass sidfrname signargument'
zz=:zz,'s sigstring2 sin smoutput sourceurlfromsize split sqbracdir toHOST '
zz=:zz,'toJ todate todayno tolower tsfrunixsecs tslash tstamp unixsecsfrts '
zz=:zz,'unsqimages updateflickrxml updateinfofile updatesethtml updatesmall'
zz=:zz,'thumbs updatethumbsgalleries wait wgeturl write''),(<<;._1 '' flickrA'
zz=:zz,'PI CRLF FLICKRAUTHURL FLICKRDRV FLICKRIMAGEDIR FLICKRRESTURL IEXPLO'
zz=:zz,'RECMD TEMPFILE0 TEMPLOCALE WGETOUTPUT WGETPATH XMLHEADER addcomment'
zz=:zz,' afterlaststr afterstr alltrim attrvalue beforestr betweenstrs boxo'
zz=:zz,'pen checktoken commongroups contactnames contactnsids createflickrA'
zz=:zz,'PI doresturl dosigposturl dosigresturl downloadimage eletags ferase'
zz=:zz,' finduser firsteletext flickrAPIVMD getactivity getallphotosinfoxml'
zz=:zz,' getallphotosxml getcontacts getfrob getgeolocation getgroups getno'
zz=:zz,'tinset getphotocounts getphotoinfo getphotosinset getphotosizes get'
zz=:zz,'populartags getrecentphotos getrelatedtags getsetlist gettoken getu'
zz=:zz,'ntagged getuser getuserpublicgroups getusertags groupnames intersec'
zz=:zz,'t lastpage loginflickr loginpermurl md5fromstring nsidcontactlist o'
zz=:zz,'kxml page pages parseoncontact parseongroup parseonperson parseonph'
zz=:zz,'oto parsepids parsesids photopids pick prompt read searchcontacts s'
zz=:zz,'earchgroups searchme searchnsidtags searchnsidtext searchphotos sho'
zz=:zz,'wpass signarguments sigstring2 smoutput tolower tslash tstamp userc'
zz=:zz,'omments wgetposturl wgeturl write yammer''),(<<;._1 '' flickrAPIsetti'
zz=:zz,'ngs FLICKRDRV MYFLICKRAPIKEY MYFLICKRSHAREDSECRET READTOKEN WGETOUT'
zz=:zz,'PUT WGETPATH''),(<<;._1 '' flickrXthumbs DOCOMMANDS FLICKRCOMMENTS FL'
zz=:zz,'ICKRDSN FLICKRHTMLHEAD FLICKRHTMLROW FLICKRHTMLTAIL FLICKRIMAGESQL '
zz=:zz,'FLICKROFFLINEDSN FLICKRPATH FLICKRPHOTOS FLICKRPHOTOSINFO FLICKRSIZ'
zz=:zz,'ES FLICKRTHUMBS GEOKMLFILE GEOKMLPATH INTERVALTIME LF MISSINGLIMIT '
zz=:zz,'SHOW SHOWCOMMANDS SMALL SOURCE WAITSECONDS append betweenrequired c'
zz=:zz,'heckflickrthumbsxref clearxrefcache ctl dblquote direxist docmds do'
zz=:zz,'wnloadsetdiff erase fexist filelist fill flickrIdTimesName flickrSe'
zz=:zz,'tPhotoXref flickrXthumbsVMD flickrsetIdNameDesc flickrthumbsxref ge'
zz=:zz,'teleattrtext getimagedimensions getrequiredeletext getrowhtmldata g'
zz=:zz,'etsetphotos granulardates htmpids imagefiles ismordered justext jus'
zz=:zz,'tfile justpath lctrim listseturls ljust loadxrefFlickrThumbs loadxr'
zz=:zz,'efGeotagged loadxrefIdTimesName loadxrefSidNameDesc loadxrefTidPid '
zz=:zz,'makephotolinks makephotorowhtml makesethtml nc nonuniquenames notxr'
zz=:zz,'efed nowunixsecs nullsqimages orderbytouching originalimagelinks pa'
zz=:zz,'irbracdir parselastupdate parseondates parseonimgsrc parseonphotose'
zz=:zz,'t parseposted parsetaken parsetakengranularity parsetitles pidsfrna'
zz=:zz,'me pidsindb pidsnotindb pidsnotxrefed readnoun rebc resetfiletimes '
zz=:zz,'setorder setsnotxrefed sidfrname sourceurlfromsize sqbracdir toHOST'
zz=:zz,' toJ todate todayno tsfrunixsecs unixsecsfrts unsqimages updatecomm'
zz=:zz,'entxml updateflickrxml updategeogallery updategeokml updateinfofile'
zz=:zz,' updatesethtml updatesmallthumbs updatethumbsgalleries wait writeno'
zz=:zz,'un''),(<<;._1 '' flickrXthumbssettings FLICKRDRV FLICKRDSN FLICKROFFL'
zz=:zz,'INEDSN FLICKRPATH FLICKRPRIMARYDSN''),(<<;._1 '' flickrsettings FLICK'
zz=:zz,'RDRV FLICKRDSN FLICKROFFLINEDSN FLICKRPATH FLICKRPRIMARYDSN MYFLICK'
zz=:zz,'RAPIKEY MYFLICKRSHAREDSECRET READTOKEN''),(<<;._1 '' flickrtesting TE'
zz=:zz,'STAPIKEY TESTFROB TESTLOGINURL TESTSECRET''),(<<;._1 '' gallery GALLE'
zz=:zz,'RYCHARS MANUALORDER alltrim creategallery deletegallery listgalleri'
zz=:zz,'es listgalleryfiles rebtbcol resetgallery saveerror showpass''),<<;.'
zz=:zz,'_1 '' kml HEADINGDEFAULT HTMLVARBPATTERN KMLHEADER KMLPLACEMARK KMLP'
zz=:zz,'LACEMARKVARBS KMLTRAILER MYFLICKRNAME RANGEDEFAULT TILTDEFAULT arct'
zz=:zz,'an cos earthdist flickrGeotagged geotaggedkml geteletext getgeotagg'
zz=:zz,'edkmldata htmlvarbs makeplacemarkkml nearestnew parseonsize parseon'
zz=:zz,'tag patpartstr pidsfromgeokml rfd sin''                             '
zz=:5867{.zz
showpass 2 grp&> ". ". 'zz_',SOLOCALE,'_' [ cocurrent 'base' NB.{*JOD*}
".soclear NB.{*JOD*}

cocurrent SO__JODobj NB.{*JOD*}
zz=:dec85__MK__JODobj 0 : 0
2DH=6+>P&t+>GW02)HF9+>bo13$9q7+>bc1+>GYp2`*9H+>PYo0fUsD+>G\q2_d352]sh13&;[5
+?)5>Ao)0kCN<0:/h1ILBk(q!+EK+d+D,G(@r$*-5u:,qF`_>6Bln'#F"Rn/:-pQU%15is/g+,,
BlbD<@rc:&F<G+*Anc-oF!+m6DKTf*ATAo3Afu5<Bl%L*Bk;?.FD,*)+D#e>Ea`I"+Cno&@1<Q=
67sBmEc5e;GB\6`Ao)0kCN;%;Df$V>F(oN)+D,G(@r$*4F!,[<@N]`'Ecu/,ATJt[:e<8^%15is
/e&._67sC(ATD6gFD5SQ%15is/e&._67sB[D]j1DAKZ).BlbD<@rc:&F<G[=AKYT'Ci"$6Bl7Q+
D09oA+E(_2@;0U?%15is/e&._67sB7.3MW3AKZ).AKY&gDId[0F!,X;EcYr5DBNk0+A*b.+Eh=:
Ble!,DBLeh0JjnjEZf1,FCfJF+<V+#:-pQU+<Ve+BPDN1@ps6t@V$ZmDg-)8Ddd0fA0?)1FD,T8
F<G(3F*&O5F<GdOG:mWODe=*8@<,p3@rH3:+:SZQ67sB'+<XWsBlbD<@rc:&F<G^IATJu&+Du==
@V'R&De:+a+Dbb$Eaa!&ATJu8D]j=DFWbODF*&O<@<Q2k$;No?+<VdL@3Bc4EbfB,B-9ehF*VhK
ASj%/$;No?+<VdL%15is/g)8Z+BN9!BHVD;Bm+3!C`mS5A8,Xi@psInDf0V=H#IgJ@ps6tEcl7B
FD,B0+EM%5BlJ/:GA2/4+:SZQ67sB'+<Yc>AKXZ\DKU1HG%G]8Bl@l3De:+a/g)99BOr<'@;0U%
Ec6)BBl7L'+EVNE@q]:gB4W2oEb-A;BOu3q%15is/g)8Z+EV:.+=M;EASc03+Eh=:@N]B++Cehr
Ch7-"FDi:9DK]r6AKZ).AKYi#2(iHbAKYE!A0>u4F^o);AU%c=%15is/e&._67sB8.3Mc3FWbR5
ARlp*D]i\(F<G!7Ao)0kCN:O`:e;dFAU,mN+B3#c+D,G(@r$*-5u:,qBlbD*+>Yb^$;No?+<VdL
@X3',+Cf(nEa`I"ATAo7FE2)5B.b;L=(l/_+F.mJ+D58-+EV:2F!,X7Cis;3@<6L(B5Si+F:ARP
67sB'+<YcE+EV:.+Du+?DBL>s9M%TE;F+,N91;u4/g)99BOr<0@;L't+Co2-FE2))F`_2*+EqOA
BFP;D67sB'+<Yc>BlbD<@rc:&F<G:=+EV:.+Co&#D]h>B8K_e[Gp$^>Df$V=BOr;uCh[BpEZfR;
@N]`+FCd'6$;No?%15is/g)nu+B`W*+Dtb%A0>;u+DkXH/nK9=+Cf>,D..<m+Dbb0AKYQ/ARfk)
@:F%a+E)-?H#IhG+Cf>,D..<m+:SZQ67sB'+<Y`=ASc0*E+*j%/g+,,AKZ/-EcYr5DBMLn@;R-0
F(oN)+CehsAKYT*Df%NX+Er$R/nT$EEc#N,@:Cj!BJ4452(oCG:-pQU+<VeDA2PKDD/a<&D.RU,
@<?4%DK?q/Eb-A%G%#*$@:F%a+D,P4+CT)&+AYo`F"SRX%15is/e&._67sB:.3Mc3FWbR5ARlol
+EVOE@q[K+G\&"-Df'?"DIal+Bl7K)AU%crF`_&$Ch4`-DBO4CF`JU7Df'?"DIal2BOu!r+E1b2
BJ'`$:-pQU+<VeKDfoQ'/nK9=+Dl7BF<G"%@qBV$+Cno&ATJu.DBL<0=]nlZ9hd3-6m,#k3_iF2
;c>%dAoD^,@<=+2$;No?%15is/g)u"+B3#gF!,O6EbTK7+=Li<Bk(q!/no'A.3N&:A0<:4Ch[Bp
EcYf6FD5W*F"V0AF"&5KF`VXI@V$['ATW'6%15is/g)8Z+CT=68g%qg@:UL%@rc:&FE9&W+Dbt)
A0>r'EbTK7F!+t$DBND"+Dbt)A7]9o@X0)<BOr<-FCB&t@<,lf$;No?+<VdL8g#NuDdd0*+Eh=:
@P/cG=`8F*A8`T4BPDN1@X0)-A8-."DJ()6BOr<-@rc:&FE8R@BleAK+<Xg*FU\[Q67sB'+<Y0&
DBNM$BlkJ>BPDN1Ch[s4+C]U=FEqh>DJ)!>$;No?%15is/g)8Z+<VdLF(96)E--.D-Y4YJ+<XEG
/g,(OASuQ3@;[3!A8--.-u!F;.3NhKDId[0+EqOABHVA+EbTK7F"V0AEt&IO67r]S:-pQU+<Ve8
A7TClB-:V*Ci<`m+EM%5BlJ/:BlbD9Eb0?7Gp%0MEa`ZpBQPA/DfU&1Eb$:E+CT5.ASu$$Ch[cu
F!,:5CLmq^:-pQU+<Vd9$;No?+<VdL+<Ve=Ch[BpEZcK73a?NIF(96)E--/+Ao)0kCN9jk:-pQU
+<VdL+<Y94Bk(q!F(KH8Bl7R)+<Y/T>]"b-@rc:&FE:]!Ch[BpEcYf6FD5W*Et&IO67r]S:-pQU
+<Ve8DIal2@<Q3)FD,5.F(96)E-*3S+ED%*ATAo8D]hXpA8bt#D.RU,@<?4%DBNP0EZen(FCAm"
F"Rn/:-pQB$;No?+>kSj;f?Ma+Eh=:@WNZ+DBO%7BlbD<H#n(=D'16;Dg-)8Ddd0tATVHsAnEJ7
-td+5Bl.9kARoLlASuR'Df0VF%15is/g)8Z+=M)8CLqQuFD,c5CagK8DIal.FD,6+F!+n4F*2>2
+EV:.+E2@4F(K6!AKYo'+CQBlBQ\0$F&6[qF!,X;EcYr5D@HqJ67sB'+<WTcA79Rg@UX=h3ZoPh
GBYZLATDL'F`T0FDf%*L+:SZQ67r]S:-pQU+<Ve+D]j1DAKZ).ATME*An>CmF`M&7+F.mJ+Dtb%
A0>u4+Cf>-Anbn#Eb-A%+B3#sD.7R*CiseAA79Rg@UX=h+:SZQ67sB'+<Y*6+CT.1:IIN:+EMID
EarZ5+B3#gF!,1<+D,P4+CSf(@;]RdA0?#9ATDi7FD,*)+D>2,AKYhuDII0hA0>u4%15is/g)8Z
+D58-+EV:;Dfo]++EMX9E-!-M0J+k5.4u&::-pQB$;No?+A!]"Bl%T.@<?U&D/aS>FDi:1DKC#5
EZfXGF`JUEF_,W9Bl@m1+CS_tF`\aJBPDN1F*VhKASj%B+A!\c@;ZM]:-pQU@V$[&ART(^ARlol
F?1Ne@UX%`Eb],F3C%7rFDYH#CbB49D%-hI67r]S:-pQU8T&W]Eb8`iAKZ28Eb'56+<VdL+<W6f
+Cf>,D.RU,F!,17+EV:.F(HJ<DfTB0+Cf>-FCAm$+E_a:+D#e+D/a<&Et&IO67sB4/M/P+/M/P+
/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+
/M/P+/M/P+/I`%^67sBjBOt[hAo)0kCN=N1F_tT/G]IA-+>#/f@q]F`CER5*Bk(q!+EV:>D.7Q/
G]IA-+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+:SZQ67sBjBOt[hFDkr+DBL&E
+<VdL+<VdL+>#/f@q]F`CER5*Bk(q!+EVO;ASrV5+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL
+<VdL+<VdL+<VdL+:SZQ67sBkDg-)8Ddd0jD..'g+<VdL+<VdL+>#/fA8c[0Ci<`mF!+m6Ao)0k
CN:P3D..'g+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+:SZQ67sBkDg-)8Ddd0t
ATVHsAnE/.+<VdL+>#/fA8c[0Ci<`m+EM+9+DG\$B4Z-,FD,*)+CT;%+Du+>+DG^9A8-'q@ruX0
Gp"M[/h%nc+<VdL+<VdL+:SZQ67sBmBl7I(F(KA7+<VdL+<VdL+<VdL+>#/fAnc-n+D,G(@r$*-
F`V,7+C]U=FD,6"EZet1Bk(q!+EM%5AS#a%DIIBn+<VdL+<VdL+<VdL+<VdL+:SZQ67sBnATV?s
CiF'+FDl57DJ!g3D/:=;+>#/fB4Z1++DG_*DfT]'FD5Z2+D,P4+=MIe.3NSCDffn?Bk29-+<VdL
+<VdL+<VdL+<VdL+<VdL+<VdL+:SZQ67sBnATV?sCiF'+FDl5FD/:=;+<VdL+>#/fEb0?8Ec,q@
@;Ka&Ao)0kCN:P:BQ&!2+F%a>+CT=6Df0,/A8bt#D.RU,+<VdL+<VdL+<VdL+<VdL+:SZQ67sBn
ATVO)Ddjh3+<VdL+<VdL+<VdL+>#/fB4Z0-FD,5.Ao)0kCN:P0Ec5D0FDkr+DBL&E+<VdL+<VdL
+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+:SZQ67sBnATVR*Dfp#?+<VdL+<VdL+<VdL+>#/fEb0?8
Ec,q@@3BB#F*&OCAft`,Dfp#?+EVNEGA(]#BHVS=FWb1&DBN@uA0>i)Dffo=+<VdL+<VdL+:SZQ
67sBnATVX'@:s.^Bl.F!F(oQ1F!)SJ+>#/fCi=6-F`8I;D..'g+Co2'ASuR'Df0V=Bl5&8BQ\0$
F)Yr<F!,"%FCAWeF(HI:+<VdL+<VdL+<VdL+:SZQ67sBnATVX'B-8<>+<VdL+<VdL+<VdL+>#/f
B4Z0-Ao)0kCN:P3D..'g+Cno&@3?[8+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL
+:SZQ67sBnATVg.FD5W6ATT%;+<VdL+<VdL+>#/fCh[s4+E(j7E+rg(F`M&7+Du+>+DG^9@;^?5
F(KH7+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+:SZQ67sBnATVm)Dffo-Dfor>F!)SJ+<VdL
+>#/fB4Z1++E2"4FDi:@Df^"C@rHL-FE8R:DfQt2AS,XoARlotDKKH1G%#3.+<VdL+<VdL+<VdL
+<VdL+:SZQ67sBnATVm)Dffo3DJ!f0+<VdL+<VdL+>#/fB4Z0-Bl7O$Ec#6,Bl@l3@:F.tF<GL>
AKYT$Bk(q!+E2"4FDi9E+<VdL+<VdL+<VdL+<VdL+<VdL+:SZQ67sBnATVm)Dffo=Bl8!'F<D\K
+<VdL+>#/fCh[s4+E(j7Ao)0kCN:P:BQ&!2F!,17+E)./+EM+9+<VdL+<VdL+<VdL+<VdL+<VdL
+<VdL+<VdL+:SZQ67sBnATVm)Dffo=BmO?3+<VdL+<VdL+>#/fEb0?8Ec,q@@<Q'nCggdhAKYT$
Bk(q!+E2"4FDi:CBmO?3+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+:SZQ67sBnATVs(@qBP"E+j03
Df[$D+<VdL+>#/fF(Jd#@qZusDfQt@ARf:hF<G13Bk(q!+E2"4FDl4C+<VdL+<VdL+<VdL+<VdL
+<VdL+<VdL+<VdL+:SZQ67sBnATVs(CghEsA9;6mF!)SJ+<VdL+>#/fB4Z1++EV%)F!,L7CghEs
A0>u4+=MLf.3N_@B-:YlF(Jl)Df-\-Cisf@ATDL&B-8<>+<VdL+<VdL+:SZQ67sBnATW!)FDPZ4
F<D\K+<VdL+<VdL+>#/fCh[s4+E(j7Ao)0kCN:P=ATVu9+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL
+<VdL+<VdL+<VdL+<VdL+:SZQ67sBnATW$4CLqB++<VdL+<VdL+<VdL+>#/fB4Z0-Ao)0kCN:O`
:e;dODeip%+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+:SZQ67sBnATW'4
FCAfpARlo++<VdL+<VdL+>#/fCh[s4+E(j7E+rg(F`M&7+EV:*F<G+4+Du+>+D>2,AKYE!Gp%3;
B6,1<+<VdL+<VdL+<VdL+<VdL+:SZQ67sBnATW'8C`jiC+<VdL+<VdL+<VdL+>#/fEb0?8Ec*"B
EblkA@;L't+CT=6FCf]=+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+:SZQ67sBn
ATW'9ATDm$B6,1<+<VdL+<VdL+>#/fB4Z0-Ci<s!ARlotDBO(CATDi7FCAg'+<VdL+<VdL+<VdL
+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+:SZQ67sBsBleB;ATW'8Ci^^A+<VdL+<VdL+>#/fEb0?8
Ec,q@@3B&r+E(j7DfTQ)Bl7?q+EM7CARlotD..'g+E_^@F!)SJ+<VdL+<VdL+<VdL+<VdL+:SZQ
67sBsDdd1$Eb/iPCh[BpE`?^pD.7Q/+>#/fCi<`m+D,G(@r$*-F(KG9FD,f6@WNZ)@;KakEd8d<
Bl[cpFDl2F+F%p<Afr3=+<VdL+<VdL+<VdL+:SZQ67sBsDdd1$Eb/iQAT)[!B4kdd+<VdL+>#/f
Ci<`mF!,F8Dffn?Bk/b;CghF"FEM,*/0JbIDJ*[*F_#&++<VdL+<VdL+<VdL+<VdL+<VdL+<VdL
+:SZQ67sBsDdd1$Eb/iSA5m8[ATLUTD.Oh4+>#/fCi<`m+E2"4FDi:9A1SjFBl.F&+CT.u+DtV)
AKZ5<AS*',@:F%a+<VdL+<VdL+<VdL+<VdL+<VdL+:SZQ67sBsDdd1$Eb/i]Bk0tID.Q+HF(6=8
+>#/fCi<`m+EM+9+DG@;+EM+9+DtV)ALns7ATM@%BlJ0.Df-\BEb/i*FCAWpAKW*<+<VdL+<VdL
+<VdL+:SZQ67sBsDeEd%Ao)0kCN:O?+<VdL+<VdL+>#/fCi<s#DBO%>+D,G(@r$*-@;]TuEb0?8
Ec*"C@;KXg+@/gq+EVO;ASrV5+<VdL+<VdL+<VdL+<VdL+:SZQ67sBt@;BFnBQ&!2Ch[d&F!)SJ
+<VdL+>#/fB4YslEaa'$F!,"-Eb/a&+D>k6C`mP.DJO;9FDi:6Ch[BpEZf=7Dffo=+<VdL+<VdL
+<VdL+<VdL+:SZQ67sBt@;BFqATVU-D/:=;+<VdL+<VdL+>#/fB4YslEaa'$+CQC6Bl.g*AKYZ.
D/:>9ATT&)Df0Z.DKKqBEb03.Ec`EH+<VdL+<VdL+<VdL+<VdL+:SZQ67sBtA2Rt>Df'Q;EbTE(
+<VdL+<VdL+>#/f@rH4'F`_28+DkXH+D>2)BHUo-Df$V,BOPpi@ru:&+Dbb5F<D\K+<VdL+<VdL
+<VdL+<VdL+<VdL+:SZQ67sBuDg->ABm=]1@rib8+<VdL+<VdL+>#/fATMs-D..Nt+E(j7@s)g4
ASuT4F`(o<+EM+(Df0).FD5T'F*(i-E$-8G+<VdL+<VdL+<VdL+<VdL+:SZQ67sBuF_kl8EG98u
B4Z-,+<VdL+<VdL+>#/fEb0,sD.Oi(D..'g+D,>(AKYl!D.Rc2GA2/4+Du=<C`lqf+C]A"@r#Xt
F!,RC+E_R2Ea`HnATVKo+:SZQ67sC"@;0akEa`HgBlY==+<VdL+<VdL+>#/fD..NrBOu6-Ao)0k
CN:P0Bl%?'DIIBnF!,[@FD)e-Ble60@<iu0D..'g+D,>(AKYl!D.Rc2+<VdL+:SZQ67sC"@<-F#
CghC,F`:l"FCcR;+<VdL+>#/fAU&<;@:OC%CghC,F`:l"FCcS'FEDP;@Wcd(+Eh10F_,V:+<VdL
+<VdL+<VdL+<VdL+<VdL+<VdL+:SZQ67sC"@<-F#Df0)oFCfM9+<VdL+<VdL+>#/f@s)l9G\q7>
Df-\.@<?(%+D#A#D.RU,F!)SJ+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+:SZQ67sC"
@<-F#Df09+B6/*'+<VdL+<VdL+>#/f@s)l9BQS*-+E)-?8PM\t;c5t*+<VdL+<VdL+<VdL+<VdL
+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+:SZQ67sC"@<-F#Df0N-Dffn?+<VdL+<VdL+>#/f@s)l9
G\q7>Df-\:BQ&!2+D#A#D.RU,F!)SJ+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+:SZQ
67sC"@<-F#Df0N-Dffo=ATT%;+<VdL+>#/f@s)l9G\q7>Df-\:BQ&!2F(KG9ASbppASuU2+<VdL
+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+:SZQ67sC"@<-F#Df0W1H=\3A+<VdL+<VdL+>#/f
@s)l9G\q7>Df-\=BmO>5ASbppASuU2+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL
+:SZQ67sC"@<-F#Df0Z*B-8<>+<VdL+<VdL+>#/f@s)l9G\q7>Df-\>@:p]oCh7HpDKKqB+<VdL
+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+:SZQ67sC"@<-F#E+rj(+<VdL+<VdL+<VdL
+>#/fAU&<;@:OC%@;Ka&E+j03D]ib)+CTA6EbT!*FCcS<@;L'tF!,(8Df$VAD/:=;+<VdL+<VdL
+<VdL+:SZQ67sC"@<-F#E,Tf>ARlo++<VdL+<VdL+>#/fAU&<;@:OC%E,Tf>ARlolFEDP;@Wcd(
+Eh10F_,V:+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+:SZQ67sC"@<-F#F(o0++<VdL+<VdL
+<VdL+>#/fAU&<;@:OC%@;Ka&E+j03Df]K3+DGA-+D,Y4D'4(?C`jiC+<VdL+<VdL+<VdL+<VdL
+<VdL+<VdL+:SZQ67sC"@<-F#FCArrDBL&E+<VdL+<VdL+>#/fAU&<;@:OC%@;Ka&FCArrDBNIu
FCcS'FEDP;@Wcd(+Eh10F_,V:Ao_g,+Cno&ATJu*Ch7HpDKKqB+:SZQ67sC"@<-F#FD5i5ATJt:
+<VdL+<VdL+>#/fAU&<;@:OC%FD5i5AKYE'FE2))F`_1;G%#30ATJt:+<VdL+<VdL+<VdL+<VdL
+<VdL+<VdL+<VdL+:SZQ67sC"Bk29sEc,<&AKW*<+<VdL+<VdL+>#/fBl.9kAKY\t+=M2CA901B
AoD]4Bl.9kATJu<Bln#2.![6aBl5&2@;TQu+<VdL+<VdL+<VdL+<VdL+:SZQ67sC"Bk2:!DId3!
+<VdL+<VdL+<VdL+>#/fCh[s4+E(j7Ao)0kCN:P:Bk29-FD,*)+CT;%+DG^9FD,f6@W6.+F!,"%
FCAWeF(HI:+<VdL+<VdL+:SZQ67sC"Bk2:&Dff]2A7?Z(+<VdL+<VdL+>#/f@WW`2Aft]%Bk(q!
+DG\$B4Z-,FD,*)+CT;%+Du+>+DG^9A79Rg@UX=h+<VdL+<VdL+<VdL+<VdL+:SZQ67sC"Bk2:&
Dfg5EAS,La+<VdL+<VdL+>#/f@WW`2Aftf)@:s.m+EV:*F<G"4AKYl/F<FOrF_tT/E,9Z<04o$7
@r$*-@rcL/F!,L7An?!oDI[6g+:SZQ67sC%ARTUhBP2@(F`;CE+<VdL+<VdL+>#/fF(Jd#@q[!(
F^f0$@j#B"Bk(q!+D5_5F`8IFBln0&F!,R<@<<W%Df0Z*Bl5%AGqLNgFCf]=+<VdL+:SZQ67sC%
ARTUhBQ.X'FDl4C+<VdL+<VdL+>#/fF(Jd#@qZusDfQt4Ch[BpEZf=7Dffo=+<VdL+<VdL+<VdL
+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+:SZQ67sC%ATW!2Dfg5EAS,La+<VdL+<VdL+>#/fCh[s4
F!,=6F)u&5B-:Da+DG\$B4Z-,Ao_g,+D,G(@r$*<FD,f6@WNZ:Eb/i*+<VdL+<VdL+<VdL+:SZQ
67sC%Bk1grDIIBn+<VdL+<VdL+<VdL+>#/fF(KG9Bk/>7F(o/6+D,Y4D'3n2F<GI0D.Oh4+<VdL
+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+:SZQ67sC%EFNrs@q9:o+<VdL+<VdL+<VdL+>#/f
Eb0,sD.Rc2Anc'mF!,OB+Br+oDfQtII3;s;E+NHuF!+q'AoD^$+EV:.+D#e>ASuR'Df-[?+<VdL
+:SZQ67sC'E+EC!AS,am@r$+0D/:=;+<VdL+>#/fF`:l"FCcS6BQ&!2+CT.u+E2"4FDi:9DJ!f0
G\q7>Anc'mF!)SJ+<VdL+<VdL+<VdL+<VdL+<VdL+:SZQ67sC'E+EC!ASH$oDe<^"AKW*<+<VdL
+>#/fF`:l"FCfM9E+j03Df[%8DJ!g-D..O#Df-\0Bl%?'+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL
+<VdL+:SZQ67sC'E+EC!ATMF)BQS*-+<VdL+<VdL+>#/fEb/lpDImisFCfM9BQS*-+EM+9+Cf>-
FCf?3+D,>(ATJu.DBO";@;Ka&Bl.9kAKYMtEb/a&DfTQ'Et&IO67sC'E+EC!ATM]sCi"3,F_tT/
+<VdL+>#/fA8c[0Ci<`mF!,O@@;Ka&Ao)0kCN:P=ATT&/D..'gF!,RC+EV:>D.7Q/A8-'q@ruX0
Bk;?.+<VdL+:SZQ67sC'E+EC!ATVU.D.7R!@;KakEbT*++>#/fF`:l"FCfM9FD,f6@WQL)F`S[;
Ch[BpEZfF7F<G4)Ci!['Bk;?.+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL
+<VdL+<VdL+<VdL+<V+#:-pQU+<V+#:-pQUFDk].+Dbb5F?0j<:-pQB$;No?+>G;f6Z6j`Bk1dq
+D>2$A8GstB-;86D.Oi$G[k<(FD5Z2F!*%WE+j03Df[%2@;[2sAKYi.D.RR+@<-'uGp%6I@<Q'n
CggdhAKYo/+:SZQ67sB'+<Y94Bk(q!/g)93Dg*<q+DQ%?F<G"5F(KB6+CT/5+BV?3+EV:*F<G:=
+Du+>+D5V2A1euI8K_kYGp$d/G%De<D[d%K67sB'+<YcE+D>2$A8Gg"E+j03D]iq9F<G16F`(_4
Eb0<7Cij_@@;]TuFE2XL@:s"_DCuA*:-pQU+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL
+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+:SZQ67sBhF`_;8E]P=8DeO#26nTTK@;BFp+<V+#:-pQU
@rc-hFCeuD+@1-_F`VXI1,(C>%15is/g)_t/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+
/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/O`$;No?+Cf(nDJ*Nk3Zp130JtL;
3A3'A+>"]YBl.9kAKYN%GA_58@:UKhA7T7^%15is/g+Y;@;]^hA3(hg0JG@;0KCd?2]s[p+EM+9
+D>k6C`mA%DImisFD5Z2+CSekARl5W:-pQU@q]:gB4YU7+>PW)2(pXD0/,@./Kc07Df'&.B5DKq
@;L!-G@bf++C\nrDJ()5ATT&/DBO%7AKYGjF(HJ1De!3lAM+E!:-pQU+<VdL+<VdL+<VdL+<VdL
+<VdL+<Ve%Dg*=4Cht5(@:Nt^A0>N$Ddm-kF!+n3AKZ&&G%G2,Bl5&8BOr;c786TP:I@EA74]R'
H#RJ-@;Kb*+EVI>%15is/g+Y;@;]^hA3(hg0JG@;0KCd?3?Tmr+ED%3EbAfuBmO?$+Dbt+@;KKt
B5DKq@;I'-ATW$.DJ()#DIal$G]7)/A7]9oF(96)E-*45De!p,ASuTuFD5Z2+:SZQ67sBjBOPdk
ARmhE1,(C>0/,C>0f1")+<Y*'A7]9o-urm3@;ogmCh7^&D.Rc;+CT.u+=M8AD/X<1FDl&..3K',
:-pQU@q]:gB4YU7+>PW)2(pXD0/5=,/Kc0EA7T7^+DG_'Eb0*!DKK<'+EM+9+CoD7DJX6"A0<:2
Dg-)8Ddd0tATVHsAnEJ$$;No?+Cf(nDJ*Nk3Zp130JtL;3A3*I+>"]YEb03+@:NkZ+=M8AD/X<1
FDl&..3NhKFD)e*+C\o(FCfJ8@;KRpEbTW/D'16IASl@'Dffo8AMP\W+:SZQ67sB'+<VdL+<VdL
+<VdL+<VdL+<VdY+<Y*'A7]9o-t?q%@r$1)CLqB4+>"^W@rc:&F<GI>G9CC/ARfLs+EVO;ASrW5
E,TV:Ci<`m+<V+#:-pQU+<VdL+<VdL+<VdL+<VdL+<VdL/Kc0VASl@/ARlo3A8c[0Ci<`mF(KGB
+>"^YF(HIBA8c[0Ci<`mF(KH(BkCs++DG_7FCelk%15is/g)8Z+<VdL+<VdL+<VdL+<VdL+<W6Y
+Cf(nDJ*Nk+=Lc=GA_58@:XFjFC])tAgnjED]iS/GA_58@:UKpD..'gF!,@=F<G:8+CT/5+EM+9
Et&IO67sBjBOPdkARmhE1,(C>0/,C>1,9t(+<W(OBk2:&Dff]2A7?u1@:Wn[A.8l@67sB'+<VdL
+<VdL+<VdL+<VdL+<VdY+<Yc7CLqBrEa`j%@<-((Gp$U8CisT4+CSekARlo3Ci<`mG]IA-8Rte7
D.Rc`@;TR)%15is/g+Y;@;]^hA3(hg0JG@;0KCdA1E\7l+=LlC@;^4(@<,meFCfMB+CSekARlo3
B4Z1*Dg,l:D/<`kFC?U@@q]:gB4YTrFDi:EF(Gdf:-pQU+<VdL+<VdL+<VdL+<VdL+<VdL+<VeK
D]j1DAKYW+@;^4(@<*K$@<?(%%15is/g+Y;@;]^hA3(hg0JG@;0eb772BXRo+CSekARlo3B45Um
ATE&=Ci<flCh5%<@;]Tu@rGmh+EVNE@rc-hFCcRoBQ\0$F)Yr<Et&IO67sB'+<VdL+<VdL+<VdL
+<VdL+<VdL+<Y<*Ci!['Bk;?.Ao_g,+EMC.Cht5+Ch[BpEZfF7F<G(6Df]tBEb/ioEb0,uAKY](
@:s-\$;No?+<VdL+<VdL+<VdL+<VdL+<VdL+<VdLA8-'q@ruX0Bk;?.F(JoD+=M)8CLqQuFD##u
Ch7X4.1HVZ67sBjBOPdkARmhE1,(C>0/5.60fL4,+<Y*'A7]9o-u`m2F)Go<G]IA-ARm5!$;No?
+Cf(nDJ*Nk3Zp130JtL<0J>.?+>"]YEb03+@:NkZ+=M8AD/X<1FDl&.1+=>iBln#2-urm9Df0K8
Df0,B.3L2bAmob&ATAo%DIa1`:-pQU+<VdL+<VdL+<VdL+<VdL+<VdL+<VeJBl.g*ATBC4$;No?
+Cf(nDJ*Nk3Zp130JtL<1+t=A+>"]YEb0*+G%G2,-urm9Df0K8Df0,B.3N&:A0>o(E,8rmARlot
F<GdAFD)dFDfTB"Eaj<9DfoQ'Bl7Q4+:SZQ67sB'+<VdL+<VdL+<VdL+<VdL+<VdL+<YNH+D#G4
Bl[c-@;p1+Ddd-h+EVNED..-rFCAm$Bl7Q+F(KG9DfTB"EZf(6+EV=7ATMs%D/aP*$;No?+<VdL
+<VdL+<VdL+<VdL+<VdL+<VdLG@>P8DJsV>GAhM;Bl7Q9+<XWsAKYl%G9C=1B5_g)FD,M6@:EY_
A8c@,+CTA6ASlC.F!,RC%15is/g)8Z+<VdL+<VdL+<VdL+<VdL+<VdL+Dkh1Bl.R1AKYT!Ch4`2
DfoQ'ATJu&DIal"Df0&rDKKo-FCfM9Df-\7@;0V$@;0UnDJ()%DfTl0@rr.e:-pQU+<VdL+<VdL
+<VdL+<VdL+<VdL+<VeFEb&a%/g)9&CiaM;@:Wn[A0>;'DIn#7@rcL/F!,L7An?!oDI[6#Anc'm
+=]!gD/9Xg:-pQU+<VdL+<VdL+<VdL+<VdL+<VdL+<VeKBOQ!*D..NrBOu6-FD,f6@WNZ&Bl[cp
FDl26ATJu9D]iY.Bk(q!+EM+9F"SRX<+oue+CfG1F)qct:-pQU+<VdL+<VdL+<VdL+<VdL+<VdL
+<VeIAS,LoASu!h+DGm>F`V,)+C]U=.!9K>@<?(%D..6sFD,f6@WNt@@;]Tu.!9K>@<?(%ATVU-
D/:XR%15is/g+Y;@;]^hA3(hg0JGC<0JY::1a"@m+=Lc=GA_58@:XFjFC])tAgnj?Dg*=7ATVKn
FE8RKBOu'(F(KG9DfTB"EZf%(F!+t+@;]^hA0>H,ASqqa:-pQU+<VdL+<VdL+<VdL+<VdL+<VdL
+<Ve@Aftu0+Dtb7+DG\$B4Z-,BOQ'q+C\nnDBN@uA7]9o@;]TuEb000A7]e&+CoD7DJX6"A7]9o
Anc'mF"Rn/:-pQU+<VdL+<VdL+<VdL+<VdL+<VdL+<VduDBO"=D.Oi"@<6"$+Cf>,E-686A0?#4
Bm:bBBl.F&FCB$*F!+t$DBND"@rH3q+Dtb'@<?4,AKY]!%15is/g)8Z+<VdL+<VdL+<VdL+<VdL
+<VdL+EV:2F!,C2@s)g5+=M/KA7]djH$!tI@q]RoB.4s@Dg*=EATMF)F!+n-C`m>(Ch7Z1FDi:3
F`MM6DKH<p:-pQU+<VdL+<VdL+<VdL+<VdL+<VdL+<VeJATT&5Eb&a%/g)QYBleB;ATW'8Ci_$J
@:Wn[A0>u4+D5_5F`8rB$;No?+<VdL+<VdL+<VdL+<VdL+<VdL+<VdLEb/ioEb0,uAKY].+E_a:
A0>?,+=MAOA79RkF)>?%Cij?5D.7Q8+CT.u+=MAOA79RkF(KH,FDYhC/e&._67sBjBOPdkARmhE
1,(C?0/,.71,pC.+<W(CDg-)8Ddd0tATVHsAnEJ7DJs_AGB.D>ATJu&+EMC.Cht5)BkCsgEb0,u
AKYT!Ch4`'DBO%7AISuA67sB'+<VdL+<VdL+<VdL+<VdL+<VdL+<Y`B@;Ka&Bl.9kAKYMtEb/a&
DfU+GFD,*)+D>>&E-!.DEa`Hn+Cf(nDJ*O%+EVNEAo)0kCN:P=ATVu9@<3P#$;No?+<VdL+<VdL
+<VdL+<VdL+<VdL+<VdLBl.9kATJu&Eb-A%A7T7^+CT.u+ED%1Dg#]&/g)8bF`:l"FCfQ-F_tT/
B45UmATDKrF"&5?A7T7^+>"]F$;No?+<VdL+<VdL+<VdL+<VdL+<VdL+<VdLFD,B0+Eh=:@N]f4
A79RkF!,R<F_tT/E,9Z<+D5,!Ch7X$ATJu:F(oN)+EV:.+Cf>-FCf?3+CT.u%15is/g)8Z+<VdL
+<VdL+<VdL+<VdL+<VdL+E):2ATAo6ARfY!A7]9oBl5&8BOr;=BQS)6Anc'm+Eqj?FED)3+C]U=
.!9K>@<?(%ATVU-D/:XR%15is/g+Y;@;]^hA3(hg0JGC<0Jb@92BXRo+CSekARlo3F)bZ0@:Nh^
E\&>NF_kl8EG98uB4Z-8+E1b'Eaj&t@q9:o.3N_N+D>>&E$0"+Bl8$$Bl4@e:-pQU+<VdL+<VdL
+<VdL+<VdL+<VdL+<Ve=Ch[BpEZfI;F_tT/+CfG1F)rIEAS,LoASu!hF!,17+D,>(AKYl!D.Rc@
+<VdL+<VdL+<VdL+<VdL+<Vd9$;No?+Cf(nDJ*Nk3Zp130K(R<1G:FB+>"]Y@:Wn[A0<:2Ble6(
Bl\8D+>"^VATW'8DK?q7D..'g+Co2-E,8s.+Co2,ARfh#EbT*++D,Y4D'08p:-pQU+<VdL+<VdL
+<VdL+<VdL+<VdL+<Ve:Df'H0ATVK+A8,[fF*&O8Bl[cpFDl2F+Dbb5FD5W*F"SRE$;No?+Cf(n
DJ*Nk3Zp130K(R<1G:FB+>"]Y@:Wn[A0<:>Bk29sEc,<&ALnsFATW!2Dfg5EAS,La.3L2bFDi:C
Bl.g*BkDW5Ci=6-Bl7Q+AoD]!$;No?+<VdL+<VdL+<VdL+<VdL+<VdL+<VdLBl.9kATJu9BOQ!*
BOQ'q+Du+>+C\nnDBNP-Bk(q!06ClMD.7Q/G]IA--Y6g2+<VdL+<VdL+<VdL+<VdL%144#+<VdL
+<VdL+<VdL+<Vd9$4R>;67sB/3?^F?0e"5!+<XEG/g)hjEb0*+G%G_;GA(]4AKZ&5@:Njk0d(LJ
FCAm$Et&Hc$=e!aCghC++=Cc;Bk(q!-Qij*:-pQUEb065Bl[cq+A*bmBju*kEbT*++:SZuAT;j,
Eb-@@F)PQ(ATT&:@<63,Eb/lpGT^O--Qij*%15is/g,%MG9D!@AKZ#)EHPu9AKZ&)+Eh=:@WNZ*
@<Q3)Eb/ioEb0,uATJu.DBO%7BlbD0Ec6)>%15is/g+YBBl8!'Ec`EOC3+<'CLqT8%13OO:-pQU
FD,f6@WQL)F`S[<@;KakEd8dMFD5Q*FD5<-+:SZQ67sBU:K0bD+ED%5F_Pl-+CoD%F!,@=F<GdG
Ebce0DfQt<Df..:DfTD3Ci<`m+EM%5BlJ08%16oi@:UK.B45UmATE&D%16T`Bl8!'Ec`EOB45Um
ATE&DAo)0kCN;^;8PVT).V<L2@r$*N:e;dN/M/)WCh[BpEZdYE8K`.tBl%L*Bk;?<%15is/g(T1
:-pQU<+oue+EM%5BlJ/:A7]@eDIml3@3BH1D.7's+E(j7F`_>6Bln'#F!,R<@<<W'G][t7@rri(
@<>oe$;No?+D,Y4D'4%HG:mKDBk(q!/n8g:+E_a>DJ()(Ch[BpE[PoNG@b5+F(KB8Bk(^q+@/gq
/g(T1:-pQB$;No?+Eh=:@UX@mD)r+5:-pQB$;No?%15is/g*`'FCfK)@:NjkGAhM4F!)SJ+<VdL
/M/)TDf'?&DKKqBBl5&8BOu6r+EqaEA9/l'Df0Z*Bl5&9F(HJ*G[YH.Ch7Ys$;No?+>#/s/M/P+
/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+
/M/P+/M/P+/M/Os+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL%15is/g+Y;ARfLtDeip%
+<VdL+<VdL+<VdL/M/)TBOt[h+D,G(@r$*-FDkr+DBL&E+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL
+<VdL+<VdL+<VdL+<VdL%15is/g+\CGA_58@:X(h@:s-o+<VdL+<VdL/M/)UDg-)8Ddd0t+CQC)
Ch[BpEZf(5@:s-o+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<V+#
:-pQUAnc-nF`V,7+<VdL+<VdL+<VdL+<W6f+D,>*A0>K#Bk(q!+E_a:EZeh:+EV:.BlY>.Ch[Bp
EZfF5Eb/g"+DtV)AKW*<+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL
+<V+#:-pQUB4Z0sEc5D0+<VdL+<VdL+<VdL+<W6f+D58-+EV:.+D,G(@r$*-Ao_g!+EVO;ASrV5
+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<V+#:-pQUB4Z0tEc6)>F!)SJ+<VdL+<VdL
+<W6f+ED%8F`MA@+CQC/BleA=De:,)Ec6)>F!,RC+EqL5@q[!1Dfm14@;[2rA7Qg%BQ&!2F!)SJ
+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+:SZQ67sBnATVg.FD5W6
ATT%;+<VdL+<VdL+>#/fCh[s4+E(j7E+rg(F`M&7+Du+>+DG^9@;^?5F(KH7+<VdL+<VdL+<VdL
+<VdL+<VdL+<VdL+<VdL+:SZQ67sBnATVm)Dffo-Dfor>F!)SJ+<VdL+>#/fB4Z1++E2"4FDi:@
Df^"C@rHL-FE8R:DfQt2AS,XoARlotDKKH1G%#3.+<VdL+<VdL+<VdL+<VdL+:SZQ67sBnATVm)
Dffo3DJ!f0+<VdL+<VdL+>#/fB4Z0-Bl7O$Ec#6,Bl@l3@:F.tF<GL>AKYT$Bk(q!+E2"4FDi9E
+<VdL+<VdL+<VdL+<VdL+<VdL+:SZQ67sBnATVm)Dffo=Bl8!'F<D\K+<VdL+>#/fCh[s4+E(j7
Ao)0kCN:P:BQ&!2F!,17+E)./+EM+9+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+:SZQ67sBn
ATVm)Dffo=BmO?3+<VdL+<VdL+>#/fEb0?8Ec,q@@<Q'nCggdhAKYT$Bk(q!+E2"4FDi:CBmO?3
+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+:SZQ67sBnATVs(@qBP"E+j03Df[$D+<VdL+>#/fF(Jd#
@qZusDfQt@ARf:hF<G13Bk(q!+E2"4FDl4C+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+:SZQ
67sBnATVs(CghEsA9;6mF!)SJ+<VdL+>#/fB4Z1++EV%)F!,L7CghEsA0>u4+=MLf.3N_@B-:Yl
F(Jl)Df-\-Cisf@ATDL&B-8<>+<VdL+<VdL+:SZQ67sBnATW!)FDPZ4F<D\K+<VdL+<VdL+>#/f
Ch[s4+E(j7Ao)0kCN:P=ATVu9+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL
+:SZQ67sBnATW$4CLqB++<VdL+<VdL+<VdL+>#/fB4Z0-Ao)0kCN:O`:e;dODeip%+<VdL+<VdL
+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+:SZQ67sBnATW'4FCAfpARlo++<VdL+<VdL
+>#/fCh[s4+E(j7E+rg(F`M&7+EV:*F<G+4+Du+>+D>2,AKYE!Gp%3;B6,1<+<VdL+<VdL+<VdL
+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+:SZQ67sBnATW'9ATDm$B6,1<
+<VdL+<VdL+>#/fB4Z0-Ci<s!ARlotDBO(CATDi7FCAg'+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL
+<VdL+<VdL+<VdL+:SZQ67sBsBleB;ATW'8Ci^^A+<VdL+<VdL+>#/fEb0?8Ec,q@@3B&r+E(j7
DfTQ)Bl7?q+EM7CARlotD..'g+E_^@F!)SJ+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL
+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<Vd9$;No?+Dbt/
Bl7O!Bk(q!+<VdL+<VdL+<VdY/KekJB5)6+FDi:6Ch[BpEZee.A0>o(FEMVA+Eh10Bk/>P:e;dO
Deip%+<VdL+<VdL+<VdL+<VdL+<Vd9$;No?+DkP&AT2=$FDku0DJO;9+<VdL+<VdY/Ke\;DImis
FCfM9A8-'q@rri,FDYh:Ch[d&F!,RC+D,G(@r$*-E+j03Df[$D+<VdL+<VdL+<VdL+<VdL+<VdL
+<VdL+<VdL+<VdL%15is/g,"A2.glID0'f>Bl7Q++<VdL+<VdL/M/)TDf'H9FCfJ8D.GLHBOPsq
+D,Y4D'3>%@<,ddFCfJ8Ch[s4+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL
+<V+#:-pQUE+*d.ASbdrFEMP5@<?''+<VdL+<W6f+D#e>Ea`I"+DbJ-FEMP5@<?''@<?U3Bju4,
AKZ/)Cis<1+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<V+#:-pQUE+*d.AT)Hs@<?(%+<VdL+<VdL
+<W6f+CfP9+F%a>+E)-?A79RkF!,%1ASl!rFE8QI+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL
+<VdL+<V+#:-pQUE+*d.AT)I#D.dp1@ium:+<VdL+<W6f+CfP9+D>k6C`mY6+A#9t+B)0*+<VdL
+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<V+#:-pQUE+*d.AT)I*BQ&!2+<VdL
+<VdL+<W6f+CfP9+F%a>+E)-?E+j03D]iV-ASl!rFE8QI+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL
+<VdL+<VdL+<V+#:-pQUE+*d.AT)I*BQ&!2F(KG9+<VdL+<W6f+CfP9+F%a>+E)-?E+j03Df]K3
+D#A#D.RU,F!)SJ+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<V+#:-pQUE+*d.AT)I-BmO>5
+<VdL+<VdL+<W6f+CfP9+F%a>+E)-?F(or3+D#A#D.RU,F!)SJ+<VdL+<VdL+<VdL+<VdL+<VdL
+<VdL+<VdL+<VdL+<V+#:-pQUE+*d.AT)I.@:p]*+<VdL+<VdL+<W6f+CfP9+F%a>+E)-?FCAf)
ASbppASuU2+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<V+#:-pQUE+*d.AT2?o
F!)SJ+<VdL+<VdL+<W6f+D#e>Ea`I"+CT)&+E2"4FDi:9A0><&FE2))F`_1;G%#30ATJu+Ec5e;
G\q7>+<VdL+<VdL+<VdL+<V+#:-pQUE+*d.AT2R/FCeu*+<VdL+<VdL+<W6f+D#e>Ea`I"+E27?
FCeu*@<?U3Bju4,AKZ/)Cis<1+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<V+#:-pQUE+*d.
ATMQrF!)SJ+<VdL+<VdL+<W6f+D#e>Ea`I"+CT)&+E2"4FDl53F<G:.F!,(8Df$VAD/:=;+<VdL
+<VdL+<VdL+<VdL+<VdL+<VdL+<V+#:-pQUE+*d.ATV?rASrV5+<VdL+<VdL+<W6f+D#e>Ea`I"
+CT)&+EV%-ASrW$@<?''@<?U3Bju4,AKZ/)Cis<1+D,Y4D'3@tFCfM9ASbppASuU2+<V+#:-pQU
E+*d.ATVX.Ch7Z1+<VdL+<VdL+<W6f+D#e>Ea`I"+EV=>Ch4_tFEDP;@Wcd(+Eh10F_,V:+<VdL
+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<Vd9$;No?+EM+&Earcq
Ec6)>F!)SJ+<VdL+<VdY/Kf+G@<,jk+E2I4Ch[B%Ao)0kCN:P1Ec6)>+EV=>Ch7Z1FD,*)+Cf>-
FCAm$+=MLf.3N_DG]Y&N+<Vd9$;No?+EM+&Eard%BQ&!2F!)SJ+<VdL+<VdY/Kf+G@<,jk+D,P4
+D,G(@r$*-E+j03Df[$D+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<Vd9$;No?+EM+9
F)Go<G]IA-ARlo++<VdL+<VdY/KekDF*)IGD/"'4Bl7Q+>?r@cD..'gF!,(8Df$V/Ch[BpE\DNJ
F_tT/+F%p<Afr3=+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL
+<VdL+<VdL+<VdL+<VdL+<Vd9$;No?+EqI0FEMV?+<VdL+<VdL+<VdL+<VdY/Kf(FFEMVA+E_^@
+Eh10F_)\(F!+t/+Dbb5F<D\K+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL
+<VdL+<VdL+<V+#:-pQU+<V+#:-pQUFDk].+Dbb5F?0j<:-pQU+<VdL+<VdL+<VdL+<VdL+<VdL
+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+:SZQ67sBhF`_;8E]P=8DeO#26nTTK
@;BFp+<V+#:-pQU@rc-hFCeuD+A-coAKW`^0K0FJ:-pQU/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+
/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/I`%^67sBjBOPdk
ARmhE1,(C@0/,:;0Jjmp+>#/f@rGmh+D#e>Ea`I"ARloqEc5e;-t[:0@r$*6+D5_5F`8H4$4R>;
67sB/3?^F?0e"5!+<XEG/g)hjEb0*+G%G_;GA(]4AKZ&5@:Njk0d(LJFCAm$Et&Hc$=e!aCghC+
+=Cc;Bk(q!5u:-#+:SZQ67sC$AT;j,Eb/c(8g%qa@WGmtBk;?.%17,eEHPu9AKW@B@<633+:SYe
$>+*g@r$*N:e>_>FED57B6-g7/h1ILBk(q!5u:-oATW$.DJ+#5F"JsdF(KG9D.-pfBl7K)F)Y]#
BkD'h+Dbt+@;KKtB5DKq@;L!;%15is/g(T1:-pQU<+oue+EM%5BlJ/:BlbD.G\(B-FCeu*@X0)<
BOr<*Df^#/D.7<m+E(j7FD,5.-t[:0@r$*N:e<)F$;No?+D5_5F`8rU+A$YtF(KH7+CQC1F_tT!
EZf:4+DkOsBPD?q+EML5@qfOh@j#T+@ps1b+D5M/@UX(o/e&._67sB'%15is/g+SFFD,T53ZoP;
DeO#26nTTK@;BFp+<V+#:-pQU@rc-hFCeuD+A-coAKW`^0K0FJ:-pQU/M/P+/M/P+/M/P+/M/P+
/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/I`%^
67sBjBOPdkARmhE1,(C@0/,C>0KC7-+D#e>Ea`I"ARlonDe*E%Ao_g,+=Li<Bk(q!F(KH8Bl7R)
.4u&:Ao)0kCN<O!BQ\0$F&#%S.V<L2@r$*eFD,f6@WNZ5/M/)WCh[BpE\DNJF_tT/E,9Z<+EVO?
Ci_3<$;No?+:SZQ67sB[BPDN1F(96)E-*45AS,XoATJu<DfTB0+EV:*F<G7.CiCM<H#@,*Ec5i0
H=\42Ch[BpEZf:<Ch[cu%15is/g+kF@:s.m+EqOABHV5*Ao)1!AKZ).F_tT/E,9Z<+Cno&@:EYd
AM,)7$;No?%15is/g,=KEaiI!Bl,m?$;No?%15is/g+,3+E_a:+EV:2F!,O6EbTK7+EV:.+D,P.
Ci=N3DJ()/F`VXIDdmfsBl5s@$;No?%15is/g)hs+B<Jo+EV:.+BN8pA8c[5+Eh=:F(oQ1+E(j7
8g#].G%G].F(oQ1+>kc*1a$^W+DbJ.ATBCG+:SZQ67sB'+<XWsBlbD,@;[2sAKYN%GA_58@:Wq[
+EqOABQ&$8+Cf>2F<G"6+Er$R/o#HGAor6*Eb-k5Df%*L%15is/g)8Z+B3#gF!,O6EbTK7+E_a:
F!+m6DKTf*ATAo3Afs\gCh[@!@<-'nF!,OB+F.mJ+Dl7BF<G7*G%D*i:-pQU+<Ve8+EqaECM@[!
+A*btH#n(=D(Z8):-pQU+<Vd9$;No?+<VdL=(ubi+EVX<G%kB$+Dl%-BkD'h@<?4%DK?qGDfm14
@;[3.F`&=DBPDN1F(96)E-*4HBln#2%15is/g)8Z+EV:.+A?KeFa,$PATDj+Df-\9Afs\u+<XWs
AKYhuBl5&6Dfp/9DIml3FDi:3BOPdkAKYE%AKZ21ATD>k$;No?+<VdLFD,5..!''5ChtOCG%G]'
+DGm>@ps1iARlp*D]ib3G&M/-+EV:.+DkXH/nK9=+CT.u+EVOE@q[K+G\&K:$;No?%15is/g)kt
+B`W*+Dtb%A0>u4+D58-+CQC)Ch[BpEZdYE8K_e[GqL3^<+ohcAo)0kCN:O`:e;dDF!+m61GTCH
:-pQU+<Ve9H$!U?@q]:k@:OCjEZfFFEbTE(/e&._67r]S:-pQU1+=>KDfm1?AS#Bp@;[3)A2PuN
G\&"-Df'?"DIal+Bl7K)AU%crF`_&$Ch4`-DBO4CF`JU7Df'?"DIak!$;No?+<VdLF(f-$C`m\*
FD*9L<+ohcG%G]8Bl@l38K_GY+E_a>DJ()%@;TQuAo_g,3ZoPhGBYZODfp);Bl%3e/n8QJD.GLW
%15is/g)8Z+DkXH+DG\3Ch7HpDKK</Bl@m1+CT;%+CTG%Bl%3eCh4`$DfQt/Cht4i;^ZW=+<V+#
:-pQB$;No?+>YGh=`8F*DImBi+CQC7DfoQ'/nK9=+Cf>,D..<m+Dbb0AKYQ/ARfk)@:F%a+E)-?
H#IhG+Cf>,D..<m+EM4-Cht55@<?08%15is/g)8Z+EVOE@q[K+G\&"7F`VXI@:NeYE-*45@<?(%
+DG^9-WsST=Y3?B/OVuL84Yd::-)<P-Qm#>Ec#6,/e&._67r]S:-pQU1asPHBPDN1F(96)E-*3N
Ao)0kCN<O!BQ\0$F"V0AF"&5?DIak<Ao)0kCN<O!BQ\0$F)to7FD5W*F"V0AF"&5KF`VXI@V$['
ATW'6%15is/g)8Z+CT=68g%qg@:UL%@rc:&FE9&W+Dbt)A0>r'EbTK7F!+t$DBND"+Dbt)A7]9o
@X0)<BOr<-FCB&t@<,lf$;No?+<VdL8g#NuDdd0*+Eh=:@P/cG=`8F*A8`T4BPDN1@X0)-A8-."
DJ()6BOr<-@rc:&FE8R@BleAK+<Xg*FU\[Q67sB'+<Y0&DBNM$BlkJ>BPDN1Ch[s4+C]U=FEqh>
DJ)!>$;No?%15is/g)8Z+<VdLF(96)E--.D-Y4YJ+<XEG/g,(OASuQ3@;[3!A8--.-u!F;.3NhK
DId[0+EqOABHVA+EbTK7F"V0AEt&IO67r]S:-pQU+<Ve8A7TClB-:V*Ci<`m+EM%5BlJ/:BlbD9
Eb0?7Gp%0MEa`ZpBQPA/DfU&1Eb$:E+CT5.ASu$$Ch[cuF!,:5CLmq^:-pQU+<Vd9$;No?+<VdL
+<Ve=Ch[BpE`dEsF_tT/+<Y/T>]"b-@rc:&FE:]!Ch[BpEX`@N67sB'+<VdL+D,G(@r$*eFD,f6
@WQ+&FD5W*F!)T83a?NIF(96)E--/+Ao)0kCN=K-FED57B6+Lh:-pQB$;No?+<VdL@;]TuF('6'
+EV:.+EM%5BlJ/:/Kf(FAn?!*FDi9o+CoD#F_t]-FCB9*Df-\0DfQt2ATV?pCi_3<$;No?%15is
/g*##+B*2qAKZ/-Eaj)4Bl5&8BPDN1F*VhKASiP<A8c[0Ci<`mF(KH(BkCs++=Ll6FD5T#B4YUf
D.RU+Bl@m1.1HVZ67sB'+<W(L@;BFqATVU-D/:XD@;]TuDffZ(EcW@3F)uJ@AKZ).AKYr4ATMF#
@q?d$AftM)<+pDk@WP@^F`S[KATDj+Df-!k:-pQU+<Vdc+Cno&@:EYdANCqVGB\6`@qB[pDfp+R
@rH3:+<V+#:-pQB$;No?+<VdL<,Wn%F(HJ9BOu6r+D,1nFEMV8F!,aHFWbR5ARlp*D]iP.DJ!Tq
F`M%9@3AN_F_tT/E,9Z<+Cno&@:EYdAKVEh:-pQU+<Ve8F!+n/+AYBl6QgGgF`Lu'/e&._67r]S
:-pQB$;No?+A$HmATDBk@q?d,DfTB0+<VdL+<VdY/KePAD/Ej%FE8R=DBO%7ATME*GAhM4F!+t2
DKK<$DBO(CAKYQ/@;Tt"ATJ:f:-pQU/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+
/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M.D=:-pQU@q]F`CM%Bs@r$+,
BQ\0$F*M_:AfrZW+Cf(r@r!3!Ch[BpEZfI;F_tT/+F%p<Afr3=+<VdL+<VdL+<VdL+<VdL+<VdL
+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL
+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<Vd9$;No?+CoD7DJX6"A92=(A8,Xf+<VdL+<VdY
/KeSBGA_58@:UL%ATT&/D..'gF!,R<@<<W#Eb-A2Dfd+9DBNJ(Eb/a&DfU+G.![6a+<VdL+<VdL
+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+:SZQ67sBnATVX'@:s.^Bl.F!F(oQ1F!)SJ
+>#/fCi=6-F`8I;D..'g+Co2'ASuR'Df0V=Bl5&8BQ\0$F)Yr<F!,"%FCAWeF(HI:+<VdL+<VdL
+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL
+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL
+<V+#:-pQUCh[s4F(KH9Eboe>+<VdL+<VdL+<W6f+ED%8F`MA@+CQC&C`mY.+E):7B5)6lC`me5
H=^V0Bl.9kAKZ,9Ci^^A+<VdL+<VdL+<VdL+<VdL+<V+#:-pQUCi<`mG]IA-7VldKCN<BfF_tT/
+<W6f+Dbt)A0>K#Bk(q!+EM+9+EV:>D.7Q/B45UmATE&=A8-'q@ruX0Gp%?PAS*&-+<VdL+<VdL
+<VdL+<V+#:-pQUCi<`mG]IA-7qHU\@:s4aA0<!;+<W6f+Dbt)A9/l4BQ&!2+DG@;+DbJ.BlnK.
ALns?Df03%FEM,*+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<V+#:-pQUCi<`mG]IA-8Rte7D.Rc`
@;TQu+<W6f+Dbt)A0>i)Dffn?Bk/b;FD5T'F!+n/A0>buD.Oi7Eb/i*FCAWpAKW*<+<VdL+<VdL
+<VdL+<VdL+<V+#:-pQUCi<`mG]IA-;e]c;@;TRDATM?(+<W6f+Dbt)A0>r)F<G:./0K"FF<GI0
D.P7@A7]glEbTK7Bl@l3G]IA-+EV%$Ch4_3+<VdL+<VdL+<VdL+<V+#:-pQUCi<s#DJ!^!@r$*-
+<VdL+<VdL+<W6f+Dbt/Bl5&8D]iY.Bk(q!+CT.u+ED%8F`M@BG%#3$A0=078K`+nCLqB++<VdL
+<VdL+<VdL+<VdL+<V+#:-pQUD..3kE+j03Des-*CNCU@+<VdL+<W6f+D58'ATD4$ATJu)Bl[cp
F<G7=D/:>2Bl7^-+EVNEAo)0kCN:P:BQ&!2F!)SJ+<VdL+<VdL+<VdL+<V+#:-pQUD..3kF(KH,
FDYh:+<VdL+<VdL+<W6f+D58'ATD4$AKYD(F(oK1Ch4`&FDYh:F(KG9@rH7,ASuU2+ED%4DfTqB
+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+:SZQ67sBuDg->ABm=]1@rib8
+<VdL+<VdL+>#/fATMs-D..Nt+E(j7@s)g4ASuT4F`(o<+EM+(Df0).FD5T'F*(i-E$-8G+<VdL
+<VdL+<VdL+<VdL+:SZQ67sBuF_kl8EG98uB4Z-,+<VdL+<VdL+>#/fEb0,sD.Oi(D..'g+D,>(
AKYl!D.Rc2GA2/4+Du=<C`lqf+C]A"@r#XtF!,RC+E_R2Ea`HnATVKo+:SZQ67sC"@;0akEa`Hg
BlY==+<VdL+<VdL+>#/fD..NrBOu6-Ao)0kCN:P0Bl%?'DIIBnF!,[@FD)e-Ble60@<iu0D..'g
+D,>(AKYl!D.Rc2+<VdL+:SZQ67sC"@<-F#CghC,F`:l"FCcR;+<VdL+>#/fAU&<;@:OC%CghC,
F`:l"FCcS'FEDP;@Wcd(+Eh10F_,V:+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+:SZQ67sC"@<-F#
Df0)oFCfM9+<VdL+<VdL+>#/f@s)l9G\q7>Df-\.@<?(%+D#A#D.RU,F!)SJ+<VdL+<VdL+<VdL
+<VdL+<VdL+<VdL+<VdL+<VdL+:SZQ67sC"@<-F#Df09+B6/*'+<VdL+<VdL+>#/f@s)l9BQS*-
+E)-?8PM\t;c5t*+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+:SZQ67sC"
@<-F#Df0N-Dffn?+<VdL+<VdL+>#/f@s)l9G\q7>Df-\:BQ&!2+D#A#D.RU,F!)SJ+<VdL+<VdL
+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+:SZQ67sC"@<-F#Df0N-Dffo=ATT%;+<VdL+>#/f@s)l9
G\q7>Df-\:BQ&!2F(KG9ASbppASuU2+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+:SZQ
67sC"@<-F#Df0W1H=\3A+<VdL+<VdL+>#/f@s)l9G\q7>Df-\=BmO>5ASbppASuU2+<VdL+<VdL
+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+:SZQ67sC"@<-F#Df0Z*B-8<>+<VdL+<VdL+>#/f
@s)l9G\q7>Df-\>@:p]oCh7HpDKKqB+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL
+:SZQ67sC"@<-F#E+rj(+<VdL+<VdL+<VdL+>#/fAU&<;@:OC%@;Ka&E+j03D]ib)+CTA6EbT!*
FCcS<@;L'tF!,(8Df$VAD/:=;+<VdL+<VdL+<VdL+:SZQ67sC"@<-F#E,Tf>ARlo++<VdL+<VdL
+>#/fAU&<;@:OC%E,Tf>ARlolFEDP;@Wcd(+Eh10F_,V:+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL
+<VdL+:SZQ67sC"@<-F#F(o0++<VdL+<VdL+<VdL+>#/fAU&<;@:OC%@;Ka&E+j03Df]K3+DGA-
+D,Y4D'4(?C`jiC+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+:SZQ67sC"@<-F#FCArrDBL&E+<VdL
+<VdL+>#/fAU&<;@:OC%@;Ka&FCArrDBNIuFCcS'FEDP;@Wcd(+Eh10F_,V:Ao_g,+Cno&ATJu*
Ch7HpDKKqB+:SZQ67sC"@<-F#FD5i5ATJt:+<VdL+<VdL+>#/fAU&<;@:OC%FD5i5AKYE'FE2))
F`_1;G%#30ATJt:+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+:SZQ67sC"Bk29sEc,<&AKW*<
+<VdL+<VdL+>#/fBl.9kAKY\t+=M2CA901BAoD]4Bl.9kATJu<Bln#2.![6aBl5&2@;TQu+<VdL
+<VdL+<VdL+<VdL+:SZQ67sC"Bk2:!DId3!+<VdL+<VdL+<VdL+>#/fCh[s4+E(j7Ao)0kCN:P:
Bk29-FD,*)+CT;%+DG^9FD,f6@W6.+F!,"%FCAWeF(HI:+<VdL+<VdL+:SZQ67sC"Bk2:&Dff]2
A7?Z(+<VdL+<VdL+>#/f@WW`2Aft]%Bk(q!+DG\$B4Z-,FD,*)+CT;%+Du+>+DG^9A79Rg@UX=h
+<VdL+<VdL+<VdL+<VdL+:SZQ67sC"Bk2:&Dfg5EAS,La+<VdL+<VdL+>#/f@WW`2Aftf)@:s.m
+EV:*F<G"4AKYl/F<FOrF_tT/E,9Z<04o$7@r$*-@rcL/F!,L7An?!oDI[6g+<VdL+<VdL+<VdL
+<VdL+<VdL+<VdL+<VdL+<VdL+<V+#:-pQUF(KH7DJsWAEb/ioA0<!;+<VdL+<W6f+Dbb5FE8RA
Ble?0DJ((r>p*iu@:s.m+D,Y4D'3G,Bk(q!06ClMD.7Q/G]IA-+<VdL+<VdL+<VdL+<V+#:-pQU
F(o/sEc,<&AKW*<+<VdL+<VdL+<W6f+EM+9+DG@/.!'*5.3N5CDf$V<ATT&4@;TQu+<VdL+<VdL
+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<V+#:-pQUF)bZ0@:Nh^EZcJI+<VdL+<VdL+<W6f+ED%2
@;TRs+D,>(ATJu8D]i7i+E)9CH[R#FE,]AsEcW@4AS,k$AKZ).AKYQ/FCf?2Bl@l3+<VdL+<V+#
:-pQUF`:l"FCf'#Bk(q!G\q7>+<VdL+<W6f+E_X6@<?''E+j03D]iJ+A0>i)Dffn?Bl7O$+F%a>
+D,>(ATJt:+<VdL+<VdL+<VdL+<VdL+<VdL+<V+#:-pQUF`:l"FCf0(AoD9qCh4_3+<VdL+<W6f
+E_X6@<?(%+E2"4FDl4CBl7O$Ec#6,Bl@l3Anc'm+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL
+<V+#:-pQUF`:l"FCfN)FD,c5C`jiC+<VdL+<W6f+ED%+ASu("@<?(%+D>k6C`me1F<G(3DKKH-
F<G10Ch7Z1Bl5&7D..6s+DG\$B4W2rBl[cpFDl26ATJ:f:-pQUF`:l"FCfN1@;Kb%BQ\0$F!)SJ
+<W6f+CoD7DJX6"A9/l7D..6s+D,G(@r$*-F(KG9Bl.9kATJu9D]j.8F_tT/+Co2,ARfh#EbT*+
+<VdL+<V+#:-pQUF`:l"FCfQ-F_tT/B45UmATDKrF!*%d+E_X6@<?(%+EV:>D.7R*CiseAAo)0k
CN:P=ATT&-@;KakEbT*++<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL
+<VdL+<VdL+<Vd9$;No?+<Vd9$;No?+EVO4D]ik1F*'GP$;No?+<VdL+<VdL+<VdL+<VdL+<VdL
+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<V+#:-pQU@<H[*DfRl]+A-QcDBM>"
+@9LPATAn9%15is/g+YEART[lA3(i*F`(b51,(C@%15is/g)_t/M/P+/M/P+/M/P+/M/P+/M/P+
/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/O`$;No?+Cf(n
DJ*Nk3Zp130K1X=2D6dF+>"]Y<+oue+Cf4rF)rI7ATM?mDIdf2Ao_g,+EV:.+D,G(@r$*-B6%p5
E%W8FCh[BpE^<Mn%15is/g)8Z+<VdL+<VdL+<VdL+<VdL+<VdL+D,b6@ruF'DK?q6@<Q3)@V'+g
+EML<BlkJ+DIal3BPDN1F*VhKASiQ-Dg*=HF(KD%$;No?+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL
DdmHm@ruc7De:,6BOQ!*@r,RpF!,(5EZet1Bk(q!+CSbiATMoF+<Vd9$;No?+Cf(nDJ*Nk3Zp13
0K1X>0J>.?+>"]Y8K_GPA7]9oFD,5.G%G]'+=Ll6FCf9"@<?U3FCf]=.3N_N+D>2$A8Gg"@q]:g
B4Z-,Bl4@e:-pQU+<VdL+<VdL+<VdL+<VdL+<VdL+<VeKBOr;g9hZ[MATW'8DIm?$Ao_g,+@^0]
@r$*;+<XWsAKX*VBmO?34s4EQASl!rF<GI>G7=mS67sB'+<VdL+<VdL+<VdL+<VdL+<VdL+<Y?+
F!+n5FE2))F`_29/g)9.F<G+.A8Wc:+DQ%?F<G!7An?0/A79b)+CSo$/g)9.Afu2/AISuA67sB'
+<VdL+<VdL+<VdL+<VdL+<VdL+<Y*7FE2))F`_29+CT;%+E)4@Bl@ltC`mS?+D,>4+EqO9C`m2-
ART@,+<X6f+EV:.+:SZQ67sB'+<VdL+<VdL+<VdL+<VdL+<VdL+<Y]9F*2;@+BV?3+DYP"E-!.3
BOPdkBl7Q+8K_kYGp$R-+D,P4@qB0nFDi:EF(Gdf:-pQU+<VdL+<VdL+<VdL+<VdL+<VdL+<Ve8
+ED%%C`lhS9H\:_EcYf4+DG_7FCelk+E(j7D0[7;Df'&uEc6/>+Co1rAKYE!A0>r0Bk(]s8hM5/
+<VdL+<VdL+:SZ#+<VdL+<VdL+<VdL+<VdL%13OO:-pQU-oiG31bgF%0H_K567sB7+ED%1Dg#]5
+EqL5FCcS9E+*6f+>G!ZATV?pDK?6o%16T`@r,RpF!)iBCh[BpE`dEsF_tT/-OgD*%15is/g,1G
EHPu9ARloU+Dbb$Eaa!&ATJt'$?B]tF_Pl-+=D8>F))n=AS5S!+Co"1+:SYe$;No?+AP^3762P=
Eb065Bl[c4+CoD%F!,@=F<GdGEbce0DfQt<Df..:DfTD3Ci<`m+EM%5BlJ08%16oi@:UK.Ao)0k
CN;^;8LFrS@rH(!F(KB6+=Cc;Bk(q!5u:-#%13OO:-pQUFD,f6@WQL)F`S[<@;KakEd8dMFD5Q*
FD5<-+:SZoDdd0!-YHk(Ch7X4-OgDmDeX*1ATDl8-YHk(Ch7X4-OgCl$;No?+@g?gB5D-J@<-I'
+DYh1+D,Y4D'2>[DffE#B4YTrAo)0kCN:P3D..'gEt&ImDdd0!-YmR8-OgDmDeX*1ATDl8-YmR8
-Y@1/@r$*eFD,f6@WQU%FED57B6-g7/h1ILBk(q!=EJ5!D.7R-ATW$.DJ+#5F"JsdF(KG9D.-pf
Bl7K)F)Y]#BkD'h+Dbt+@;KKtB5DKq@;L!;%15is/g(T1:-pQU<+oue+EM%5BlJ/:BlbD.G\(B-
FCeu*@X0)<BOr<*Df^#/D.7<m+E(j7FD,5.-t[:0@r$*eFD,f6@WNt-$;No?+D5_5F`8rU+A$Yt
F(KH7+CQC1F_tT!EZf:4+DkOsBPD?q+EML5@qfOh@j#T+@ps1b+D5M/@UX(o/e&._67sB'%15is
/g+SFFD,T53ZoP;DeO#26nTTK@;BFp+<V+#:-pQU@rc-hFCeuD+A-coAKW`^0K0FJ:-pQU/M/P+
/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+
/M/P+/M/P+/I`%^67sBjBOPdkARmhE1,(C@0/,:;0f^@.+Co&(Bm+&u+D,Y4D'3G,Bk(q!F(KH8
Bl7R)%15is/g+Y;@;]^hA3(hg0JGF=0K(R>0H_qiDg#]4EbT&q+CfG'@<?'mCh[BpE^<Mn+Eh=:
@N]c2+D>J"AISuA67sB'+<VdL+<VdL+<VdL+<VdL+<VdL+DlBHAo)0kCN:P=ARfk'BlnVCCLqd4
/g(T1:-pQU@q]:gB4YU7+>PW)2_Qm?0/5C./Kf"NEcbl'+EVNEC,R[u1(=R"$4R>;67sC!G%G]7
Bk1ctFDi:8Bk1ctD0[7FARfk'BlnVCCLqd4%16TcART[lAo)0kCN;^;8RH(GBk(q!5u:-[4ZYAA
3Zp*c$4R>;67s`tEb/[$AS,am@r$*N:e;dQ/M/)ZDJ=3,@;KY(AKYT$Bk(q!5u:,qDdmHm@rucE
%15is/e&._67sBtDf/uo3ZoPTEb/[$AS,am@r$*N:e;d=@:O+CCh[BpE^<Mn:L\'M@rr.e:-pQB
$;No?+<Ve%67sC%ATVu9@;Ka&DdmHm@rri4@<,dnATVL(F!,RC+E1n4F)Pr)C`m8"AmoguFE7lu
:-pQU+<YK=@:UK.Ao)0kCN;^;8LFrS:-pQU+<Y974Y@jeDf0-1+=Cc;Bk(q!5u:-#%15is/g)8Z
@rc-hFCf'#Bk(q!5u:-[?Y44!AoA+c:-pQB$;No?+Cob+A3(hU-t@'gF(o/H@r+G-8S_m_4(E)*
;e9HZATU"DCfG=gASrq>@rc-hFCf'#Bk(q!5u:,q@UWb_7VldKCN;^;8P`f1ARffk$4R>;67sBU
:K0bD+EVNEAStpcCh4`2BOr<'Df/uo+D,P4+E1n4F)Pr-C`mkAAKYPpBljdk:-pQUFD,5.DJsZ8
+EM+9FD5W*F!,:5F*(u(+D>>,AKZ)5+DkP/@qZu-H#IhG+E)IA%15is/g+k=/0J_>Gq:(ZARfal
F<G"0A0>;j@qB_&+EVO;ASs+0$4R>;67sBmCh[BpEZfLGATAo-A7]Y#BkD'jEX`@mH"Ll,@r$+&
F(o/J/giA40K1sG3&<fp0JFj`$4R>;67sBmCh[BpEZdYE8K_e[Gmt*tH"Ll,@r$*nE+s*!Gs*c-
AS!_V1M&LTAMdsX11juU@qI]41,3?!3+ap+0f!<#-OgCl$;No?+D,G(@r$*-F(f!&ARlp)ARfal
F<G@1Gp"[]FD5;s+EVNEAo)0kCN:O`:e;dFAU+^lD0]`0Bk(q!F(f!&ARojn@rc.&4YA*92E,/%
2).*L3Ft'*@5Bkj%13OO:-pQUAo)0kCN:P:ATDX%F)u&6DBO%>CLqAm$>k'1Deip%4YA*:1,:OC
0eGC@0k;ss0K3Dt2Dehu0P)U@$4R=jD0]`0Bk(q!DKBN&4)K7TCh[BpEa`p$CLqcQD0]`0Bk(q!
F(f!&ARojn@rc.&4$7A*FDkr+DCH]<Eb/[$AS,am@r$*N:e;dT%15-*$;No?+E(_(ARfg)DJsZ8
F!)VS.OdM5+@]$r6VC<P;b9A"7SHB@92\&P8P;KT+@]$r6VC<U83p-B6rQNA;FOP-7SHB@92\_b
91;Su%14IP9M%TE;GL.^6m+rm8OH-K5u:-G79La&9M%TE;H$+P;FNuP770sA<$4Y(8OH-K<)6.U
:+&1c+F">&%15is/g,(AC1Ums+Du+?DK?pD-n6Z//g+:_9he&S+B_!)9gqrI:/i?*:CRY65tt'B
;E[&`0d%S]+<Ve%67sBjBOQ")ATAo-F!,C=%166(9he&S6V^TD3Zp.2+<XEG/g,:XATAo9E+EC!
AKYSn@ruX0+:SZI:H^`]Gp"4P+<VdL+<Ve%67sC%ATT&,Ch[BpEZf:0C1Ums%14Nn$>+*g@r$++
ATW$.DJ+#c67sa"Ch[BpEcYf6FD5W*F!,NU/Kf+GF<GF/@q]RoAKZ&5ARfFdBk&9%De!3lAKYW%
Ddm-kF"Rn/:-pQU%15is/g+,,BlbD<@rc:&F<G:=+D#e/@s)m)A0>?,+EV:.+E27?FCB#qCh4`-
Afu2/AKWC5Ch[BpE[_G):-pQUB6%p5E%W7U8TZ(rATVu9@3BH1D.7's+E(j7D.-pfBl7K)F)Y]#
BkD'h+Dbt+@;KKtB5DKq@;L!;%15is/g)8G$;No?+CTD7BQ%oP+A-QcDBM>"+@9LPATAn9%15is
/g+YEART[lA3(i3AT2a&D.7's+>PW)2%9mf67sB4/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+
/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+%15is/g+Y;@;]^hA3(hg
0JG@;0KCd?3?TmrD/XT/A0<:2BlY[P+Du+?DK?qBD]j";F*(i-@VfTuDe:,6BPDN1B6%p5E%VS,
:-pQU@q]:gB4YU7+>PW)2(pXD0/>4(/Kf(FD/XT/A0<:2BlY[P+Du+?DK?pP+CSekARlo3F(KH*
Ch[BpEb'3)G%E*F%15is/g)8Z+<VdL+<VdL+<VdL+<VdL+<VdLFDi:1FECr$BHUi+Bm+&1Ch7^1
ATAo8D]iJ)C`k-IA1B#NDJsZ8F"SS1Dg*=GD[d%K67sB'+<VdL+<VdL+<VdL+<VdL+<VdL+CSek
+CQC1ATo8/Ch[BpEZen,Eb/a&DfU+G8K_n^ARlp%DJXS@Bl8!'Ec`E5$;No?+<VdL+<VdL+<VdL
+<VdL+<VdL+<Ve8+Dtb7+=M;A.OcKZ@<?0*DJsZ8+DG^9B6%p5E$-Q@Ch[BpEcYf6FD5W*F"&^N
$4R>T@;KakEd:DH/h1LBCi!['Gp%/[/Ke#+F_tT/E,9Z<+D5,!Ch7X4+E_d?Ch\!*ATKI5$;No?
+:SZQ67sB[BPDN1F(96)E-*45AS,XoATJu&+EMC.Cht5(CghC++E(j7F`_>6Bln'#F!,R<@<<W%
@;ZM]:-pQUD..<rE-5u*FCcRoBQ\0$F)Yr<F!,+(Ci!['Bk;?<%15is/e&._67sC(ATD6gFD5SQ
%15is/e&._67sBN5tjs@;HZ@X5uLW(+<VdL/M/)TBOPpi@ru:&F!+$s@;R,qCi"$6Bl7Q+Bl5&+
@;KakEd8dF@;TRs+<VdL+<VdL+<VdL+<VdL%15is/g*kS:/sSR:JsSL;BR))+<VdY/KebFFCf)r
EZek1A7ZltDIdHk@<?4$B-;&"DKTB(+B3#sD.7R*CiseAB45UmATE&=F)Q)@Bl7Pm$;No?+CT)&
FE2)4+<VdL+<VdL+<W6f+EVX<D0$h.Cht51ART+`DJ()#DIal3Ea`ZuBl7Q+@VfIjCNCU@+<VdL
+<VdL+<VdL+<VdL+<V+#:-pQU@rc-hFCf)nCi!['Gp"4P+>#/f@rc-hFCcRoBQ\0$F)Yr<F!,+(
Ci!['Gp%<FFD)e7@;TQu+<VdL+<VdL+<VdL+<VdL+<VdL+:SZQ67sBkASbq"AS5FfCh7X4+<VdL
/M/)UASbq"ATJu&+B3#sD.7R*CiseAB45UmATE&=+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL
%15is/g+tEF*)&'Ci!['Bk;?.+<VdY/KekDF*&O5Cht4nBQ\0$F&6[qF!,+(Ci!['Bk;?.+<VdL
+<VdL+<VdL+<VdL+<VdL+<VdL+<Vd9$;No?+Dbb5FD##uCh7X4Anc'mF!*%d+Dbb5F<G:7@:s-o
Anc'mF!,17+CQBlBQ\0$F&6[qF!,+(Ci!['Gp"4P+<VdL+<VdL+<VdL+<V+#:-pQUEb/^%@Uj=m
+<VdL+<VdL+>#/fEb0*+G%De<Ea`ZuBl7Q+@VfIjCER,*CisT4F!)SJ+<VdL+<VdL+<VdL+<VdL
+<VdL+<VdL+:SZQ67sC$ATMF)B45UmATE&=+<VdL/M/)cATMF)F!,+(Ci!['Gp$g<@:s.m+<VdL
+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL%15is/g,4DG%G6*Ec5t@+<VdL+<VdY/KeYD
Ec#6,+DbJ-F<F0uATDg0EZf41F)tc&AKYE!A0>r%G%De1DBNM2Ec5t@Ci<flCh4_3+<Vd9$;No?
+EM47GApu3F!)SJ+<VdL+<W6f+Co2-E,8s.+Du+?DBNk8+EM%5AS#a%@;]TuEb0?8Ec*";Dfoq?
G%#30AKW*<+<VdL+<VdL+<V+#:-pQU+<V+#:-pQU@<H[*DfRl]8oJB\+@Ih)6=FY@EZcJ6$;No?
+CfG'@<?'k3Zq4.FDkW"EZd+k0Js:H:-pQU/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+
/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/I`%^67sBjBOPdkARmhE=]nm1
025.o6pr.L%13OO@rGjn@<6K4-YHk(Ch7X4-OgCl$>XKp:-pQ_CMdl1F"JsdGAhM4F!,(5EZf4-
DJ='4CghF"DJ((^Df99)AOU$JFD)e4D/:>*De!p,ASuU2/e&._67sAi$;No?+Eh=:@UX@mD)r+5
:-pQB$;No?%15is/g*`'FCfK)@:NjkGAhM4F!)SW/KePAD/Ej%FE8R=DBO%7ATME*GAhM4F!+t2
DKK<$DBO(CAKYQ/@;Tt"ATJ:f:-pQU/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+
/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/(f+<VdL+<VdL+<VdL+<VdL
+<VdL+<VdL+<VdL+<Vd9$;No?+D58(FCAfpARoRnC`jiC+<W6f+D58'ATD4$ATJu0D/:>*De!p,
ASuT4Eb/ioEb0,uBl7Q+@s)g4ASuT4,%kJ*FCAfpARlu-Ao)0kCN:P3D..'gF!)SJ+<VdL+<VdL
+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<Vd9$;No?+<Vd9$;No?+EVO4D]ik1F*'GP$;No?
+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<VdL+<V+#
:-pQU@<H[*DfRl]+A-QcDBM>"+@9LPATAn9%15is/g+YEART[lA3(i*F`(b51,(C@%15is/g)_t
/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+/M/P+
/M/P+/M/P+/M/O`$;No?+Cf(nDJ*Nk3Zp130K1X=2D6g?+<VdY/KePAA7ZlpG][t7@ru9m+D,Y4
D'16=Ch[BpE[`,DEc6)>+:SYe$;No?+=K5n3]&Q?+>=o\:-pQU0HbCID/XT/F!,[?Blmo/F)YPt
AKW]MEb0?$Bl7u$$4R>PDe!TlF)rHOCMdl8+:SYe$4R=                              ~>
)
showpass 2 put ". ".'zz_',SOLOCALE,'_' [ cocurrent 'base' NB.{*JOD*}
".soclear NB.{*JOD*}

cocurrent SO__JODobj NB.{*JOD*}
zz=:dec85__MK__JODobj 0 : 0
1,L+1+>P'"+>Ynu0f'q12'=h#1H-F4+>bcaCh[BpE^<Mn@3B&r@<6K4AoD]4@:NeYF)u&5B-;;0
AKYT$Bk(q!+@/gqAo)0kCN<O!BQ\0$F(]N3F`8IGF(Jl)FDi:CH#@,*Ec5i0H=\42Ch[BpEZee.
A0>f&Ao)1!AKZ).F_tT/E,9Z<+Cno&@:EYdATMKmCi!['H$!_BD.7R*CiseAA79Rg@UX=h+D5,!
Ch7X4+E_d?Ch\!*ATMX(Cj0f<A9/l9F(Jl)FDi:=@;]duF_kK.AKXK]DeElt7:C4YBHTrB9E  ~>
)
showpass 2 8 put ". ".'zz_',SOLOCALE,'_' [ cocurrent 'base' NB.{*JOD*}
".soclear NB.{*JOD*}


cocurrent SO__JODobj NB.{*JOD*}
zz=:dec85__MK__JODobj 0 : 0
3$9pu1*A7n1,X,iF_>Q6B.mk5Bk(q!+CT5'+EMIDEarY~>
)
showpass 5 put >1{,".".'zz_',SOLOCALE,'_' [ cocurrent 'base'  NB.{*JOD*}
".soclear NB.{*JOD*}


cocurrent 'base' NB.{*JOD*}
0 0$(4!:55);:'sonl_z_ SOLOCALE_z_ soput_z_ soclear_z_' NB.{*JOD*}
showpass 'NB. end-of-JOD-dump-file regenerate cross references with:  0 globs&> }. revo '''' ' NB.{*JOD*}
